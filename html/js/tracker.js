var ClbhObject=function(e,t){function n(e){return e=e?e:window.event,e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.cancel=!0,e.returnValue=!1,!1}function i(e,t){this.X=e,this.Y=t,this.Add=function(e){var t=new i(this.X,this.Y);return null!=e&&(isNaN(e.X)||(t.X+=e.X),isNaN(e.Y)||(t.Y+=e.Y)),t},this.Subtract=function(e){var t=new i(this.X,this.Y);return null!=e&&(isNaN(e.X)||(t.X-=e.X),isNaN(e.Y)||(t.Y-=e.Y)),t},this.Min=function(e){var t=new i(this.X,this.Y);return null==e?t:(!isNaN(e.X)&&this.X>e.X&&(t.X=e.X),!isNaN(e.Y)&&this.Y>e.Y&&(t.Y=e.Y),t)},this.Max=function(e){var t=new i(this.X,this.Y);return null==e?t:(!isNaN(e.X)&&this.X<e.X&&(t.X=e.X),!isNaN(e.Y)&&this.Y<e.Y&&(t.Y=e.Y),t)},this.Bound=function(e,t){var n=this.Max(e);return n.Min(t)},this.Check=function(){var e=new i(this.X,this.Y);return isNaN(e.X)&&(e.X=0),isNaN(e.Y)&&(e.Y=0),e},this.Apply=function(e){"string"==typeof e&&(e=document.getElementById(e)),null!=e&&(isNaN(this.X)||(e.style.left=this.X+"px"),isNaN(this.Y)||(e.style.top=this.Y+"px"))}}function o(e){return e=e?e:window.event,isNaN(window.scrollX)?new i(e.clientX+document.documentElement.scrollLeft+document.body.scrollLeft,e.clientY+document.documentElement.scrollTop+document.body.scrollTop):new i(e.clientX+window.scrollX,e.clientY+window.scrollY)}function r(e,t,r,a,s,c,l,h){function u(t){return y||!x||k?void 0:(y=!0,null!=s&&s(t,e),g=o(t),v=new i(parseInt(e.style.left),parseInt(e.style.top)),v=v.Check(),document.addEventListener("mousemove",d,!1),document.addEventListener("mouseup",f,!1),n(t))}function d(t){if(y&&!k){var i=o(t);return i=i.Add(v).Subtract(g),i=i.Bound(r,a),i.Apply(e),null!=c&&c(i,e),p(i),n(t)}}function p(e){var t=Kt("#cbh_phone");t.removeClass("cbh-icon-sideways-right"),t.removeClass("cbh-icon-sideways-left"),100*e.X/Ct<10?t.addClass("cbh-icon-sideways-left"):100*e.X/Ct>80&&t.addClass("cbh-icon-sideways-right")}function f(e){return m(e),n(e)}function m(t){var n=o(t),i=Math.abs(g.X-n.X),r=Math.abs(g.Y-n.Y);y&&!k&&(document.removeEventListener("mousemove",d,!1),document.removeEventListener("mouseup",f,!1),g=null,v=null,null!=l&&l(e),y=!1,30>i&&30>r&&(w("send","event","Callbackhunter_PHONEICON","clicked"),_("Callbackhunter_PHONEICON"),Yt=!0,Vt=1,rn.callNow()))}if("string"==typeof e&&(e=document.getElementById(e)),null!=e){if(null!=r&&null!=a){var b=r.Min(a);a=r.Max(a),r=b}var g=null,v=null,y=!1,x=!1,k=!1;this.checkSide=function(e){return p(e)},this.ChangeBounds=function(e,t){null!=e&&null!=t&&(r=e.Min(t),a=e.Max(t))},this.Dispose=function(){k||(this.StopListening(!0),e=null,t=null,r=null,a=null,s=null,c=null,l=null,k=!0)},this.StartListening=function(){x||k||(x=!0,t.addEventListener("mousedown",u,!1))},this.StopListening=function(e){x&&!k&&(t.removeEventListener("mousedown",u,!1),x=!1,e&&y&&m())},this.IsDragging=function(){return y},this.IsListening=function(){return x},this.IsDisposed=function(){return k},"string"==typeof t&&(t=document.getElementById(t)),null==t&&(t=e),h||this.StartListening()}}function a(e){on.isArray(e.elemId)||(e.elemId=[e.elemId]),this.elemId=e.elemId,this.elems=[];var t;for(var n in this.elemId)this.elemId.hasOwnProperty(n)&&("string"==typeof e.elemId[n]?t=document.getElementById(e.elemId[n]):e.elemId[n]instanceof Element&&(t=e.elemId[n]),t&&(this.elems[e.elemId[n]]=t));this.time=e.time,this.template=e.template,this.msNumbers=e.msNumbers||2,this.delta=e.delta||33,this.reset()}function s(e,t,n,i,o,r){if(!(isNaN(r)||1>r)){r|=0;var a,s=document.getElementById(e),l=s.getContext("2d");try{try{a=l.getImageData(t,n,i,o)}catch(h){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),a=l.getImageData(t,n,i,o)}catch(h){throw alert("Cannot access local image"),new Error("unable to access local image data: "+h)}}}catch(h){throw alert("Cannot access image"),new Error("unable to access image data: "+h)}var u,d,p,f,m,b,g,v,y,_,w,x,k,C,S,T,E,N,M,I,A=a.data,O=r+r+1,B=i-1,D=o-1,R=r+1,L=R*(R+1)/2,P=new c,j=P;for(p=1;O>p;p++)if(j=j.next=new c,p==R)var H=j;j.next=P;var U=null,z=null;g=b=0;var W=pe[r],q=fe[r];for(d=0;o>d;d++){for(C=S=T=v=y=_=0,w=R*(E=A[b]),x=R*(N=A[b+1]),k=R*(M=A[b+2]),v+=L*E,y+=L*N,_+=L*M,j=P,p=0;R>p;p++)j.r=E,j.g=N,j.b=M,j=j.next;for(p=1;R>p;p++)f=b+((p>B?B:p)<<2),v+=(j.r=E=A[f])*(I=R-p),y+=(j.g=N=A[f+1])*I,_+=(j.b=M=A[f+2])*I,C+=E,S+=N,T+=M,j=j.next;for(U=P,z=H,u=0;i>u;u++)A[b]=v*W>>q,A[b+1]=y*W>>q,A[b+2]=_*W>>q,v-=w,y-=x,_-=k,w-=U.r,x-=U.g,k-=U.b,f=g+((f=u+r+1)<B?f:B)<<2,C+=U.r=A[f],S+=U.g=A[f+1],T+=U.b=A[f+2],v+=C,y+=S,_+=T,U=U.next,w+=E=z.r,x+=N=z.g,k+=M=z.b,C-=E,S-=N,T-=M,z=z.next,b+=4;g+=i}for(u=0;i>u;u++){for(S=T=C=y=_=v=0,b=u<<2,w=R*(E=A[b]),x=R*(N=A[b+1]),k=R*(M=A[b+2]),v+=L*E,y+=L*N,_+=L*M,j=P,p=0;R>p;p++)j.r=E,j.g=N,j.b=M,j=j.next;for(m=i,p=1;r>=p;p++)b=m+u<<2,v+=(j.r=E=A[b])*(I=R-p),y+=(j.g=N=A[b+1])*I,_+=(j.b=M=A[b+2])*I,C+=E,S+=N,T+=M,j=j.next,D>p&&(m+=i);for(b=u,U=P,z=H,d=0;o>d;d++)f=b<<2,A[f]=v*W>>q,A[f+1]=y*W>>q,A[f+2]=_*W>>q,v-=w,y-=x,_-=k,w-=U.r,x-=U.g,k-=U.b,f=u+((f=d+R)<D?f:D)*i<<2,v+=C+=U.r=A[f],y+=S+=U.g=A[f+1],_+=T+=U.b=A[f+2],U=U.next,w+=E=z.r,x+=N=z.g,k+=M=z.b,C-=E,S-=N,T-=M,z=z.next,b+=i}l.putImageData(a,t,n)}}function c(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}function l(){var e=function(e){return new t(e)},t=function(e){var t;"string"==typeof e&&e.length>0?t="<"===e.substr(0,1)?n.create(e):n.find(document,e):"object"==typeof e&&null!==e&&(t=e),this.elements=[];var i=Object.prototype.toString.call(t);return t&&(this.elements="[object HTMLCollection]"===i||"[object NodeList]"===i?Array.prototype.slice.call(t):"[object Array]"===i?t:"[SweetyElement]"===t.toString()?t.elements:[t]),this},n=e.fn={create:function(e){var t=document.createElement("div");return t.innerHTML=e,t.children},find:function(e,t){var n;switch(t.substr(0,1)){case".":n=e.getElementsByClassName(t.substr(1));break;case"#":n=e.getElementById(t.substr(1));break;case"@":n=e.getElementsByName(t.substr(1));break;default:n=e.getElementsByTagName(t)}return n},each:function(e,t){for(var n=0,i=e.length;i>n;n++)t(e[n],n,e)},objEach:function(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])},contains:function(e,t){return-1!==e.indexOf(t)},getClasses:function(e){return""===e.className?[]:e.className.split(/\s+/)},saveClasses:function(e,t){e.className=t.join(" ")},getStyles:function(e){var t=e.style.cssText.split(/;\s*/),n={};return this.each(t,function(e){var t=e.split(/:\s*/);2===t.length&&(n[t[0]]=t[1])}),n},saveStyles:function(e,t){var n=[];this.objEach(t,function(e,t){n.push(e+":"+t)}),e.style.cssText=n.join(";")}};return t.prototype={toArray:function(){return this.elements},findChild:function(t){return this.elements[0]?e(n.find(this.elements[0],t)):e()},findParent:function(t){if(!this.elements[0])return e();var i=this.elements[0];if(!t)return this.parent();if("."===t.substr(0,1))for(;(i=i.parentElement)&&!n.contains(n.getClasses(i),t.substr(1)););else for(;(i=i.parentElement)&&i.tagName.toUpperCase()!=t.toUpperCase(););return e(i)},parent:function(){return this.elements[0]?e(this.elements[0].parentElement):e()},forEach:function(e){return n.each(this.elements,e),this},getProp:function(e){return this.elements[0]?this.elements[0][e]:void 0},setProp:function(e,t){var i={};return"object"==typeof e?i=e:i[e]=t,this.forEach(function(e){n.objEach(i,function(t,n){e[t]=n})}),this},prop:function(e,t){return void 0!=t||"object"==typeof e?this.setProp(e,t):this.getProp(e)},getAttr:function(e){return this.elements[0]?this.elements[0].getAttribute(e):null},setAttr:function(e,t){var i={};return"[object Object]"===e.toString()?i=e:i[e]=t,this.forEach(function(e){n.objEach(i,function(t,n){e.setAttribute(t,n)})}),this},removeAttr:function(e){var t=[];return"object"==typeof e?t=e:t.push(e),this.forEach(function(e){n.each(t,function(t){e.removeAttribute(t)})}),this},hasAttr:function(e){return this.elements[0]?this.elements[0].hasAttribute(e):!1},attr:function(e,t){return void 0!=t||"object"==typeof e?(this.setAttr(e,t),this):this.getAttr(e)},val:function(e){if(this.elements[0]&&"SELECT"==this.elements[0].tagName&&this.elements[0].multiple){if(void 0!=e)return"string"==typeof e&&(e=e.split(" ")),this.findChild("option").forEach(function(t){t.selected=n.contains(e,t.value)?!0:!1}),this;var t=[];return this.findChild("option").forEach(function(e){e.selected&&t.push(e.value)}),t.length>0?t:null}if(this.elements[0]&&"INPUT"==this.elements[0].tagName&&"radio"==this.elements[0].type){if(void 0!=e)return this.forEach(function(t){t.checked=t.value==e?!0:!1}),this;var t=null;return this.forEach(function(e){e.checked&&(t=e.value)}),t}if(this.elements[0]&&"INPUT"==this.elements[0].tagName&&"checkbox"==this.elements[0].type){if(void 0!=e)return"string"==typeof e&&(e=e.split(" ")),this.forEach(function(t){t.checked=n.contains(e,t.value)?!0:!1}),this;var t=[];return this.forEach(function(e){e.checked&&t.push(e.value)}),t.length>0?t:null}return void 0!=this.prop("value")?this.prop("value",e):this.attr("value",e)},addClass:function(e){return"string"==typeof e&&(e=e.split(/\s+/)),this.forEach(function(t){var i=n.getClasses(t);n.each(e,function(e){-1===i.indexOf(e)&&i.push(e)}),n.saveClasses(t,i)}),this},removeClass:function(e){return"string"==typeof e&&(e=e.split(/\s+/)),this.forEach(function(t){var i=n.getClasses(t);n.each(e,function(e){var t=i.indexOf(e);-1!==t&&i.splice(t,1)}),n.saveClasses(t,i)}),this},hasClass:function(e){return this.elements[0]?n.contains(n.getClasses(this.elements[0]),e):!1},toggleClass:function(e){return this.hasClass(e)?this.removeClass(e):this.addClass(e),this},addStyle:function(e,t){return this.forEach(function(i){var o=n.getStyles(i);void 0!=t?o[e]=t:"object"==typeof e&&n.objEach(e,function(e,t){o[e]=t}),n.saveStyles(i,o)}),this},removeStyle:function(e){return"string"==typeof e&&(e=[e]),this.forEach(function(t){var i=n.getStyles(t);n.each(e,function(e){delete i[e]}),n.saveStyles(t,i)}),this},css:function(e,t){return this.addStyle(e,t)},html:function(e){return void 0!=e?(this.forEach(function(t){t.innerHTML=e}),this):this.elements[0]?this.elements[0].innerHTML:void 0},empty:function(){return this.html(""),this},append:function(e){return this.elements[0]&&e?("[SweetyElement]"===e.toString()?n.each(e.elements,function(e){this.elements[0].appendChild(e)}.bind(this)):this.elements[0].appendChild(e),this):this},remove:function(){this.forEach(function(e){e.parentNode.removeChild(e)}),this.elements=[]},on:function(e,t){return"string"==typeof e&&(e=e.split(" ")),n.each(e,function(e){this.forEach(function(n){n.addEventListener(e,t,!1)})}.bind(this)),this},off:function(e,t){return"string"==typeof e&&(e=e.split(" ")),n.each(e,function(e){this.forEach(function(n){n.removeEventListener(e,t,!1)})}.bind(this)),this},exists:function(){return 0===this.elements.length?!1:!0},toString:function(){return"[SweetyElement]"}},n.each(arguments,function(e){"object"==typeof e&&n.objEach(e,function(e,n){"function"==typeof n&&(t.prototype[e]=n)})}),e}function h(e){if(this._canPlay=!1,e.hollow||"undefined"==typeof Audio)return this;var t=new Audio;return t.canPlayType("audio/mp3")?(this._canPlay=!0,this._path=e.path,this._muted=!1,void(this._sounds={})):this}function u(e){if(void 0!==e&&"auto"!=e){var t={};for(var n in It)It.hasOwnProperty(n)&&(t[It[n].longName]=n);t[e]&&(ke=t[e])}if(!ke){var i=window.navigator.userLanguage||window.navigator.language;i=i.toLowerCase().split("-")[0],ke=It[i]?i:"en"}Ce=It[ke].items}function d(){clearInterval(ue),on.loadFonts(),_e.get("hunter_sid")||_e.set("hunter_sid",on.rand(16));var e=N();Qe=e.referer,Ze=e.entrance_page,p(),Pt=new h({path:"//"+He+"/widget2/sound/"}),Pt.add("open","sound_open.mp3")}function p(){if(Ne&&tn.browserTest()){var e=tn.getIntVal("db_params_update_time");if(e&&(new Date).getTime()-e<=1e3*Me){var t=tn.getJSON("db_params");null!==t&&(Ge=t,Q())}}null===Ge&&f(Q)}function f(n){var i=document.getElementsByTagName("head")[0],o=document.createElement("script");o.type="text/javascript",o.src=("https:"===t.location.protocol?"https:":"http:")+"//"+Ue+"/_hunter/?"+on.makeQueryString({hcode:hunter_code,sid:_e.get("hunter_sid"),url:e.location.href,param:1,referer:Qe}),o.async=!1,on.isFunction(n)&&(o.onreadystatechange=function(){"complete"===this.readyState&&n()},o.onload=n),i.appendChild(o)}function m(){var e=Kt("#cbh_widget_wrapper"),n=jt;if("undefined"!=typeof Ge.rating&&parseFloat(Ge.rating)>.9&&(n=parseFloat(Ge.rating)),0===e.elements.length){var i=Jt.main({rating:(Math.floor(10*n)/10).toFixed(1),client_phone:rn.client_phone?rn.client_phone:"",countdown:Je,countdown_text:Je+" "+on.declOfNum(Je,["секунда","секунды","секунд"])});Kt(t.body).append(Kt(i)),e=Kt("#cbh_widget_wrapper")}on.freeMode()&&e.addClass("cbh-free-usage"),Kt(".cbh-widget").addClass(ke),on.setWrapperH(),Zt.addEvents()}function b(){f(function(){d(),"worktime"===mt?mt="night":"night"===mt&&(mt="worktime"),ut?R():v()})}function g(e){v(),rn[e]()}function v(){j(),"worktime"===mt?(we=new a({elemId:"cbh_timer",time:1e3*Je,template:'<div class="cbh-numbs">%minutes%</div><div class="cbh-d">:</div><div class="cbh-numbs">%seconds%</div><div class="cbh-d">:</div><div class="cbh-numbs">%ms%</div>'}),on.freeMode()&&Kt("#cbh_info").html("Мы отправим sms с вашим номером менеджеру и начальнику отдела продаж. Конфиденциально. Без спама."),on.hideDialogItems(),on.freeMode()&&sn.render("— Оставьте номер, и мы вам перезвоним"),on.showDialogItem("#cbh_item_call"),rn.client_phone&&sn.connect(),en.effect()):y()}function y(){rn.callLaterAction();var e,t="— Сейчас сотрудники";e=on.freeMode()?"не в офисе. Но в выбранное <br/>время я отправлю им sms-ку<br/> и они вам перезвонят.":"не в офисе. Но в выбранное <br/>время я сам 100% инициирую <br/>звонок между вами.",Kt("#cbh_item_call_deferred_head").html(t).removeClass("cbh-typed").addClass("cbh-typing"),Kt("#cbh_item_call_deferred_text").html(e).removeClass("cbh-typed").addClass("cbh-typing")}function _(t){if(!De){if(!gt)for(var n in e)if(e.hasOwnProperty(n)&&n.match(/yaCounter\d+/)&&e[n].reachGoal){gt=n;break}if(gt)try{e[gt].reachGoal(t)}catch(i){}}}function w(t,n,i,o){Be||(on.isFunction(e.ga_cbh)&&bt(t,n,i,o),on.isFunction(e.ga)&&ga(t,n,i,o))}function x(){if(!Be){if("undefined"!=typeof Ge.ga_disable&&1==Ge.ga_disable)return!1;bt=null,function(e,t,n,i,o,r,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,r=t.createElement(n),a=t.getElementsByTagName(n)[0],r.async=1,r.src=i,a.parentNode.insertBefore(r,a)}(e,t,"script","//www.google-analytics.com/analytics.js","ga_cbh"),bt=bt||e.ga_cbh,bt("create","UA-50011917-2","callbackhunter.com"),bt("send","pageview")}}function k(){Kt(".cbh").hasClass("cbh-show")||Kt("#cbh_phone").show()}function C(){Kt("#cbh_phone").hide().addClass("cbh-off")}function S(){var e,t,n,i,o,r=Kt("#cbh_phone"),a=0,s=0;Kt(window).on("scroll",function(){if(clearTimeout(n),clearTimeout(i),!o){var c=window.getComputedStyle(r.elements[0],null);e=parseInt(c.getPropertyValue("left"),10),t=parseInt(c.getPropertyValue("top"),10),o=!0}s+=on.getScrollTop()-a;var l=t-s;a=on.getScrollTop(),r.css({left:e+"px",top:l+"px"}),n=setTimeout(function(){r.css({left:e+"px",top:t+"px"}),s=0},200),i=setTimeout(function(){o=!1},1e3)})}function T(){Kt("#cbh_phone").addClass(["cbh-pulse","cbh-fast"])}function E(){Kt("#cbh_phone").removeClass(["cbh-pulse","cbh-fast","cbh-slow"])}function N(){var e={referer:"",entrance_page:""},t=/^(http(s)?:\/\/)?(www\.)?/,n=window.location.host.replace(t,""),i=document.referrer?document.referrer:"",o=0!==i.replace(t,"").indexOf(n);return tn.browserTest()?(o&&tn.saveStrVal("ref",i,!0),(!i||o)&&tn.saveStrVal("entrance_page",window.location.href,!0),e.referer=tn.getStrVal("ref",!0)||i||"",e.entrance_page=tn.getStrVal("entrance_page",!0)||window.location.href||"",e):(e.referer=i,e.entrance_page=window.location.href,e)}function M(e){if("string"==typeof e&&(e=Kt(e)),e.exists()){var t=e.val();if(""===t)if("undefined"!=typeof At[ke]&&""!==At[ke])e.val(At[ke]);else{var n=!1;for(var i in At)""!=At[i]&&(n=At[i]);e.val(n===!1?""!==ht?ht:"+":"+"+n)}t=e.val(),"ru"===ke&&"+8"===t&&e.val("+7"),"ru"!==ke||"495"!==t&&"+495"!==t||e.val("+7495"),"ru"!==ke||"499"!==t&&"+499"!==t||e.val("+7499"),"+"!==t.charAt(0)&&e.val("+"+t.replace("+","")),e.val(e.val().replace(/[^\d\+.]/g,""))}}function I(){var e=Kt("#cbh_phone");if(e.removeClass("cbh-off").show(e),ut)on.addCSSRules({".cbh-mobile-widget":"color: #"+Ht+"!important;",".cbh-mobile-widget .cbh-bg-icon":"background-color: #"+Ht+"!important;"});else{on.addCSSRules({".cbh-widget .cbh-bg-icon":"background: #"+Ht+"!important;",".cbh-widget.cbh-icon-sideways-right .cbh-bg-icon:after":"border-color: transparent transparent transparent #"+Ht+"!important;",".cbh-widget.cbh-icon-sideways-left .cbh-bg-icon:after":"border-color: transparent transparent transparent #"+Ht+"!important;",".cbh-widget":"color: #"+Ht+"!important;"});var t=.5*Ct-815+14.3*Tt;t>Ct-200&&(t=Ct-200),0>t&&(t=0);var n=Et*(St-260)/100+30;_t.checkSide({X:t,Y:n}),e.css({opacity:zt,left:t+"px",top:n+"px"})}0!==yt||ut||k(),Kt(".cbh-widget-content").on("mouseover",function(){E(),me.stop()}).on("mouseleave",function(){me.reset()}),me.init()}function A(){var e=Kt("#cbh_phone");if(e.exists()){var t=Ct,n=St,o=on.viewportSize(),r=o.width,a=o.height,s=window.getComputedStyle(e.elements[0],null),c=parseInt(s.getPropertyValue("left"),10),l=parseInt(s.getPropertyValue("top"),10),h=c,u=l;l>n/2&&(u=a-(n-l)),c>t/2&&(h=r-(t-c)),Ct=r,St=a,e.css({left:h+"px",top:u+"px"}),_t.ChangeBounds(new i(0,0),new i(Ct-200,St-150))}}function O(){var e=Kt("#cbh_mobile_widget_wrapper");if(0===e.elements.length){var n=Jt.mobile({client_phone:rn.client_phone?rn.client_phone:"",countdown:Je,countdown_text:Je+" "+on.declOfNum(Je,["секунда","секунды","секунд"])});Kt(t.body).append(Kt(n)),e=Kt("#cbh_mobile_widget_wrapper")}on.freeMode()&&e.addClass("cbh-free-usage"),I(),re()}function B(){_e.set("hunter_showed","1",{expires:1}),_e.set("hunter_session","1",{expires:30})}function D(){Dt||(Dt=!0,Kt("#cbh_mobile_widget").show(),ae(),Kt(".cbh-banner-bg").show(),tt=!0,w("send","event","Callbackhunter_OPEN_MOBILE","clicked"),_("Callbackhunter_OPEN_MOBILE"),_e.get("hunter_showed")||B(),U())}function R(){rn.client_phone&&sn.connect(),D(),on.hideDialogItems(),"worktime"===mt?(we=new a({elemId:"cbh_timer",time:1e3*Je,template:'<div class="cbh-numbs">%minutes%</div><div class="cbh-d">:</div><div class="cbh-numbs">%seconds%</div><div class="cbh-d">:</div><div class="cbh-numbs">%ms%</div>'}),Kt("#cbh_mobile_item_call").show()):L(),en.effect()}function L(){rn.callLaterMobileAction();var e;e=on.freeMode()?"— Нас нет в офисе. Но мы перезвоним вам { %delay% }. Выберите удобное время:":"— Мы не в офисе. Но 100% перезвоним вам { %delay% }. Выберите удобное время.",e=e.replace(/{ %delay% }/,"<span id='nightModeCountdownMobile'></span>"),Kt("#cbh_mobile_deferred_text").html(e),xe.addContainer("nightModeCountdownMobile")}function P(e){Te&&console.log("showWidgetEnter"),ct&&(tt||Xe||nt>0||(clearTimeout(qe),("undefined"!=typeof e&&e||!_e.get("hunter_showed"))&&(Dt||!on.isNull(Ye)&&Ve>st-Ye||(Ye=st,Vt=2,j(),rn.enterWelcome(),Qt.activate("intro")))))}function j(){var e=Kt("#cbh_container");e.exists()&&!e.hasClass("cbh-show")&&(Pt.play("open"),tt=!0,Dt=!0,e.show().addClass("cbh-on"),Kt(".cbh-banner-bg").css("display","block"),Kt("#cbh_phone").hide(),_e.get("hunter_showed")||B(),w("send","event","Callbackhunter_OPEN","clicked"),_("Callbackhunter_OPEN"),U())}function H(e){Te&&console.log("showWidgetExit"),clearTimeout(qe),Dt||!on.isNull(Ye)&&Ve>st-Ye||(Ye=st,Vt=3,ut?D():j(),e?rn.intro():rn.exitWeTreasure())}function U(){on.sendData({open:1})}function z(){on.sendData({close:1})}function W(){if(window.location.hash){var e=window.location.hash.substring(1);"callbackhunter"==e&&(rn.callNow(),window.location.hash="#callbackhunter-ok"),"callbackhunter-dialog"==e&&(H(!0),window.location.hash="#callbackhunter-dialog-ok")}}function q(){if(lt&&!Xe&&!(tt||nt>0)){var e=document.body,t=document.documentElement,n=Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight),i=on.viewportSize(),o=on.getScrollTop(),r=i.height+o;!Bt&&Ot&&Se>r&&(Bt=!0,H()),Se=r,!Ot&&.05*n>n-r&&(Ot=!0)}}function F(e){e=e||{};var t,n=e.phone,i=e.office_id;return"undefined"==typeof n&&(n=Kt("#cbh_phone_input").val()),on.phoneNumberOk(n)?(pt=on.rand(16),t=ce(),e.deferred?on.sendData({phone:n,client_name:rn.name||"",wp_code:"undefined"!=typeof Ge.wp_code?Ge.wp_code:"",lang:ke,night_hour:e.deferredHours,night_minute:e.deferredMinutes||0,office_id:i,call_rand_id:pt,phone_manager_tracked:t,widget_show_reason:Vt}):(sn.connect(),on.sendData({phone:n,client_name:rn.name||"",wp_code:"undefined"!=typeof Ge.wp_code?Ge.wp_code:"",lang:ke,office_id:i,reverse:et?1:0,call_rand_id:pt,phone_manager_tracked:t,widget_show_reason:Vt})),sn.autoRefreshStatus=!0,w("send","event","Callbackhunter_CALL","clicked"),_("Callbackhunter_CALL"),!0):!1}function Y(e){e=e||{};var t=Kt("#cbh_phone_input_deferred"),n=t.val();if(!on.freeMode()&&Le&&!e.office&&on.phoneNumberOk(n)&&Ge.show_office_list&&Ge.show_office_list.length>1)return void rn.showOfficeChoice(!0);var i,o,r,a,s="undefined"==typeof e?!1:e.office,c=new Date,l=0,h=0,u=+Kt(".cbh-deferred__day-val").attr("data-day");u>0&&(i=new Date(u).getDay(),o=Kt(".cbh-deferred__hour-val").html(),o&&(o=parseInt(o.split(";")[0],10)),r=new Date(u),r.setHours(o),r.setMinutes(0),a=r-c,l=Math.floor(a/36e5),h=Math.floor((a-60*l*60*1e3)/6e4));var d;d=on.freeMode()&&0>u?{phone:n,deferred:!0}:{phone:n,office_id:s,deferred:!0,deferredHours:l,deferredMinutes:h},F(d)?rn.name?rn.doYouWantRecordsOnEmail():rn.letsCallLaterByName():t.focus().css("border-color","red!important")}function V(e,t){phone=e.cbh_mobile_night_mode_phone,hour=e.hour,minutes=e.minutes,F({phone:phone,office_id:0,deferred:!0,deferredHours:hour,deferredMinutes:minutes})?(on.hideDialogItems(),rn.whatWouldYouLikeToBeCalled({head:" — Звонок заказан.",text:"Кстати, хотите, при звонках к вам<br> будут обращаться по имени?"})):t.cbh_mobile_night_mode_phone().focus()}function X(e){if(!we.running){var t=Kt("#cbh_phone_input"),n=t.val(),i="undefined"==typeof e?!1:e.office;return!on.freeMode()&&Le&&!i&&on.phoneNumberOk(n)&&Ge.show_office_list&&Ge.show_office_list.length>1?void rn.showOfficeChoice():void(F({phone:n,office_id:i})?(rn.client_phone=n,on.freeMode()?rn.doYouWantRecordsOnEmail():we.start(rn.didCallSucceed),$(),""!==Nt&&((new Image).src=Nt),_e.set("hunter_client_phone",n)):t.focus().css("border-color","red!important"))}}function J(e){var t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("href",e),t.setAttribute("async",!0),document.getElementsByTagName("head")[0].appendChild(t)}function $(){if("undefined"!=typeof ft&&null!==ft&&"undefined"!=typeof ft.actions&&"object"==typeof ft.actions.aftercall){var e=ft.actions.aftercall;if(e.length)for(var n in e){var i=e[n][0],o=e[n][1];if("hide_by_id"===i){var r=t.getElementById(o);r&&(r.style.display="none")}}}}function K(){if(null!==Ge&&"undefined"!=typeof Ge.custom_layout&&Ge.custom_layout.length){var e=Ge.custom_layout;for(var n in e)if(1==e[n].status){ft=e[n];break}null!==ft&&"undefined"!=typeof ft.css_file&&ft.css_file.length&&J(("https:"==t.location.protocol?"https:":"http:")+"//"+He+"/widget/custom/"+ft.css_file)}}function G(){if(null===Ge||"undefined"==typeof Ge||"undefined"==typeof Ge.user_ip||"undefined"==typeof Ge.ip_deny||!Ge.ip_deny.length)return!1;for(var e in Ge.ip_deny)if(Ge.ip_deny.hasOwnProperty(e)){var t=Ge.ip_deny[e]+"";if(t=t.replace(/ /g,"").replace(/\*/g,"\\d").replace(/\./g,"\\."),Ge.user_ip.match(t))return!0}return!1}function Q(){if(("undefined"!=typeof db_params||null!==Ge)&&(null===Ge&&(Ge=db_params),0!==Ge.length&&!G()&&on.checkUtmAccess()!==!1)){var n;if("undefined"!=typeof Ge.restrict_by_url&&1==Ge.restrict_by_url&&"undefined"!=typeof Ge.url_restrict&&Ge.url_restrict.length>0)for(var o=JSON.parse(Ge.url_restrict),c=0;c<o.length;c++){if(document.location.pathname.replace(/^\/|\/$/g,"")==o[c].replace(/^\/|\/$/g,""))return;try{if(n=new RegExp(o[c]),n.test(document.location.pathname))return}catch(l){}}if("undefined"!=typeof Ge.apply_by_url&&1==Ge.apply_by_url&&"undefined"!=typeof Ge.url_apply&&Ge.url_apply.length>0){for(var h=JSON.parse(Ge.url_apply),d=!1,c=0;c<h.length;c++){document.location.pathname.replace(/^\/|\/$/g,"")==h[c].replace(/^\/|\/$/g,"")&&(d=!0);try{n=new RegExp(h[c]),n.test(document.location.pathname)&&(d=!0)}catch(l){}}if(0==d)return}if(x(),K(),null!==Ge&&Ne&&tn.browserTest()&&(tn.setIntVal("db_params_update_time",(new Date).getTime()),tn.saveJSON("db_params",Ge)),ut=on.isMobile(),_e.get("hunter_showed")&&1==_e.get("hunter_showed")&&Ge.show_once&&"1"==Ge.show_once&&(tt=!0),_e.get("hunter_session")&&1==_e.get("hunter_session")&&Ge.show_once_session&&"1"==Ge.show_once_session&&(tt=!0),Ge.active&&1==Ge.active&&(mt="worktime"),"night"==mt&&Ge.disable_night_mode&&1==Ge.disable_night_mode)return void(tt=!0);"undefined"!=typeof Ge.sensitivity&&parseInt(Ge.sensitivity)>=1&&parseInt(Ge.sensitivity)<=10&&(be.accelerometer.factor=1+.06*(5-Ge.sensitivity)),"undefined"!=typeof Ge.is_spot&&1==parseInt(Ge.is_spot)&&("undefined"!=typeof It.ru&&(It.ru.clbh_banner_work_to='<a target="blank" id="clbh_banner_work_to_link" href="http://callbackspot.com">Работает на технологии CallbackSpot.com</a>'),"undefined"!=typeof It.en&&(It.en.clbh_banner_work_to='<a target="blank" id="clbh_banner_work_to_link" href="http://callbackspot.com">Powered by technology CallbackSpot.com</a>')),on.workTime.init(Ge.weekday,Ge.start_arr,Ge.stop_arr,Ge.time_zone),ve.addUserData(),u(Ge.language),"undefined"!=typeof Ge.client_phone&&(rn.client_phone=Ge.client_phone,dt.match(/^\+/)||(rn.client_phone="+"+Ge.client_phone)),"undefined"!=typeof Ge.client_name&&(rn.name=Ge.client_name),"undefined"!=typeof Ge.client_calls&&(Ge.client_calls<10?We=1.3:Ge.client_calls>=10&&Ge.client_calls<=20?We=1:Ge.client_calls>20&&(We=.7)),"undefined"!=typeof Ge.dialog_instead_of_chat&&(Pe=0!==parseInt(Ge.dialog_instead_of_chat)),"undefined"!=typeof Ge.sound_chat_message&&(je=1===parseInt(Ge.sound_chat_message));for(var p in It)It.hasOwnProperty(p)&&(It[p].items.cbh_tomorrow=Pe?It[p].items.cbh_dialog:It[p].items.cbh_chat);if("undefined"!=typeof Ge.free_mode&&(Lt=0==parseInt(Ge.free_mode)?!1:!0,window.location.hash)){var f=window.location.hash.substring(1);"callbackhunter-dark"===f&&(Lt=!0)}if("undefined"!=typeof Ge.has_payments&&(Rt=0==parseInt(Ge.has_payments)?!1:!0),"undefined"!=typeof Ge.time_connection&&(Je=parseInt(Ge.time_connection)),Ge.phone_icon&&"1"==Ge.phone_icon)if(Ge.phone_icon_opacity&&parseFloat(Ge.phone_icon_opacity)>0&&parseFloat(Ge.phone_icon_opacity)<1.01&&(zt=parseFloat(Ge.phone_icon_opacity)),Ge.phone_icon_color_code)Ht=Ge.phone_icon_color_code;else if(Ge.phone_icon_color)switch(Ge.phone_icon_color){case"green":Ht="00aff2";break;case"gray":Ht="cccccc"}if(Ge.background_color_code&&(Ut=Ge.background_color_code),on.freeMode()||on.addCSSRules(on.isMobile()?{".cbh-mobile-body.cbh-mobile-white":"background-color: #"+Ut+"!important;"}:{".cbh .cbh-background .cbh-faded":"background-color: #"+Ut+"!important; opacity: 0.7!important;",".cbh .cbh-background .cbh-faded.no-blur":"background-color: #"+Ut+"!important; opacity: 0.97!important;"}),Je>0&&"night"==mt){var g=new Date(+new Date+1e3*Je);g.setMinutes(0),g.setSeconds(0),$e=(+g-new Date)/1e3}else if("worktime"==mt){var v=on.workTime.getTimeStopToday(),g=new Date;g.setHours(v),g.setMinutes(0),g.setSeconds(0),$e=(+g-new Date)/1e3}$e&&(xe=new a({time:1e3*$e,delta:3e4,template:"%text%"}),xe.start(function(){b()})),ut?(void 0===Ge.disable_mobile_widget||"0"===Ge.disable_mobile_widget)&&(O(),Kt(e).on("hashchange",W),Kt("#cbh_phone").on("click",function(){Vt=1,R()}),Kt(".cbh-banner-bg").on("click",on.hideWidget),Kt("#cbh_mobile_close").on("click",on.hideWidget),Zt.addEvents(),Kt(e).on("scroll",q)):(m(),Ge.brand_image&&!Lt&&(Kt(".cbh-branding").addClass("cbh-brand-image").css({"background-image":"url(//"+He+"/uploads/brand/"+Ge.brand_image+")"}),Kt(".cbh-powered-by").addClass("cbh-branded"),Kt(".cbh-wrapper").addClass("cbh-branded")),enable_blur="undefined"!=typeof Ge.enable_blur?0!==parseInt(Ge.enable_blur):!1,on.blurEnabled()?setTimeout(function(){CbhHtml2Canvas(t.body,{onrendered:function(e){e.id="cbh_canvas",Kt(".cbh-blured").append(e),s("cbh_canvas",0,0,e.width,e.height,30)}})},500):(Kt(".cbh-faded").addClass("no-blur"),Kt(".cbh-background").addClass("no-blur")),Kt(".cbh-x").on("click",on.hideWidget),Kt(".cbh-banner-bg").on("click",on.hideWidget),Kt(".cbh-arrow").on("click",on.hideWidget),Kt(e).on("hashchange",W),qe=setTimeout(P,4e4*We),ve.start(),be.start()),Kt(".cbh-powered-by").html(on.freeMode()?Ce.free_cbh_powered_by:Ce.cbh_powered_by),"undefined"!=typeof Ge.min_popup_delay&&parseInt(Ge.min_popup_delay)>0&&(nt=parseInt(Ge.min_popup_delay)*We,clearInterval(it),it=setInterval(Z,1e3)),"undefined"!=typeof Ge.min_window_exit_delay&&parseInt(Ge.min_window_exit_delay)>0&&(ot=parseInt(Ge.min_window_exit_delay)),"undefined"!=typeof Ge.min_enter_on_active_delay&&parseInt(Ge.min_enter_on_active_delay)>0&&(rt=parseInt(Ge.min_enter_on_active_delay)),"undefined"!=typeof Ge.popup_after&&parseInt(Ge.popup_after)>0&&(popup_after=parseInt(Ge.popup_after)*We,setTimeout(function(){on.isVisible("#cbh_container")||P(!0)},1e3*popup_after)),clearInterval(at),at=setInterval(ee,1e3),"undefined"!=typeof Ge.f_label&&""!==Ge.f_label?Kt(".cbh-powered-by-link").attr("href","http://callbackhunter.com/"+Ge.f_label):"undefined"!=typeof Ge.affiliate_link&&""!==Ge.affiliate_link&&Kt(".cbh-powered-by-link").attr("href",Kt(".cbh-powered-by-link").attr("href")+"#a_aid="+Ge.affiliate_link),"undefined"!=typeof Ge.show_enter&&(ct=1==parseInt(Ge.show_enter)?!0:!1),"undefined"!=typeof Ge.show_exit&&(lt=1==parseInt(Ge.show_exit)?!0:!1),"undefined"!=typeof Ge.phone_code&&(ht=Ge.phone_code),"undefined"!=typeof Ge.after_action&&(Nt=Ge.after_action),"undefined"!=typeof Ge.has_minutes&&(Mt=0===parseInt(Ge.has_minutes)?!1:!0),Re="undefined"!=typeof Ge.enable_discount?0===parseInt(Ge.enable_discount)?!1:!0:!1,"undefined"!=typeof Ge.show_office_choice&&(Le=0===parseInt(Ge.show_office_choice)?!1:!0),!ut&&Ge.phone_icon&&"1"==Ge.phone_icon&&("undefined"!=typeof Ge.phoneicon_x&&(Tt=Ge.phoneicon_x),"undefined"!=typeof Ge.phoneicon_y&&(Et=Ge.phoneicon_y),"undefined"!=typeof Ge.phone_icon_always&&1==Ge.phone_icon_always&&(yt=0),_t=new r("cbh_phone",null,new i(0,0),new i(on.viewportSize().width-200,on.viewportSize().height-150),null,null,null,!1),I(),Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0||S(),Kt(e).on("resize",A),ge.start()),!ut&&Ge.show_hello&&"1"==Ge.show_hello&&setTimeout(function(){rn.sayHello(),j()},7e3);for(var y in Ge)Ge.hasOwnProperty(y)&&y.match(/show_phone_/)&&(At[y.split("show_phone_")[1]]=Ge[y]);W(),on.sendData({tmp_visit:1})}}function Z(){nt--,0>=nt&&clearInterval(it)}function ee(){if(st++,Ge.avg&&Ge.avg&&!(nt>0||5>st)&&st>=parseInt(Ge.avg)-2){if(clearInterval(at),!lt)return;if(!Ke)return;if(Xe)return;if(tt)return;H(!0)}}function te(e){(new Image).src="//mom.callbackhunter.com/make_call.php?phone_child="+e.myPhone+"&phone_parent="+e.parentsPhone}function ne(e){var t={};t.elem=e.element,t.currentViewportWidth=window.innerWidth,t.currentViewportHeight=window.innerHeight,e.pos&&(t.pos=e.pos),t.currentViewportWidth<t.currentViewportHeight?(t.startElemWidth=t.elem.clientWidth||e.elemWidthPortrait,t.startElemHeight=t.elem.clientHeight||e.elemHeightPortrait,t.totalViewportWidth=e.viewportWidthPortrait,e.posPortrait&&(t.pos=e.posPortrait)):(t.startElemWidth=t.elem.clientWidth||e.elemWidthLandscape,t.startElemHeight=t.elem.clientHeight||e.elemHeightLandscape,t.totalViewportWidth=e.viewportWidthLandscape,e.posLandscape&&(t.pos=e.posLandscape)),t.scale=t.currentViewportWidth/t.totalViewportWidth,t.resultElemWidth=t.scale*t.startElemWidth,t.resultElemHeight=t.scale*t.startElemHeight,t.positionCorrectionX=(t.resultElemWidth-t.startElemWidth)/2,
t.positionCorrectionY=(t.resultElemHeight-t.startElemHeight)/2-5,t.elem.style.cssText+="-moz-transform: scale("+t.scale+","+t.scale+");",t.elem.style.cssText+="-ms-transform: scale("+t.scale+","+t.scale+");",t.elem.style.cssText+="-webkit-transform: scale("+t.scale+","+t.scale+");",t.elem.style.cssText+="-o-transform: scale("+t.scale+","+t.scale+");",t.elem.style.cssText+="transform: scale("+t.scale+","+t.scale+");",void 0!=t.pos.right&&(t.elem.style.cssText+="right:"+(t.pos.right*t.scale+t.positionCorrectionX)+"px !important;"),void 0!=t.pos.bottom&&(t.elem.style.cssText+="bottom:"+(t.pos.bottom*t.scale+t.positionCorrectionY)+"px !important;"),void 0!=t.pos.left&&(t.elem.style.cssText+="left:"+(t.pos.left*t.scale+t.positionCorrectionX)+"px !important;"),void 0!=t.pos.top&&(t.elem.style.cssText+="top:"+(t.pos.top*t.scale+t.positionCorrectionY)+"px !important;")}function ie(){ne({element:document.getElementById("cbh_mobile_widget"),elemWidthPortrait:2450,elemHeightPortrait:328,viewportWidthPortrait:450,elemWidthLandscape:2450,elemHeightLandscape:328,viewportWidthLandscape:1080,posPortrait:{bottom:-3,right:-1e3},posLandscape:{bottom:-3,right:-685}})}function oe(){ne({element:document.getElementById("cbh_mobile_phone_wrapper"),viewportWidthPortrait:480,viewportWidthLandscape:840,pos:{bottom:30}})}function re(){oe(),Kt(document).on("scroll",oe),Kt(window).on("resize",oe),Kt(document).on("drag",oe)}function ae(){ie(),Kt(document).on("scroll",ie),Kt(window).on("resize",ie),Kt(document).on("drag",ie),function(){function e(){var e=window.innerWidth;t!=e&&(t=e,ie())}var t=0;$t=setInterval(e,100)}()}function se(){Kt(document).off("scroll",ie),Kt(window).off("resize",ie),Kt(document).off("drag",ie),clearInterval($t),document.getElementById("cbh_mobile_widget").style.cssText=""}function ce(){var e="",n="",i="",o=null;if(null===Ge)return"";if("undefined"!=typeof Ge.phone_track_enable&&1==Ge.phone_track_enable)for(var r=["calltouch_phone","calltouch_phone_1","calltouch_phone_2"],a=0;a<r.length;a++)if("string"==typeof window[r[a]])return"+"+window[r[a]].replace(/[^0-9]/g,"");if("string"!=typeof Ge.phone_track_whereis)return"";if("string"==typeof Ge.phone_track_prefix&&(i=Ge.phone_track_prefix),e=Ge.phone_track_whereis,n=e.slice(0,1),"."!==n&&"#"!==n)return"";if("#"===n)o=t.getElementById(e.substring(1));else if("."===n){var s=t.getElementsByClassName(e.substring(1));s&&"undefined"!=typeof s[0]&&(o=s[0])}return o?"+"+(i+(o.innerText||o.textContent)).replace(/[^0-9]/g,""):""}var le,he,ue=setInterval(function(){"complete"==document.readyState&&d()},11),de=function(){var e="[a-z\\d.-]+://",t="(?:(?:[0-9]|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.){3}(?:[0-9]|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])",n="(?:(?:[^\\s!@#$%^&*()_=+[\\]{}\\\\|;:'\",.<>/?]+)\\.)+",i="(?:ac|ad|aero|ae|af|ag|ai|al|am|an|ao|aq|arpa|ar|asia|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|biz|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|cat|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|coop|com|co|cr|cu|cv|cx|cy|cz|de|dj|dk|dm|do|dz|ec|edu|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gov|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|info|int|in|io|iq|ir|is|it|je|jm|jobs|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mil|mk|ml|mm|mn|mobi|mo|mp|mq|mr|ms|mt|museum|mu|mv|mw|mx|my|mz|name|na|nc|net|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|org|pa|pe|pf|pg|ph|pk|pl|pm|pn|pro|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sy|sz|tc|td|tel|tf|tg|th|tj|tk|tl|tm|tn|to|tp|travel|tr|tt|tv|tw|tz|ua|ug|uk|um|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|xn--0zwm56d|xn--11b5bs3a9aj6g|xn--80akhbyknj4f|xn--9t4b11yi5a|xn--deba0ad|xn--g6w251d|xn--hgbk6aj7f53bba|xn--hlcj6aya9esc7a|xn--jxalpdlp|xn--kgbechtv|xn--zckzah|ye|yt|yu|za|zm|zw)",o="(?:"+n+i+"|"+t+")",r="(?:[;/][^#?<>\\s]*)?",a="(?:\\?[^#<>\\s]*)?(?:#[^<>\\s]*)?",s="\\b"+e+"[^<>\\s]+",c="\\b"+o+r+a+"(?!\\w)",l="mailto:",h="(?:"+l+")?[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@"+o+a+"(?!\\w)",u=new RegExp("(?:"+s+"|"+c+"|"+h+")","ig"),d=new RegExp("^"+e,"i"),p={"'":"`",">":"<",")":"(","]":"[","}":"{","»":"«","›":"‹"},f={callback:function(e,t){return t?'<a href="'+t+'" title="'+t+'">'+e+"</a>":e},punct_regexp:/(?:[!?.,:;'"]|(?:&|&amp;)(?:lt|gt|quot|apos|raquo|laquo|rsaquo|lsaquo);)$/};return function(e,t){t=t||{};var n,i,o,r,a,s,c,h,m,b,g,v,y="",_=[];for(i in f)void 0===t[i]&&(t[i]=f[i]);for(;n=u.exec(e);)if(o=n[0],s=u.lastIndex,c=s-o.length,!/[\/:]/.test(e.charAt(c-1))){do h=o,v=o.substr(-1),g=p[v],g&&(m=o.match(new RegExp("\\"+g+"(?!$)","g")),b=o.match(new RegExp("\\"+v,"g")),(m?m.length:0)<(b?b.length:0)&&(o=o.substr(0,o.length-1),s--)),t.punct_regexp&&(o=o.replace(t.punct_regexp,function(e){return s-=e.length,""}));while(o.length&&o!==h);r=o,d.test(r)||(r=(-1!==r.indexOf("@")?r.indexOf(l)?l:"":r.indexOf("irc.")?r.indexOf("ftp.")?"http://":"ftp://":"irc://")+r),a!=c&&(_.push([e.slice(a,c)]),a=s),_.push([o,r])}for(_.push([e.substr(a)]),i=0;i<_.length;i++)y+=t.callback.apply(window,_[i]);return y||e}}();!function(e,t,n){"use strict";function i(e,t,n){var i,o=e.runtimeStyle&&e.runtimeStyle[t],r=e.style;return!/^-?[0-9]+\.?[0-9]*(?:px)?$/i.test(n)&&/^-?\d/.test(n)&&(i=r.left,o&&(e.runtimeStyle.left=e.currentStyle.left),r.left="fontSize"===t?"1em":n||0,n=r.pixelLeft+"px",r.left=i,o&&(e.runtimeStyle.left=o)),/^(thin|medium|thick)$/i.test(n)?n:Math.round(parseFloat(n))+"px"}function o(e){return parseInt(e,10)}function r(e,t,o,r){if(e=(e||"").split(","),e=e[r||0]||e[0]||"auto",e=u.Util.trimText(e).split(" "),"backgroundSize"!==o||e[0]&&!e[0].match(/cover|contain|auto/)){if(e[0]=-1===e[0].indexOf("%")?i(t,o+"X",e[0]):e[0],e[1]===n){if("backgroundSize"===o)return e[1]="auto",e;e[1]=e[0]}e[1]=-1===e[1].indexOf("%")?i(t,o+"Y",e[1]):e[1]}return e}function a(e,t,n,i,o,r){var a,s,c,l,h=u.Util.getCSS(t,e,o);if(1===h.length&&(l=h[0],h=[],h[0]=l,h[1]=l),-1!==h[0].toString().indexOf("%"))c=parseFloat(h[0])/100,s=n.width*c,"backgroundSize"!==e&&(s-=(r||i).width*c);else if("backgroundSize"===e)if("auto"===h[0])s=i.width;else if(/contain|cover/.test(h[0])){var d=u.Util.resizeBounds(i.width,i.height,n.width,n.height,h[0]);s=d.width,a=d.height}else s=parseInt(h[0],10);else s=parseInt(h[0],10);return"auto"===h[1]?a=s/i.width*i.height:-1!==h[1].toString().indexOf("%")?(c=parseFloat(h[1])/100,a=n.height*c,"backgroundSize"!==e&&(a-=(r||i).height*c)):a=parseInt(h[1],10),[s,a]}function s(e,t){var n=[];return{storage:n,width:e,height:t,clip:function(){n.push({type:"function",name:"clip",arguments:arguments})},translate:function(){n.push({type:"function",name:"translate",arguments:arguments})},fill:function(){n.push({type:"function",name:"fill",arguments:arguments})},save:function(){n.push({type:"function",name:"save",arguments:arguments})},restore:function(){n.push({type:"function",name:"restore",arguments:arguments})},fillRect:function(){n.push({type:"function",name:"fillRect",arguments:arguments})},createPattern:function(){n.push({type:"function",name:"createPattern",arguments:arguments})},drawShape:function(){var e=[];return n.push({type:"function",name:"drawShape",arguments:e}),{moveTo:function(){e.push({name:"moveTo",arguments:arguments})},lineTo:function(){e.push({name:"lineTo",arguments:arguments})},arcTo:function(){e.push({name:"arcTo",arguments:arguments})},bezierCurveTo:function(){e.push({name:"bezierCurveTo",arguments:arguments})},quadraticCurveTo:function(){e.push({name:"quadraticCurveTo",arguments:arguments})}}},drawImage:function(){n.push({type:"function",name:"drawImage",arguments:arguments})},fillText:function(){n.push({type:"function",name:"fillText",arguments:arguments})},setVariable:function(e,t){return n.push({type:"variable",name:e,arguments:t}),t}}}function c(e){return{zindex:e,children:[]}}var l,h,u={};u.Util={},u.Util.log=function(t){u.logging&&e.console&&e.console.log&&e.console.log(t)},u.Util.trimText=function(e){return function(t){return e?e.apply(t):((t||"")+"").replace(/^\s+|\s+$/g,"")}}(String.prototype.trim),u.Util.asFloat=function(e){return parseFloat(e)},function(){var e=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,t=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g;u.Util.parseTextShadows=function(n){if(!n||"none"===n)return[];for(var i=n.match(e),o=[],r=0;i&&r<i.length;r++){var a=i[r].match(t);o.push({color:a[0],offsetX:a[1]?a[1].replace("px",""):0,offsetY:a[2]?a[2].replace("px",""):0,blur:a[3]?a[3].replace("px",""):0})}return o}}(),u.Util.parseBackgroundImage=function(e){var t,n,i,o,r,a,s,c,l=" \r\n	",h=[],u=0,d=0,p=function(){t&&('"'===n.substr(0,1)&&(n=n.substr(1,n.length-2)),n&&c.push(n),"-"===t.substr(0,1)&&(o=t.indexOf("-",1)+1)>0&&(i=t.substr(0,o),t=t.substr(o)),h.push({prefix:i,method:t.toLowerCase(),value:r,args:c})),c=[],t=i=n=r=""};p();for(var f=0,m=e.length;m>f;f++)if(a=e[f],!(0===u&&l.indexOf(a)>-1)){switch(a){case'"':s?s===a&&(s=null):s=a;break;case"(":if(s)break;if(0===u){u=1,r+=a;continue}d++;break;case")":if(s)break;if(1===u){if(0===d){u=0,r+=a,p();continue}d--}break;case",":if(s)break;if(0===u){p();continue}if(1===u&&0===d&&!t.match(/^url$/i)){c.push(n),n="",r+=a;continue}}r+=a,0===u?t+=a:n+=a}return p(),h},u.Util.Bounds=function(e){var t,n={};return e.getBoundingClientRect&&(t=e.getBoundingClientRect(),n.top=t.top,n.bottom=t.bottom||t.top+t.height,n.left=t.left,n.width=e.offsetWidth,n.height=e.offsetHeight),n},u.Util.OffsetBounds=function(e){var t=e.offsetParent?u.Util.OffsetBounds(e.offsetParent):{top:0,left:0};return{top:e.offsetTop+t.top,bottom:e.offsetTop+e.offsetHeight+t.top,left:e.offsetLeft+t.left,width:e.offsetWidth,height:e.offsetHeight}},u.Util.getCSS=function(e,n,i){l!==e&&(h=t.defaultView.getComputedStyle(e,null));var a=h[n];if(/^background(Size|Position)$/.test(n))return r(a,e,n,i);if(/border(Top|Bottom)(Left|Right)Radius/.test(n)){var s=a.split(" ");return s.length<=1&&(s[1]=s[0]),s.map(o)}return a},u.Util.resizeBounds=function(e,t,n,i,o){var r,a,s=n/i,c=e/t;return o&&"auto"!==o?c>s^"contain"===o?(a=i,r=i*c):(r=n,a=n/c):(r=n,a=i),{width:r,height:a}},u.Util.BackgroundPosition=function(e,t,n,i,o){var r=a("backgroundPosition",e,t,n,i,o);return{left:r[0],top:r[1]}},u.Util.BackgroundSize=function(e,t,n,i){var o=a("backgroundSize",e,t,n,i);return{width:o[0],height:o[1]}},u.Util.Extend=function(e,t){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},u.Util.Children=function(e){var t;try{t=e.nodeName&&"IFRAME"===e.nodeName.toUpperCase()?e.contentDocument||e.contentWindow.document:function(e){var t=[];return null!==e&&!function(e,t){var i=e.length,o=0;if("number"==typeof t.length)for(var r=t.length;r>o;o++)e[i++]=t[o];else for(;t[o]!==n;)e[i++]=t[o++];return e.length=i,e}(t,e),t}(e.childNodes)}catch(i){u.Util.log("html2canvas.Util.Children failed with exception: "+i.message),t=[]}return t},u.Util.isTransparent=function(e){return"transparent"===e||"rgba(0, 0, 0, 0)"===e},u.Util.Font=function(){var e={};return function(t,i,o){if(e[t+"-"+i]!==n)return e[t+"-"+i];var r,a,s,c=o.createElement("div"),l=o.createElement("img"),h=o.createElement("span"),u="Hidden Text";return c.style.visibility="hidden",c.style.fontFamily=t,c.style.fontSize=i,c.style.margin=0,c.style.padding=0,o.body.appendChild(c),l.src="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACwAAAAAAQABAAACAkQBADs=",l.width=1,l.height=1,l.style.margin=0,l.style.padding=0,l.style.verticalAlign="baseline",h.style.fontFamily=t,h.style.fontSize=i,h.style.margin=0,h.style.padding=0,h.appendChild(o.createTextNode(u)),c.appendChild(h),c.appendChild(l),r=l.offsetTop-h.offsetTop+1,c.removeChild(h),c.appendChild(o.createTextNode(u)),c.style.lineHeight="normal",l.style.verticalAlign="super",a=l.offsetTop-c.offsetTop+1,s={baseline:r,lineWidth:1,middle:a},e[t+"-"+i]=s,o.body.removeChild(c),s}}(),function(){function e(e){return function(t){try{e.addColorStop(t.stop,t.color)}catch(i){n.log(["failed to add color stop: ",i,"; tried to add: ",t])}}}var n=u.Util,i={};u.Generate=i;var o=[/^(-webkit-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-gradient)\((linear|radial),\s((?:\d{1,3}%?)\s(?:\d{1,3}%?),\s(?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)\-]+)\)$/,/^(-moz-linear-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-moz-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s?([a-z\-]*)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/];i.parseGradient=function(e,t){var n,i,r,a,s,c,l,h,u,d,p,f,m=o.length;for(i=0;m>i&&!(r=e.match(o[i]));i+=1);if(r)switch(r[1]){case"-webkit-linear-gradient":case"-o-linear-gradient":if(n={type:"linear",x0:null,y0:null,x1:null,y1:null,colorStops:[]},s=r[2].match(/\w+/g))for(c=s.length,i=0;c>i;i+=1)switch(s[i]){case"top":n.y0=0,n.y1=t.height;break;case"right":n.x0=t.width,n.x1=0;break;case"bottom":n.y0=t.height,n.y1=0;break;case"left":n.x0=0,n.x1=t.width}if(null===n.x0&&null===n.x1&&(n.x0=n.x1=t.width/2),null===n.y0&&null===n.y1&&(n.y0=n.y1=t.height/2),s=r[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(c=s.length,l=1/Math.max(c-1,1),i=0;c>i;i+=1)h=s[i].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),h[2]?(a=parseFloat(h[2]),a/="%"===h[3]?100:t.width):a=i*l,n.colorStops.push({color:h[1],stop:a});break;case"-webkit-gradient":if(n={type:"radial"===r[2]?"circle":r[2],x0:0,y0:0,x1:0,y1:0,colorStops:[]},s=r[3].match(/(\d{1,3})%?\s(\d{1,3})%?,\s(\d{1,3})%?\s(\d{1,3})%?/),s&&(n.x0=s[1]*t.width/100,n.y0=s[2]*t.height/100,n.x1=s[3]*t.width/100,n.y1=s[4]*t.height/100),s=r[4].match(/((?:from|to|color-stop)\((?:[0-9\.]+,\s)?(?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)\))+/g))for(c=s.length,i=0;c>i;i+=1)h=s[i].match(/(from|to|color-stop)\(([0-9\.]+)?(?:,\s)?((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\)/),a=parseFloat(h[2]),"from"===h[1]&&(a=0),"to"===h[1]&&(a=1),n.colorStops.push({color:h[3],stop:a});break;case"-moz-linear-gradient":if(n={type:"linear",x0:0,y0:0,x1:0,y1:0,colorStops:[]},s=r[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),s&&(n.x0=s[1]*t.width/100,n.y0=s[2]*t.height/100,n.x1=t.width-n.x0,n.y1=t.height-n.y0),s=r[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}%)?)+/g))for(c=s.length,l=1/Math.max(c-1,1),i=0;c>i;i+=1)h=s[i].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%)?/),h[2]?(a=parseFloat(h[2]),h[3]&&(a/=100)):a=i*l,n.colorStops.push({color:h[1],stop:a});break;case"-webkit-radial-gradient":case"-moz-radial-gradient":case"-o-radial-gradient":if(n={type:"circle",x0:0,y0:0,x1:t.width,y1:t.height,cx:0,cy:0,rx:0,ry:0,colorStops:[]},s=r[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),s&&(n.cx=s[1]*t.width/100,n.cy=s[2]*t.height/100),s=r[3].match(/\w+/),h=r[4].match(/[a-z\-]*/),s&&h)switch(h[0]){case"farthest-corner":case"cover":case"":u=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.cy,2)),d=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.y1-n.cy,2)),p=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.y1-n.cy,2)),f=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.cy,2)),n.rx=n.ry=Math.max(u,d,p,f);break;case"closest-corner":u=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.cy,2)),d=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.y1-n.cy,2)),p=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.y1-n.cy,2)),f=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.cy,2)),n.rx=n.ry=Math.min(u,d,p,f);break;case"farthest-side":"circle"===s[0]?n.rx=n.ry=Math.max(n.cx,n.cy,n.x1-n.cx,n.y1-n.cy):(n.type=s[0],n.rx=Math.max(n.cx,n.x1-n.cx),n.ry=Math.max(n.cy,n.y1-n.cy));break;case"closest-side":case"contain":"circle"===s[0]?n.rx=n.ry=Math.min(n.cx,n.cy,n.x1-n.cx,n.y1-n.cy):(n.type=s[0],n.rx=Math.min(n.cx,n.x1-n.cx),n.ry=Math.min(n.cy,n.y1-n.cy))}if(s=r[5].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(c=s.length,l=1/Math.max(c-1,1),i=0;c>i;i+=1)h=s[i].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),h[2]?(a=parseFloat(h[2]),a/="%"===h[3]?100:t.width):a=i*l,n.colorStops.push({color:h[1],stop:a})}return n},i.Gradient=function(n,i){if(0!==i.width&&0!==i.height){var o,r,a=t.createElement("canvas"),s=a.getContext("2d");if(a.width=i.width,a.height=i.height,o=u.Generate.parseGradient(n,i))switch(o.type){case"linear":r=s.createLinearGradient(o.x0,o.y0,o.x1,o.y1),o.colorStops.forEach(e(r)),s.fillStyle=r,s.fillRect(0,0,i.width,i.height);break;case"circle":r=s.createRadialGradient(o.cx,o.cy,0,o.cx,o.cy,o.rx),o.colorStops.forEach(e(r)),s.fillStyle=r,s.fillRect(0,0,i.width,i.height);break;case"ellipse":var c=t.createElement("canvas"),l=c.getContext("2d"),h=Math.max(o.rx,o.ry),d=2*h;c.width=c.height=d,r=l.createRadialGradient(o.rx,o.ry,0,o.rx,o.ry,h),o.colorStops.forEach(e(r)),l.fillStyle=r,l.fillRect(0,0,d,d),s.fillStyle=o.colorStops[o.colorStops.length-1].color,s.fillRect(0,0,a.width,a.height),s.drawImage(c,o.cx-o.rx,o.cy-o.ry,2*o.rx,2*o.ry)}return a}},i.ListAlpha=function(e){var t,n="";do t=e%26,n=String.fromCharCode(t+64)+n,e/=26;while(26*e>26);return n},i.ListRoman=function(e){var t,n=["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"],i=[1e3,900,500,400,100,90,50,40,10,9,5,4,1],o="",r=n.length;if(0>=e||e>=4e3)return e;for(t=0;r>t;t+=1)for(;e>=i[t];)e-=i[t],o+=n[t];return o}}(),u.Parse=function(i,o){function r(){return Math.max(Math.max(he.body.scrollWidth,he.documentElement.scrollWidth),Math.max(he.body.offsetWidth,he.documentElement.offsetWidth),Math.max(he.body.clientWidth,he.documentElement.clientWidth))}function a(){return Math.max(Math.max(he.body.scrollHeight,he.documentElement.scrollHeight),Math.max(he.body.offsetHeight,he.documentElement.offsetHeight),Math.max(he.body.clientHeight,he.documentElement.clientHeight))}function l(e,t){var n=parseInt(me(e,t),10);return isNaN(n)?0:n}function h(e,t,n,i,o,r){"transparent"!==r&&(e.setVariable("fillStyle",r),e.fillRect(t,n,i,o),le+=1)}function d(e,t,n){return e.length>0?t+n.toUpperCase():void 0}function p(e,t){switch(t){case"lowercase":return e.toLowerCase();case"capitalize":return e.replace(/(^|\s|:|-|\(|\))([a-z])/g,d);case"uppercase":return e.toUpperCase();default:return e}}function f(e){return/^(normal|none|0px)$/.test(e)}function m(e,t,n,i){null!==e&&ue.trimText(e).length>0&&(i.fillText(e,t,n),le+=1)}function b(e,t,n,i){var o=!1,r=me(t,"fontWeight"),a=me(t,"fontFamily"),s=me(t,"fontSize"),c=ue.parseTextShadows(me(t,"textShadow"));switch(parseInt(r,10)){case 401:r="bold";break;case 400:r="normal"}return e.setVariable("fillStyle",i),e.setVariable("font",[me(t,"fontStyle"),me(t,"fontVariant"),r,s,a].join(" ")),e.setVariable("textAlign",o?"right":"left"),c.length&&(e.setVariable("shadowColor",c[0].color),e.setVariable("shadowOffsetX",c[0].offsetX),e.setVariable("shadowOffsetY",c[0].offsetY),e.setVariable("shadowBlur",c[0].blur)),"none"!==n?ue.Font(a,s,he):void 0}function g(e,t,n,i,o){switch(t){case"underline":h(e,n.left,Math.round(n.top+i.baseline+i.lineWidth),n.width,1,o);break;case"overline":h(e,n.left,Math.round(n.top),n.width,1,o);break;case"line-through":h(e,n.left,Math.ceil(n.top+i.middle+i.lineWidth),n.width,1,o)}}function v(e,t,n,i,o){var r;if(de.rangeBounds&&!o)("none"!==n||0!==ue.trimText(t).length)&&(r=y(t,e.node,e.textOffset)),e.textOffset+=t.length;else if(e.node&&"string"==typeof e.node.nodeValue){var a=i?e.node.splitText(t.length):null;r=_(e.node,o),e.node=a}return r}function y(e,t,n){var i=he.createRange();return i.setStart(t,n),i.setEnd(t,n+e.length),i.getBoundingClientRect()}function _(e,t){var n=e.parentNode,i=he.createElement("wrapper"),o=e.cloneNode(!0);i.appendChild(e.cloneNode(!0)),n.replaceChild(i,e);var r=t?ue.OffsetBounds(i):ue.Bounds(i);return n.replaceChild(o,i),r}function w(e,t,n){var i,r,a=n.ctx,s=me(e,"color"),c=me(e,"textDecoration"),l=me(e,"textAlign"),h={node:t,textOffset:0};ue.trimText(t.nodeValue).length>0&&(t.nodeValue=p(t.nodeValue,me(e,"textTransform")),l=l.replace(["-webkit-auto"],["auto"]),r=t.nodeValue.split(!o.letterRendering&&/^(left|right|justify|auto)$/.test(l)&&f(me(e,"letterSpacing"))?/(\b| )/:""),i=b(a,e,c,s),o.chinese&&r.forEach(function(e,t){/.*[\u4E00-\u9FA5].*$/.test(e)&&(e=e.split(""),e.unshift(t,1),r.splice.apply(r,e))}),r.forEach(function(e,t){var o=v(h,e,c,t<r.length-1,n.transform.matrix);o&&(m(e,o.left,o.bottom,a),g(a,c,o,i,s))}))}function x(e,t){var n,i,o=he.createElement("boundelement");return o.style.display="inline",n=e.style.listStyleType,e.style.listStyleType="none",o.appendChild(he.createTextNode(t)),e.insertBefore(o,e.firstChild),i=ue.Bounds(o),e.removeChild(o),e.style.listStyleType=n,i}function k(e){var t=-1,n=1,i=e.parentNode.childNodes;if(e.parentNode){for(;i[++t]!==e;)1===i[t].nodeType&&n++;return n}return-1}function C(e,t){var n,i=k(e);switch(t){case"decimal":n=i;break;case"decimal-leading-zero":n=1===i.toString().length?i="0"+i.toString():i.toString();break;case"upper-roman":n=u.Generate.ListRoman(i);break;case"lower-roman":n=u.Generate.ListRoman(i).toLowerCase();break;case"lower-alpha":n=u.Generate.ListAlpha(i).toLowerCase();break;case"upper-alpha":n=u.Generate.ListAlpha(i)}return n+". "}function S(e,t,n){var i,o,r,a=t.ctx,s=me(e,"listStyleType");if(/^(decimal|decimal-leading-zero|upper-alpha|upper-latin|upper-roman|lower-alpha|lower-greek|lower-latin|lower-roman)$/i.test(s)){if(o=C(e,s),r=x(e,o),b(a,e,"none",me(e,"color")),"inside"!==me(e,"listStylePosition"))return;a.setVariable("textAlign","left"),i=n.left,m(o,i,r.bottom,a)}}function T(e){var t=i[e];return t&&t.succeeded===!0?t.img:!1}function E(e,t){var n=Math.max(e.left,t.left),i=Math.max(e.top,t.top),o=Math.min(e.left+e.width,t.left+t.width),r=Math.min(e.top+e.height,t.top+t.height);return{left:n,top:i,width:o-n,height:r-i}}function N(e,t,n){var i,o="static"!==t.cssPosition,r=o?me(e,"zIndex"):"auto",a=me(e,"opacity"),s="none"!==me(e,"cssFloat");t.zIndex=i=c(r),i.isPositioned=o,i.isFloated=s,i.opacity=a,i.ownStacking="auto"!==r||1>a,n&&n.zIndex.children.push(t)}function M(e,t,n,i,o){var r=l(t,"paddingLeft"),a=l(t,"paddingTop"),s=l(t,"paddingRight"),c=l(t,"paddingBottom");z(e,n,0,0,n.width,n.height,i.left+r+o[3].width,i.top+a+o[0].width,i.width-(o[1].width+o[3].width+r+s),i.height-(o[0].width+o[2].width+a+c))}function I(e){return["Top","Right","Bottom","Left"].map(function(t){return{width:l(e,"border"+t+"Width"),color:me(e,"border"+t+"Color")}})}function A(e){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(t){return me(e,"border"+t+"Radius")})}function O(e,t,n,i){var o=function(e,t,n){return{x:e.x+(t.x-e.x)*n,y:e.y+(t.y-e.y)*n}};return{start:e,startControl:t,endControl:n,end:i,subdivide:function(r){var a=o(e,t,r),s=o(t,n,r),c=o(n,i,r),l=o(a,s,r),h=o(s,c,r),u=o(l,h,r);return[O(e,a,l,u),O(u,h,c,i)]},curveTo:function(e){e.push(["bezierCurve",t.x,t.y,n.x,n.y,i.x,i.y])},curveToReversed:function(i){i.push(["bezierCurve",n.x,n.y,t.x,t.y,e.x,e.y])}}}function B(e,t,n,i,o,r,a){t[0]>0||t[1]>0?(e.push(["line",i[0].start.x,i[0].start.y]),i[0].curveTo(e),i[1].curveTo(e)):e.push(["line",r,a]),(n[0]>0||n[1]>0)&&e.push(["line",o[0].start.x,o[0].start.y])}function D(e,t,n,i,o,r,a){var s=[];return t[0]>0||t[1]>0?(s.push(["line",i[1].start.x,i[1].start.y]),i[1].curveTo(s)):s.push(["line",e.c1[0],e.c1[1]]),n[0]>0||n[1]>0?(s.push(["line",r[0].start.x,r[0].start.y]),r[0].curveTo(s),s.push(["line",a[0].end.x,a[0].end.y]),a[0].curveToReversed(s)):(s.push(["line",e.c2[0],e.c2[1]]),s.push(["line",e.c3[0],e.c3[1]])),t[0]>0||t[1]>0?(s.push(["line",o[1].end.x,o[1].end.y]),o[1].curveToReversed(s)):s.push(["line",e.c4[0],e.c4[1]]),s}function R(e,t,n){var i=e.left,o=e.top,r=e.width,a=e.height,s=t[0][0],c=t[0][1],l=t[1][0],h=t[1][1],u=t[2][0],d=t[2][1],p=t[3][0],f=t[3][1],m=r-l,b=a-d,g=r-u,v=a-f;return{topLeftOuter:ve(i,o,s,c).topLeft.subdivide(.5),topLeftInner:ve(i+n[3].width,o+n[0].width,Math.max(0,s-n[3].width),Math.max(0,c-n[0].width)).topLeft.subdivide(.5),topRightOuter:ve(i+m,o,l,h).topRight.subdivide(.5),topRightInner:ve(i+Math.min(m,r+n[3].width),o+n[0].width,m>r+n[3].width?0:l-n[3].width,h-n[0].width).topRight.subdivide(.5),bottomRightOuter:ve(i+g,o+b,u,d).bottomRight.subdivide(.5),bottomRightInner:ve(i+Math.min(g,r+n[3].width),o+Math.min(b,a+n[0].width),Math.max(0,u-n[1].width),Math.max(0,d-n[2].width)).bottomRight.subdivide(.5),bottomLeftOuter:ve(i,o+v,p,f).bottomLeft.subdivide(.5),bottomLeftInner:ve(i+n[3].width,o+v,Math.max(0,p-n[3].width),Math.max(0,f-n[2].width)).bottomLeft.subdivide(.5)}}function L(e,t,n,i,o){var r=me(e,"backgroundClip"),a=[];switch(r){case"content-box":case"padding-box":B(a,i[0],i[1],t.topLeftInner,t.topRightInner,o.left+n[3].width,o.top+n[0].width),B(a,i[1],i[2],t.topRightInner,t.bottomRightInner,o.left+o.width-n[1].width,o.top+n[0].width),B(a,i[2],i[3],t.bottomRightInner,t.bottomLeftInner,o.left+o.width-n[1].width,o.top+o.height-n[2].width),B(a,i[3],i[0],t.bottomLeftInner,t.topLeftInner,o.left+n[3].width,o.top+o.height-n[2].width);break;default:B(a,i[0],i[1],t.topLeftOuter,t.topRightOuter,o.left,o.top),B(a,i[1],i[2],t.topRightOuter,t.bottomRightOuter,o.left+o.width,o.top),B(a,i[2],i[3],t.bottomRightOuter,t.bottomLeftOuter,o.left+o.width,o.top+o.height),B(a,i[3],i[0],t.bottomLeftOuter,t.topLeftOuter,o.left,o.top+o.height)}return a}function P(e,t,n){var i,o,r,a,s,c,l=t.left,h=t.top,u=t.width,d=t.height,p=A(e),f=R(t,p,n),m={clip:L(e,f,n,p,t),borders:[]};for(i=0;4>i;i++)if(n[i].width>0){switch(o=l,r=h,a=u,s=d-n[2].width,i){case 0:s=n[0].width,c=D({c1:[o,r],c2:[o+a,r],c3:[o+a-n[1].width,r+s],c4:[o+n[3].width,r+s]},p[0],p[1],f.topLeftOuter,f.topLeftInner,f.topRightOuter,f.topRightInner);break;case 1:o=l+u-n[1].width,a=n[1].width,c=D({c1:[o+a,r],c2:[o+a,r+s+n[2].width],c3:[o,r+s],c4:[o,r+n[0].width]},p[1],p[2],f.topRightOuter,f.topRightInner,f.bottomRightOuter,f.bottomRightInner);break;case 2:r=r+d-n[2].width,s=n[2].width,c=D({c1:[o+a,r+s],c2:[o,r+s],c3:[o+n[3].width,r],c4:[o+a-n[3].width,r]},p[2],p[3],f.bottomRightOuter,f.bottomRightInner,f.bottomLeftOuter,f.bottomLeftInner);break;case 3:a=n[3].width,c=D({c1:[o,r+s+n[2].width],c2:[o,r],c3:[o+a,r+n[0].width],c4:[o+a,r+s]},p[3],p[0],f.bottomLeftOuter,f.bottomLeftInner,f.topLeftOuter,f.topLeftInner)}m.borders.push({args:c,color:n[i].color})}return m}function j(e,t){var n=e.drawShape();return t.forEach(function(e,t){n[0===t?"moveTo":e[0]+"To"].apply(null,e.slice(1))}),n}function H(e,t,n){"transparent"!==n&&(e.setVariable("fillStyle",n),j(e,t),e.fill(),le+=1)}function U(e,t,n){var i,o,r=he.createElement("valuewrap"),a=["lineHeight","textAlign","fontFamily","color","fontSize","paddingLeft","paddingTop","width","height","border","borderLeftWidth","borderTopWidth"];a.forEach(function(t){try{r.style[t]=me(e,t)}catch(n){ue.log("html2canvas: Parse: Exception caught in renderFormValue: "+n.message)}}),r.style.borderColor="black",r.style.borderStyle="solid",r.style.display="block",r.style.position="absolute",(/^(submit|reset|button|text|password)$/.test(e.type)||"SELECT"===e.nodeName)&&(r.style.lineHeight=me(e,"height")),r.style.top=t.top+"px",r.style.left=t.left+"px",i="SELECT"===e.nodeName?(e.options[e.selectedIndex]||0).text:e.value,i||(i=e.placeholder),o=he.createTextNode(i),r.appendChild(o),fe.appendChild(r),w(e,o,n),fe.removeChild(r)}function z(e){e.drawImage.apply(e,Array.prototype.slice.call(arguments,1)),le+=1}function W(n,i){var o=e.getComputedStyle(n,i);if(o&&o.content&&"none"!==o.content&&"-moz-alt-content"!==o.content&&"none"!==o.display){var r=o.content+"",a=r.substr(0,1);a===r.substr(r.length-1)&&a.match(/'|"/)&&(r=r.substr(1,r.length-2));var s="url"===r.substr(0,3),c=t.createElement(s?"img":"span");return c.className=be+"-before "+be+"-after",Object.keys(o).filter(q).forEach(function(e){try{c.style[e]=o[e]}catch(t){ue.log(["Tried to assign readonly property ",e,"Error:",t])}}),s?c.src=ue.parseBackgroundImage(r)[0].args[0]:c.innerHTML=r,c}}function q(t){return isNaN(e.parseInt(t,10))}function F(e,t){var n=W(e,":before"),i=W(e,":after");(n||i)&&(n&&(e.className+=" "+be+"-before",e.parentNode.insertBefore(n,e),re(n,t,!0),e.parentNode.removeChild(n),e.className=e.className.replace(be+"-before","").trim()),i&&(e.className+=" "+be+"-after",e.appendChild(i),re(i,t,!0),e.removeChild(i),e.className=e.className.replace(be+"-after","").trim()))}function Y(e,t,n,i){var o=Math.round(i.left+n.left),r=Math.round(i.top+n.top);e.createPattern(t),e.translate(o,r),e.fill(),e.translate(-o,-r)}function V(e,t,n,i,o,r,a,s){var c=[];c.push(["line",Math.round(o),Math.round(r)]),c.push(["line",Math.round(o+a),Math.round(r)]),c.push(["line",Math.round(o+a),Math.round(s+r)]),c.push(["line",Math.round(o),Math.round(s+r)]),j(e,c),e.save(),e.clip(),Y(e,t,n,i),e.restore()}function X(e,t,n){h(e,t.left,t.top,t.width,t.height,n)}function J(e,t,n,i,o){var r=ue.BackgroundSize(e,t,i,o),a=ue.BackgroundPosition(e,t,i,o,r),s=me(e,"backgroundRepeat").split(",").map(ue.trimText);switch(i=K(i,r),s=s[o]||s[0]){case"repeat-x":V(n,i,a,t,t.left,t.top+a.top,99999,i.height);break;case"repeat-y":V(n,i,a,t,t.left+a.left,t.top,i.width,99999);break;case"no-repeat":V(n,i,a,t,t.left+a.left,t.top+a.top,i.width,i.height);break;default:Y(n,i,a,{top:t.top,left:t.left,width:i.width,height:i.height})}}function $(e,t,n){for(var i,o=me(e,"backgroundImage"),r=ue.parseBackgroundImage(o),a=r.length;a--;)if(o=r[a],o.args&&0!==o.args.length){var s="url"===o.method?o.args[0]:o.value;i=T(s),i?J(e,t,n,i,a):ue.log("html2canvas: Error loading background:",o)}}function K(e,t){if(e.width===t.width&&e.height===t.height)return e;var n,i=he.createElement("canvas");return i.width=t.width,i.height=t.height,n=i.getContext("2d"),z(n,e,0,0,e.width,e.height,0,0,t.width,t.height),i}function G(e,t,n){return e.setVariable("globalAlpha",me(t,"opacity")*(n?n.opacity:1))}function Q(e){return e.replace("px","")}function Z(e){var t=me(e,"transform")||me(e,"-webkit-transform")||me(e,"-moz-transform")||me(e,"-ms-transform")||me(e,"-o-transform"),n=me(e,"transform-origin")||me(e,"-webkit-transform-origin")||me(e,"-moz-transform-origin")||me(e,"-ms-transform-origin")||me(e,"-o-transform-origin")||"0px 0px";n=n.split(" ").map(Q).map(ue.asFloat);var i;if(t&&"none"!==t){var o=t.match(ye);if(o)switch(o[1]){case"matrix":i=o[2].split(",").map(ue.trimText).map(ue.asFloat)}}return{origin:n,matrix:i}}function ee(e,t,n,i){var c=s(t?n.width:r(),t?n.height:a()),l={ctx:c,opacity:G(c,e,t),cssPosition:me(e,"position"),borders:I(e),transform:i,clip:t&&t.clip?ue.Extend({},t.clip):null};return N(e,l,t),o.useOverflow===!0&&/(hidden|scroll|auto)/.test(me(e,"overflow"))===!0&&/(BODY)/i.test(e.nodeName)===!1&&(l.clip=l.clip?E(l.clip,n):n),l}function te(e,t,n){var i={left:t.left+e[3].width,top:t.top+e[0].width,width:t.width-(e[1].width+e[3].width),height:t.height-(e[0].width+e[2].width)};return n&&(i=E(i,n)),i}function ne(e,t){var n=t.matrix?ue.OffsetBounds(e):ue.Bounds(e);return t.origin[0]+=n.left,t.origin[1]+=n.top,n}function ie(e,t,n,i){var o,r=Z(e,t),a=ne(e,r),s=ee(e,t,a,r),c=s.borders,l=s.ctx,h=te(c,a,s.clip),u=P(e,a,c),d=pe.test(e.nodeName)?"#efefef":me(e,"backgroundColor");switch(j(l,u.clip),l.save(),l.clip(),h.height>0&&h.width>0&&!i?(X(l,a,d),$(e,h,l)):i&&(s.backgroundColor=d),l.restore(),u.borders.forEach(function(e){H(l,e.args,e.color)}),n||F(e,s),e.nodeName){case"IMG":(o=T(e.getAttribute("src")))?M(l,e,o,a,c):ue.log("html2canvas: Error loading <img>:"+e.getAttribute("src"));break;case"INPUT":/^(text|url|email|submit|button|reset)$/.test(e.type)&&(e.value||e.placeholder||"").length>0&&U(e,a,s);break;case"TEXTAREA":(e.value||e.placeholder||"").length>0&&U(e,a,s);break;case"SELECT":(e.options||e.placeholder||"").length>0&&U(e,a,s);break;case"LI":S(e,s,h);break;case"CANVAS":M(l,e,e,a,c)}return s}function oe(e){return"none"!==me(e,"display")&&"hidden"!==me(e,"visibility")&&!e.hasAttribute("data-html2canvas-ignore")}function re(e,t,n){oe(e)&&(t=ie(e,t,n,!1)||t,pe.test(e.nodeName)||ae(e,t,n))}function ae(e,t,n){ue.Children(e).forEach(function(i){
i.nodeType===i.ELEMENT_NODE?re(i,t,n):i.nodeType===i.TEXT_NODE&&w(e,i,t)})}function se(){var e=me(t.documentElement,"backgroundColor"),n=ue.isTransparent(e)&&ce===t.body,i=ie(ce,null,!1,n);return ae(ce,i),n&&(e=i.backgroundColor),fe.removeChild(ge),{backgroundColor:e,stack:i}}e.scroll(0,0);var ce=o.elements===n?t.body:o.elements[0],le=0,he=ce.ownerDocument,ue=u.Util,de=ue.Support(o,he),pe=new RegExp("("+o.ignoreElements+")"),fe=he.body,me=ue.getCSS,be="___html2canvas___pseudoelement",ge=he.createElement("style");ge.innerHTML="."+be+'-before:before { content: "" !important; display: none !important; }.'+be+'-after:after { content: "" !important; display: none !important; }',fe.appendChild(ge),i=i||{};var ve=function(e){return function(t,n,i,o){var r=i*e,a=o*e,s=t+i,c=n+o;return{topLeft:O({x:t,y:c},{x:t,y:c-a},{x:s-r,y:n},{x:s,y:n}),topRight:O({x:t,y:n},{x:t+r,y:n},{x:s,y:c-a},{x:s,y:c}),bottomRight:O({x:s,y:n},{x:s,y:n+a},{x:t+r,y:c},{x:t,y:c}),bottomLeft:O({x:s,y:c},{x:s-r,y:c},{x:t,y:n+a},{x:t,y:n})}}}(4*((Math.sqrt(2)-1)/3)),ye=/(matrix)\((.+)\)/;return se()},u.Preload=function(i){function o(e){T.href=e,T.href=T.href;var t=T.protocol+T.host;return t===m}function r(){_.log("html2canvas: start: images: "+y.numLoaded+" / "+y.numTotal+" (failed: "+y.numFailed+")"),!y.firstRun&&y.numLoaded>=y.numTotal&&(_.log("Finished loading images: # "+y.numTotal+" (failed: "+y.numFailed+")"),"function"==typeof i.complete&&i.complete(y))}function a(t,o,a){var s,c,l=i.proxy;T.href=t,t=T.href,s="html2canvas_"+w++,a.callbackname=s,l+=l.indexOf("?")>-1?"&":"?",l+="url="+encodeURIComponent(t)+"&callback="+s,c=k.createElement("script"),e[s]=function(t){"error:"===t.substring(0,6)?(a.succeeded=!1,y.numLoaded++,y.numFailed++,r()):(f(o,a),o.src=t),e[s]=n;try{delete e[s]}catch(i){}c.parentNode.removeChild(c),c=null,delete a.script,delete a.callbackname},c.setAttribute("type","text/javascript"),c.setAttribute("src",l),a.script=c,e.document.body.appendChild(c)}function s(t,n){var i=e.getComputedStyle(t,n),o=i.content;"url"===o.substr(0,3)&&b.loadImage(u.Util.parseBackgroundImage(o)[0].args[0]),d(i.backgroundImage,t)}function c(e){s(e,":before"),s(e,":after")}function l(e,t){var i=u.Generate.Gradient(e,t);i!==n&&(y[e]={img:i,succeeded:!0},y.numTotal++,y.numLoaded++,r())}function h(e){return e&&e.method&&e.args&&e.args.length>0}function d(e,t){var i;u.Util.parseBackgroundImage(e).filter(h).forEach(function(e){"url"===e.method?b.loadImage(e.args[0]):e.method.match(/\-?gradient$/)&&(i===n&&(i=u.Util.Bounds(t)),l(e.value,i))})}function p(e){var t=!1;try{_.Children(e).forEach(p)}catch(i){}try{t=e.nodeType}catch(o){t=!1,_.log("html2canvas: failed to access some element's nodeType - Exception: "+o.message)}if(1===t||t===n){c(e);try{d(_.getCSS(e,"backgroundImage"),e)}catch(i){_.log("html2canvas: failed to get background-image - Exception: "+i.message)}d(e)}}function f(t,o){t.onload=function(){o.timer!==n&&e.clearTimeout(o.timer),y.numLoaded++,o.succeeded=!0,t.onerror=t.onload=null,r()},t.onerror=function(){if("anonymous"===t.crossOrigin&&(e.clearTimeout(o.timer),i.proxy)){var n=t.src;return t=new Image,o.img=t,t.src=n,void a(t.src,t,o)}y.numLoaded++,y.numFailed++,o.succeeded=!1,t.onerror=t.onload=null,r()}}var m,b,g,v,y={numLoaded:0,numFailed:0,numTotal:0,cleanupDone:!1},_=u.Util,w=0,x=i.elements[0]||t.body,k=x.ownerDocument,C=x.getElementsByTagName("img"),S=C.length,T=k.createElement("a"),E=function(e){return e.crossOrigin!==n}(new Image);for(T.href=e.location.href,m=T.protocol+T.host,b={loadImage:function(e){var t,r;e&&y[e]===n&&(t=new Image,e.match(/data:image\/.*;base64,/i)?(t.src=e.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),r=y[e]={img:t},y.numTotal++,f(t,r)):o(e)||i.allowTaint===!0?(r=y[e]={img:t},y.numTotal++,f(t,r),t.src=e):E&&!i.allowTaint&&i.useCORS?(t.crossOrigin="anonymous",r=y[e]={img:t},y.numTotal++,f(t,r),t.src=e):i.proxy&&(r=y[e]={img:t},y.numTotal++,a(e,t,r)))},cleanupDOM:function(o){var a,s;if(!y.cleanupDone){_.log(o&&"string"==typeof o?"html2canvas: Cleanup because: "+o:"html2canvas: Cleanup after timeout: "+i.timeout+" ms.");for(s in y)if(y.hasOwnProperty(s)&&(a=y[s],"object"==typeof a&&a.callbackname&&a.succeeded===n)){e[a.callbackname]=n;try{delete e[a.callbackname]}catch(c){}a.script&&a.script.parentNode&&(a.script.setAttribute("src","about:blank"),a.script.parentNode.removeChild(a.script)),y.numLoaded++,y.numFailed++,_.log("html2canvas: Cleaned up failed img: '"+s+"' Steps: "+y.numLoaded+" / "+y.numTotal)}e.stop!==n?e.stop():t.execCommand!==n&&t.execCommand("Stop",!1),t.close!==n&&t.close(),y.cleanupDone=!0,o&&"string"==typeof o||r()}},renderingDone:function(){v&&e.clearTimeout(v)}},i.timeout>0&&(v=e.setTimeout(b.cleanupDOM,i.timeout)),_.log("html2canvas: Preload starts: finding background-images"),y.firstRun=!0,p(x),_.log("html2canvas: Preload: Finding images"),g=0;S>g;g+=1)b.loadImage(C[g].getAttribute("src"));return y.firstRun=!1,_.log("html2canvas: Preload: Done."),y.numTotal===y.numLoaded&&r(),b},u.Renderer=function(e,i){function o(e){function t(e){Object.keys(e).sort().forEach(function(n){var i=[],r=[],a=[],s=[];e[n].forEach(function(e){e.node.zIndex.isPositioned||e.node.zIndex.opacity<1?a.push(e):e.node.zIndex.isFloated?r.push(e):i.push(e)}),function c(e){e.forEach(function(e){s.push(e),e.children&&c(e.children)})}(i.concat(r,a)),s.forEach(function(e){e.context?t(e.context):o.push(e.node)})})}var i,o=[];return i=function(e){function t(e,i,o){var r="auto"===i.zIndex.zindex?0:Number(i.zIndex.zindex),a=e,s=i.zIndex.isPositioned,c=i.zIndex.isFloated,l={node:i},h=o;i.zIndex.ownStacking?(a=l.context={"!":[{node:i,children:[]}]},h=n):(s||c)&&(h=l.children=[]),0===r&&o?o.push(l):(e[r]||(e[r]=[]),e[r].push(l)),i.zIndex.children.forEach(function(e){t(a,e,h)})}var i={};return t(i,e),i}(e),t(i),o}function r(e){var t;if("string"==typeof i.renderer&&u.Renderer[e]!==n)t=u.Renderer[e](i);else{if("function"!=typeof e)throw new Error("Unknown renderer");t=e(i)}if("function"!=typeof t)throw new Error("Invalid renderer defined");return t}return r(i.renderer)(e,i,t,o(e.stack),u)},u.Util.Support=function(e,t){function i(){var e=new Image,i=t.createElement("canvas"),o=i.getContext===n?!1:i.getContext("2d");if(o===!1)return!1;i.width=i.height=10,e.src=["data:image/svg+xml,","<svg xmlns='http://www.w3.org/2000/svg' width='10' height='10'>","<foreignObject width='10' height='10'>","<div xmlns='http://www.w3.org/1999/xhtml' style='width:10;height:10;'>","sup","</div>","</foreignObject>","</svg>"].join("");try{o.drawImage(e,0,0),i.toDataURL()}catch(r){return!1}return u.Util.log("html2canvas: Parse: SVG powered rendering available"),!0}function o(){var e,n,i,o,r=!1;return t.createRange&&(e=t.createRange(),e.getBoundingClientRect&&(n=t.createElement("boundtest"),n.style.height="123px",n.style.display="block",t.body.appendChild(n),e.selectNode(n),i=e.getBoundingClientRect(),o=i.height,123===o&&(r=!0),t.body.removeChild(n))),r}return{rangeBounds:o(),svgRendering:e.svgRendering&&i()}},e.CbhHtml2Canvas=function(t,n){t=t.length?t:[t];var i,o,r={logging:!1,elements:t,background:"#fff",proxy:null,timeout:0,useCORS:!1,allowTaint:!1,svgRendering:!1,ignoreElements:"IFRAME|OBJECT|PARAM",useOverflow:!0,letterRendering:!1,chinese:!1,width:null,height:null,taintTest:!0,renderer:"Canvas"};return r=u.Util.Extend(n,r),u.logging=r.logging,r.complete=function(e){("function"!=typeof r.onpreloaded||r.onpreloaded(e)!==!1)&&(i=u.Parse(e,r),("function"!=typeof r.onparsed||r.onparsed(i)!==!1)&&(o=u.Renderer(i,r),"function"==typeof r.onrendered&&r.onrendered(o)))},e.setTimeout(function(){u.Preload(r)},0),{render:function(e,t){return u.Renderer(e,u.Util.Extend(t,r))},parse:function(e,t){return u.Parse(e,u.Util.Extend(t,r))},preload:function(e){return u.Preload(u.Util.Extend(e,r))},log:u.Util.log}},e.CbhHtml2Canvas.log=u.Util.log,e.CbhHtml2Canvas.Renderer={Canvas:n},u.Renderer.Canvas=function(e){function i(e,t){e.beginPath(),t.forEach(function(t){e[t.name].apply(e,t.arguments)}),e.closePath()}function o(e){if(-1===s.indexOf(e.arguments[0].src)){l.drawImage(e.arguments[0],0,0);try{l.getImageData(0,0,1,1)}catch(t){return c=a.createElement("canvas"),l=c.getContext("2d"),!1}s.push(e.arguments[0].src)}return!0}function r(t,n){switch(n.type){case"variable":t[n.name]=n.arguments;break;case"function":switch(n.name){case"createPattern":if(n.arguments[0].width>0&&n.arguments[0].height>0)try{t.fillStyle=t.createPattern(n.arguments[0],"repeat")}catch(r){h.log("html2canvas: Renderer: Error creating pattern",r.message)}break;case"drawShape":i(t,n.arguments);break;case"drawImage":n.arguments[8]>0&&n.arguments[7]>0&&(!e.taintTest||e.taintTest&&o(n))&&t.drawImage.apply(t,n.arguments);break;default:t[n.name].apply(t,n.arguments)}}}e=e||{};var a=t,s=[],c=t.createElement("canvas"),l=c.getContext("2d"),h=u.Util,d=e.canvas||a.createElement("canvas");return function(e,t,i,o,a){var s,c,l,u=d.getContext("2d"),p=e.stack;return d.width=d.style.width=t.width||p.ctx.width,d.height=d.style.height=t.height||p.ctx.height,l=u.fillStyle,u.fillStyle=h.isTransparent(p.backgroundColor)&&t.background!==n?t.background:e.backgroundColor,u.fillRect(0,0,d.width,d.height),u.fillStyle=l,o.forEach(function(e){u.textBaseline="bottom",u.save(),e.transform.matrix&&(u.translate(e.transform.origin[0],e.transform.origin[1]),u.transform.apply(u,e.transform.matrix),u.translate(-e.transform.origin[0],-e.transform.origin[1])),e.clip&&(u.beginPath(),u.rect(e.clip.left,e.clip.top,e.clip.width,e.clip.height),u.clip()),e.ctx.storage&&e.ctx.storage.forEach(function(e){r(u,e)}),u.restore()}),h.log("html2canvas: Renderer: Canvas renderer done - returning canvas obj"),1===t.elements.length&&"object"==typeof t.elements[0]&&"BODY"!==t.elements[0].nodeName?(c=a.Util.Bounds(t.elements[0]),s=i.createElement("canvas"),s.width=Math.ceil(c.width),s.height=Math.ceil(c.height),u=s.getContext("2d"),u.drawImage(d,c.left,c.top,c.width,c.height,0,0,c.width,c.height),d=null,s):d}}}(window,document),function(e){"use strict";for(var t,n,i={},o=function(){},r="memory".split(","),a="assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn".split(",");t=r.pop();)e[t]=e[t]||i;for(;n=a.pop();)e[n]=e[n]||o}(this.console=this.console||{}),function(){Array.prototype.indexOf&&-1==[].indexOf(1)||(Array.prototype.indexOf=function(e,t){var n;if(null==this)throw new TypeError('"this" is null or not defined');var i=Object(this),o=i.length>>>0;if(0===o)return-1;var r=+t||0;if(1/0===Math.abs(r)&&(r=0),r>=o)return-1;for(n=Math.max(r>=0?r:o-Math.abs(r),0);o>n;){if(n in i&&i[n]===e)return n;n++}return-1})}(),function(){function e(e){for(var t,n=[],i=new RegExp("(^| )"+e+"( |$)"),o=this.getElementsByTagName("*"),r=o.length,a=0;r>a;)t=o[a],i.test(t.className)&&n.push(t),a+=1;return n}window.MooTools&&"undefined"!=typeof Native&&Native.implement&&document.getElementsByClassName&&"[object Array]"==Object.prototype.toString.call(document.getElementsByClassName("test"))&&(document.getElementsByClassName=e,Element.prototype.getElementsByClassName=e)}(),a.prototype.addContainer=function(e){var t;"string"==typeof e?(t=e,e=Kt("#"+t)):t=e.getAttr("id"),e&&t&&(this.elems[t]=e.elements[0],this.reset())},a.prototype.divide=function(e){var t=1e3,n=60*t,i=60*n,o={};o.hours=Math.floor(e/i),o.minutes=Math.floor((e-o.hours*i)/n),o.seconds=Math.floor((e-(o.hours*i+o.minutes*n))/t),o.ms=e-(o.hours*i+o.minutes*n+o.seconds*t),o.ms=o.ms.toString().substr(0,this.msNumbers);var r=Math.floor(e/t);return o.text=ut?86400>=r?"завтра":172800>=r?"послезавтра":"через "+on.secondsToString(r,0):o.hours>23?on.secondsToString(r,0,1):on.secondsToString(r,1,2),o},a.prototype.set=function(e){e=this.divide(e);for(var t in this.elems)for(var n in e)e.hasOwnProperty(n)&&("text"!=n&&(e[n]=String("0"+e[n]).slice(-2)),null==this.elems[t].placeholders[n]&&(this.elems[t].placeholders[n]=document.getElementById(t+"_"+n)),this.elems[t].placeholders[n]&&(this.elems[t].placeholders[n].innerHTML=e[n]))},a.prototype.reset=function(){this.running=!1;for(var e in this.elems)this.elems[e].innerHTML=this.template.replace(/%(.+?)%/g,'<span id="'+e+'_$1"></span>'),this.elems[e].placeholders={};this.set(this.time-10)},a.prototype.start=function(e){if(!this.running){this.running=!0;var t=+new Date;this.countdownInterval=setInterval(function(){var n=+new Date,i=this.time-(n-t);i>0?this.set(i):(this.set(0),clearInterval(this.countdownInterval),this.running=!1,e())}.bind(this),this.delta)}},a.prototype.stop=function(){clearInterval(this.countdownInterval)},!function(e){if("object"==typeof exports&&"undefined"!=typeof he)he.exports=e();else if("function"==typeof le&&le.amd)le([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.io=e()}}(function(){var e;return function t(e,n,i){function o(a,s){if(!n[a]){if(!e[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+a+"'")}var l=n[a]={exports:{}};e[a][0].call(l.exports,function(t){var n=e[a][1][t];return o(n?n:t)},l,l.exports,t,e,n,i)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(e,t){t.exports=e("./lib/")},{"./lib/":2}],2:[function(e,t,n){function i(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,i=o(e),r=i.source,l=i.id;return t.forceNew||t["force new connection"]||!1===t.multiplex?(s("ignoring socket cache for %s",r),n=a(r,t)):(c[l]||(s("new io instance for %s",r),c[l]=a(r,t)),n=c[l]),n.socket(i.path)}var o=e("./url"),r=e("socket.io-parser"),a=e("./manager"),s=e("debug")("socket.io-client");t.exports=n=i;var c=n.managers={};n.protocol=r.protocol,n.connect=i,n.Manager=e("./manager"),n.Socket=e("./socket")},{"./manager":3,"./socket":5,"./url":6,debug:10,"socket.io-parser":46}],3:[function(e,t){function n(e,t){return this instanceof n?(e&&"object"==typeof e&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new u({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connected=[],this.encoding=!1,this.packetBuffer=[],this.encoder=new a.Encoder,this.decoder=new a.Decoder,this.autoConnect=t.autoConnect!==!1,void(this.autoConnect&&this.open())):new n(e,t)}var i=(e("./url"),e("engine.io-client")),o=e("./socket"),r=e("component-emitter"),a=e("socket.io-parser"),s=e("./on"),c=e("component-bind"),l=(e("object-component"),e("debug")("socket.io-client:manager")),h=e("indexof"),u=e("backo2");t.exports=n,n.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var e in this.nsps)this.nsps[e].emit.apply(this.nsps[e],arguments)},n.prototype.updateSocketIds=function(){for(var e in this.nsps)this.nsps[e].id=this.engine.id},r(n.prototype),n.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},n.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},n.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},n.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},n.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},n.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},n.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},n.prototype.open=n.prototype.connect=function(e){if(l("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;l("opening %s",this.uri),this.engine=i(this.uri,this.opts);var t=this.engine,n=this;this.readyState="opening",this.skipReconnect=!1;var o=s(t,"open",function(){n.onopen(),e&&e()}),r=s(t,"error",function(t){if(l("connect_error"),n.cleanup(),n.readyState="closed",n.emitAll("connect_error",t),e){var i=new Error("Connection error");i.data=t,e(i)}else n.maybeReconnectOnOpen()});if(!1!==this._timeout){var a=this._timeout;l("connect attempt will timeout after %d",a);var c=setTimeout(function(){l("connect attempt timed out after %d",a),o.destroy(),t.close(),t.emit("error","timeout"),n.emitAll("connect_timeout",a)},a);this.subs.push({destroy:function(){clearTimeout(c)}})}return this.subs.push(o),this.subs.push(r),this},n.prototype.onopen=function(){l("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(s(e,"data",c(this,"ondata"))),this.subs.push(s(this.decoder,"decoded",c(this,"ondecoded"))),this.subs.push(s(e,"error",c(this,"onerror"))),this.subs.push(s(e,"close",c(this,"onclose")))},n.prototype.ondata=function(e){this.decoder.add(e)},n.prototype.ondecoded=function(e){this.emit("packet",e)},n.prototype.onerror=function(e){l("error",e),this.emitAll("error",e)},n.prototype.socket=function(e){var t=this.nsps[e];if(!t){t=new o(this,e),this.nsps[e]=t;var n=this;t.on("connect",function(){t.id=n.engine.id,~h(n.connected,t)||n.connected.push(t)})}return t},n.prototype.destroy=function(e){var t=h(this.connected,e);~t&&this.connected.splice(t,1),this.connected.length||this.close()},n.prototype.packet=function(e){l("writing packet %j",e);var t=this;t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(e){for(var n=0;n<e.length;n++)t.engine.write(e[n]);t.encoding=!1,t.processPacketQueue()}))},n.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},n.prototype.cleanup=function(){for(var e;e=this.subs.shift();)e.destroy();this.packetBuffer=[],this.encoding=!1,this.decoder.destroy()},n.prototype.close=n.prototype.disconnect=function(){this.skipReconnect=!0,this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},n.prototype.onclose=function(e){l("close"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},n.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)l("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();l("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout(function(){e.skipReconnect||(l("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open(function(t){t?(l("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(l("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(n)}})}},n.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},{"./on":4,"./socket":5,"./url":6,backo2:7,"component-bind":8,"component-emitter":9,debug:10,"engine.io-client":11,indexof:42,"object-component":43,"socket.io-parser":46}],4:[function(e,t){function n(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}t.exports=n},{}],5:[function(e,t,n){function i(e,t){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.io.autoConnect&&this.open(),this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0}var o=e("socket.io-parser"),r=e("component-emitter"),a=e("to-array"),s=e("./on"),c=e("component-bind"),l=e("debug")("socket.io-client:socket"),h=e("has-binary");t.exports=n=i;var u={connect:1,connect_error:1,connect_timeout:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1},d=r.prototype.emit;r(i.prototype),i.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[s(e,"open",c(this,"onopen")),s(e,"packet",c(this,"onpacket")),s(e,"close",c(this,"onclose"))]}},i.prototype.open=i.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"==this.io.readyState&&this.onopen(),this)},i.prototype.send=function(){var e=a(arguments);return e.unshift("message"),this.emit.apply(this,e),this},i.prototype.emit=function(e){if(u.hasOwnProperty(e))return d.apply(this,arguments),this;var t=a(arguments),n=o.EVENT;h(t)&&(n=o.BINARY_EVENT);var i={type:n,data:t};return"function"==typeof t[t.length-1]&&(l("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),i.id=this.ids++),this.connected?this.packet(i):this.sendBuffer.push(i),this},i.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},i.prototype.onopen=function(){l("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:o.CONNECT})},i.prototype.onclose=function(e){l("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},i.prototype.onpacket=function(e){if(e.nsp==this.nsp)switch(e.type){case o.CONNECT:this.onconnect();break;case o.EVENT:this.onevent(e);break;case o.BINARY_EVENT:this.onevent(e);break;case o.ACK:this.onack(e);break;case o.BINARY_ACK:this.onack(e);break;case o.DISCONNECT:this.ondisconnect();break;case o.ERROR:this.emit("error",e.data)}},i.prototype.onevent=function(e){var t=e.data||[];l("emitting event %j",t),null!=e.id&&(l("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?d.apply(this,t):this.receiveBuffer.push(t)},i.prototype.ack=function(e){var t=this,n=!1;return function(){if(!n){n=!0;var i=a(arguments);l("sending ack %j",i);var r=h(i)?o.BINARY_ACK:o.ACK;t.packet({type:r,id:e,data:i})}}},i.prototype.onack=function(e){l("calling ack %s with %j",e.id,e.data);var t=this.acks[e.id];t.apply(this,e.data),delete this.acks[e.id]},i.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},i.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)d.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},i.prototype.ondisconnect=function(){l("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},i.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},i.prototype.close=i.prototype.disconnect=function(){return this.connected&&(l("performing disconnect (%s)",this.nsp),this.packet({type:o.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{"./on":4,"component-bind":8,"component-emitter":9,debug:10,"has-binary":38,"socket.io-parser":46,"to-array":50}],6:[function(e,t){(function(n){function i(e,t){var i=e,t=t||n.location;return null==e&&(e=t.protocol+"//"+t.host),"string"==typeof e&&("/"==e.charAt(0)&&(e="/"==e.charAt(1)?t.protocol+e:t.hostname+e),/^(https?|wss?):\/\//.test(e)||(r("protocol-less url %s",e),e="undefined"!=typeof t?t.protocol+"//"+e:"https://"+e),r("parse %s",e),i=o(e)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/",i.id=i.protocol+"://"+i.host+":"+i.port,i.href=i.protocol+"://"+i.host+(t&&t.port==i.port?"":":"+i.port),i}var o=e("parseuri"),r=e("debug")("socket.io-client:url");t.exports=i}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{debug:10,parseuri:44}],7:[function(e,t){function n(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}t.exports=n,n.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(e){this.ms=e},n.prototype.setMax=function(e){this.max=e},n.prototype.setJitter=function(e){this.jitter=e}},{}],8:[function(e,t){var n=[].slice;t.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var i=n.call(arguments,2);return function(){return t.apply(e,i.concat(n.call(arguments)))}}},{}],9:[function(e,t){function n(e){return e?i(e):void 0}function i(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}t.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},n.prototype.once=function(e,t){function n(){i.off(e,n),t.apply(this,arguments)}var i=this;return this._callbacks=this._callbacks||{},n.fn=t,this.on(e,n),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var i,o=0;o<n.length;o++)if(i=n[o],i===t||i.fn===t){n.splice(o,1);break}return this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n){n=n.slice(0);for(var i=0,o=n.length;o>i;++i)n[i].apply(this,t)}return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],10:[function(e,t){function n(e){return n.enabled(e)?function(t){t=i(t);var o=new Date,r=o-(n[e]||o);n[e]=o,t=e+" "+t+" +"+n.humanize(r),window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}function i(e){return e instanceof Error?e.stack||e.message:e}t.exports=n,n.names=[],n.skips=[],n.enable=function(e){try{localStorage.debug=e}catch(t){}for(var i=(e||"").split(/[\s,]+/),o=i.length,r=0;o>r;r++)e=i[r].replace("*",".*?"),"-"===e[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$"))},n.disable=function(){n.enable("")},n.humanize=function(e){var t=1e3,n=6e4,i=60*n;return e>=i?(e/i).toFixed(1)+"h":e>=n?(e/n).toFixed(1)+"m":e>=t?(e/t|0)+"s":e+"ms"},n.enabled=function(e){for(var t=0,i=n.skips.length;i>t;t++)if(n.skips[t].test(e))return!1;for(var t=0,i=n.names.length;i>t;t++)if(n.names[t].test(e))return!0;return!1};try{window.localStorage&&n.enable(localStorage.debug)}catch(o){}},{}],11:[function(e,t){t.exports=e("./lib/")},{"./lib/":12}],12:[function(e,t){t.exports=e("./socket"),t.exports.parser=e("engine.io-parser")},{"./socket":13,"engine.io-parser":25}],13:[function(e,t){(function(n){function i(e,t){if(!(this instanceof i))return new i(e,t);if(t=t||{},e&&"object"==typeof e&&(t=e,e=null),e&&(e=h(e),t.host=e.host,t.secure="https"==e.protocol||"wss"==e.protocol,t.port=e.port,e.query&&(t.query=e.query)),this.secure=null!=t.secure?t.secure:n.location&&"https:"==location.protocol,t.host){var o=t.host.split(":");t.hostname=o.shift(),o.length?t.port=o.pop():t.port||(t.port=this.secure?"443":"80")}this.agent=t.agent||!1,this.hostname=t.hostname||(n.location?location.hostname:"localhost"),this.port=t.port||(n.location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=d.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.callbackBuffer=[],this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=t.rejectUnauthorized||null,this.open()}function o(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var r=e("./transports"),a=e("component-emitter"),s=e("debug")("engine.io-client:socket"),c=e("indexof"),l=e("engine.io-parser"),h=e("parseuri"),u=e("parsejson"),d=e("parseqs");t.exports=i,i.priorWebsocketSuccess=!1,a(i.prototype),i.protocol=l.protocol,i.Socket=i,i.Transport=e("./transport"),i.transports=e("./transports"),i.parser=e("engine.io-parser"),i.prototype.createTransport=function(e){s('creating transport "%s"',e);var t=o(this.query);t.EIO=l.protocol,t.transport=e,this.id&&(t.sid=this.id);var n=new r[e]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:t,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized});return n},i.prototype.open=function(){var e;if(this.rememberUpgrade&&i.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))e="websocket";else{if(0==this.transports.length){var t=this;return void setTimeout(function(){t.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";var e;try{e=this.createTransport(e)}catch(n){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},i.prototype.setTransport=function(e){s("setting transport %s",e.name);var t=this;this.transport&&(s("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},i.prototype.probe=function(e){function t(){if(d.onlyBinaryUpgrades){var t=!this.supportsBinary&&d.transport.supportsBinary;u=u||t}u||(s('probe transport "%s" opened',e),h.send([{type:"ping",data:"probe"}]),h.once("packet",function(t){if(!u)if("pong"==t.type&&"probe"==t.data){if(s('probe transport "%s" pong',e),d.upgrading=!0,d.emit("upgrading",h),!h)return;i.priorWebsocketSuccess="websocket"==h.name,s('pausing current transport "%s"',d.transport.name),d.transport.pause(function(){u||"closed"!=d.readyState&&(s("changing transport and sending upgrade packet"),l(),d.setTransport(h),h.send([{type:"upgrade"}]),d.emit("upgrade",h),h=null,d.upgrading=!1,d.flush())})}else{s('probe transport "%s" failed',e);var n=new Error("probe error");n.transport=h.name,d.emit("upgradeError",n)}}))}function n(){u||(u=!0,l(),h.close(),h=null)}function o(t){var i=new Error("probe error: "+t);i.transport=h.name,n(),s('probe transport "%s" failed because of error: %s',e,t),d.emit("upgradeError",i)}function r(){o("transport closed")}function a(){o("socket closed")}function c(e){h&&e.name!=h.name&&(s('"%s" works - aborting "%s"',e.name,h.name),n())}function l(){h.removeListener("open",t),h.removeListener("error",o),h.removeListener("close",r),d.removeListener("close",a),d.removeListener("upgrading",c)}s('probing transport "%s"',e);var h=this.createTransport(e,{
probe:1}),u=!1,d=this;i.priorWebsocketSuccess=!1,h.once("open",t),h.once("error",o),h.once("close",r),this.once("close",a),this.once("upgrading",c),h.open()},i.prototype.onOpen=function(){if(s("socket open"),this.readyState="open",i.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){s("starting upgrade probes");for(var e=0,t=this.upgrades.length;t>e;e++)this.probe(this.upgrades[e])}},i.prototype.onPacket=function(e){if("opening"==this.readyState||"open"==this.readyState)switch(s('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(u(e.data));break;case"pong":this.setPing();break;case"error":var t=new Error("server error");t.code=e.data,this.emit("error",t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else s('packet received with socket readyState "%s"',this.readyState)},i.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},i.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!=t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},i.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){s("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},i.prototype.ping=function(){this.sendPacket("ping")},i.prototype.onDrain=function(){for(var e=0;e<this.prevBufferLen;e++)this.callbackBuffer[e]&&this.callbackBuffer[e]();this.writeBuffer.splice(0,this.prevBufferLen),this.callbackBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0==this.writeBuffer.length?this.emit("drain"):this.flush()},i.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(s("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},i.prototype.write=i.prototype.send=function(e,t){return this.sendPacket("message",e,t),this},i.prototype.sendPacket=function(e,t,n){if("closing"!=this.readyState&&"closed"!=this.readyState){var i={type:e,data:t};this.emit("packetCreate",i),this.writeBuffer.push(i),this.callbackBuffer.push(n),this.flush()}},i.prototype.close=function(){function e(){i.onClose("forced close"),s("socket closing - telling transport to close"),i.transport.close()}function t(){i.removeListener("upgrade",t),i.removeListener("upgradeError",t),e()}function n(){i.once("upgrade",t),i.once("upgradeError",t)}if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var i=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?n():e()}):this.upgrading?n():e()}return this},i.prototype.onError=function(e){s("socket error %j",e),i.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},i.prototype.onClose=function(e,t){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){s('socket close with reason: "%s"',e);var n=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),setTimeout(function(){n.writeBuffer=[],n.callbackBuffer=[],n.prevBufferLen=0},0),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t)}},i.prototype.filterUpgrades=function(e){for(var t=[],n=0,i=e.length;i>n;n++)~c(this.transports,e[n])&&t.push(e[n]);return t}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./transport":14,"./transports":15,"component-emitter":9,debug:22,"engine.io-parser":25,indexof:42,parsejson:34,parseqs:35,parseuri:36}],14:[function(e,t){function n(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized}var i=e("engine.io-parser"),o=e("component-emitter");t.exports=n,o(n.prototype),n.timestamps=0,n.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},n.prototype.open=function(){return("closed"==this.readyState||""==this.readyState)&&(this.readyState="opening",this.doOpen()),this},n.prototype.close=function(){return("opening"==this.readyState||"open"==this.readyState)&&(this.doClose(),this.onClose()),this},n.prototype.send=function(e){if("open"!=this.readyState)throw new Error("Transport not open");this.write(e)},n.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},n.prototype.onData=function(e){var t=i.decodePacket(e,this.socket.binaryType);this.onPacket(t)},n.prototype.onPacket=function(e){this.emit("packet",e)},n.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":9,"engine.io-parser":25}],15:[function(e,t,n){(function(t){function i(e){var n,i=!1,s=!1,c=!1!==e.jsonp;if(t.location){var l="https:"==location.protocol,h=location.port;h||(h=l?443:80),i=e.hostname!=location.hostname||h!=e.port,s=e.secure!=l}if(e.xdomain=i,e.xscheme=s,n=new o(e),"open"in n&&!e.forceJSONP)return new r(e);if(!c)throw new Error("JSONP disabled");return new a(e)}var o=e("xmlhttprequest"),r=e("./polling-xhr"),a=e("./polling-jsonp"),s=e("./websocket");n.polling=i,n.websocket=s}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling-jsonp":16,"./polling-xhr":17,"./websocket":19,xmlhttprequest:20}],16:[function(e,t){(function(n){function i(){}function o(e){r.call(this,e),this.query=this.query||{},s||(n.___eio||(n.___eio=[]),s=n.___eio),this.index=s.length;var t=this;s.push(function(e){t.onData(e)}),this.query.j=this.index,n.document&&n.addEventListener&&n.addEventListener("beforeunload",function(){t.script&&(t.script.onerror=i)},!1)}var r=e("./polling"),a=e("component-inherit");t.exports=o;var s,c=/\n/g,l=/\\n/g;a(o,r),o.prototype.supportsBinary=!1,o.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),r.prototype.doClose.call(this)},o.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n),this.script=t;var i="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);i&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},o.prototype.doWrite=function(e,t){function n(){i(),t()}function i(){if(o.iframe)try{o.form.removeChild(o.iframe)}catch(e){o.onError("jsonp polling iframe removal error",e)}try{var t='<iframe src="javascript:0" name="'+o.iframeId+'">';r=document.createElement(t)}catch(e){r=document.createElement("iframe"),r.name=o.iframeId,r.src="javascript:0"}r.id=o.iframeId,o.form.appendChild(r),o.iframe=r}var o=this;if(!this.form){var r,a=document.createElement("form"),s=document.createElement("textarea"),h=this.iframeId="eio_iframe_"+this.index;a.className="socketio",a.style.position="absolute",a.style.top="-1000px",a.style.left="-1000px",a.target=h,a.method="POST",a.setAttribute("accept-charset","utf-8"),s.name="d",a.appendChild(s),document.body.appendChild(a),this.form=a,this.area=s}this.form.action=this.uri(),i(),e=e.replace(l,"\\\n"),this.area.value=e.replace(c,"\\n");try{this.form.submit()}catch(u){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==o.iframe.readyState&&n()}:this.iframe.onload=n}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":18,"component-inherit":21}],17:[function(e,t){(function(n){function i(){}function o(e){if(c.call(this,e),n.location){var t="https:"==location.protocol,i=location.port;i||(i=t?443:80),this.xd=e.hostname!=n.location.hostname||i!=e.port,this.xs=e.secure!=t}}function r(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!=e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.create()}function a(){for(var e in r.requests)r.requests.hasOwnProperty(e)&&r.requests[e].abort()}var s=e("xmlhttprequest"),c=e("./polling"),l=e("component-emitter"),h=e("component-inherit"),u=e("debug")("engine.io-client:polling-xhr");t.exports=o,t.exports.Request=r,h(o,c),o.prototype.supportsBinary=!0,o.prototype.request=function(e){return e=e||{},e.uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,new r(e)},o.prototype.doWrite=function(e,t){var n="string"!=typeof e&&void 0!==e,i=this.request({method:"POST",data:e,isBinary:n}),o=this;i.on("success",t),i.on("error",function(e){o.onError("xhr post error",e)}),this.sendXhr=i},o.prototype.doPoll=function(){u("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},l(r.prototype),r.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new s(e),i=this;try{if(u("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async),this.supportsBinary&&(t.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(o){}"withCredentials"in t&&(t.withCredentials=!0),this.hasXDR()?(t.onload=function(){i.onLoad()},t.onerror=function(){i.onError(t.responseText)}):t.onreadystatechange=function(){4==t.readyState&&(200==t.status||1223==t.status?i.onLoad():setTimeout(function(){i.onError(t.status)},0))},u("xhr data %s",this.data),t.send(this.data)}catch(o){return void setTimeout(function(){i.onError(o)},0)}n.document&&(this.index=r.requestsCount++,r.requests[this.index]=this)},r.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},r.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},r.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},r.prototype.cleanup=function(e){if("undefined"!=typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=i:this.xhr.onreadystatechange=i,e)try{this.xhr.abort()}catch(t){}n.document&&delete r.requests[this.index],this.xhr=null}},r.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(n){}e="application/octet-stream"===t?this.xhr.response:this.supportsBinary?"ok":this.xhr.responseText}catch(n){this.onError(n)}null!=e&&this.onData(e)},r.prototype.hasXDR=function(){return"undefined"!=typeof n.XDomainRequest&&!this.xs&&this.enablesXDR},r.prototype.abort=function(){this.cleanup()},n.document&&(r.requestsCount=0,r.requests={},n.attachEvent?n.attachEvent("onunload",a):n.addEventListener&&n.addEventListener("beforeunload",a,!1))}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":18,"component-emitter":9,"component-inherit":21,debug:22,xmlhttprequest:20}],18:[function(e,t){function n(e){var t=e&&e.forceBase64;(!c||t)&&(this.supportsBinary=!1),i.call(this,e)}var i=e("../transport"),o=e("parseqs"),r=e("engine.io-parser"),a=e("component-inherit"),s=e("debug")("engine.io-client:polling");t.exports=n;var c=function(){var t=e("xmlhttprequest"),n=new t({xdomain:!1});return null!=n.responseType}();a(n,i),n.prototype.name="polling",n.prototype.doOpen=function(){this.poll()},n.prototype.pause=function(e){function t(){s("paused"),n.readyState="paused",e()}var n=this;if(this.readyState="pausing",this.polling||!this.writable){var i=0;this.polling&&(s("we are currently polling - waiting to pause"),i++,this.once("pollComplete",function(){s("pre-pause polling complete"),--i||t()})),this.writable||(s("we are currently writing - waiting to pause"),i++,this.once("drain",function(){s("pre-pause writing complete"),--i||t()}))}else t()},n.prototype.poll=function(){s("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},n.prototype.onData=function(e){var t=this;s("polling got data %s",e);var n=function(e){return"opening"==t.readyState&&t.onOpen(),"close"==e.type?(t.onClose(),!1):void t.onPacket(e)};r.decodePayload(e,this.socket.binaryType,n),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():s('ignoring poll - transport state "%s"',this.readyState))},n.prototype.doClose=function(){function e(){s("writing close packet"),t.write([{type:"close"}])}var t=this;"open"==this.readyState?(s("transport open - closing"),e()):(s("transport not open - deferring close"),this.once("open",e))},n.prototype.write=function(e){var t=this;this.writable=!1;var n=function(){t.writable=!0,t.emit("drain")},t=this;r.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,n)})},n.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(e[this.timestampParam]=+new Date+"-"+i.timestamps++),this.supportsBinary||e.sid||(e.b64=1),e=o.encode(e),this.port&&("https"==t&&443!=this.port||"http"==t&&80!=this.port)&&(n=":"+this.port),e.length&&(e="?"+e),t+"://"+this.hostname+n+this.path+e}},{"../transport":14,"component-inherit":21,debug:22,"engine.io-parser":25,parseqs:35,xmlhttprequest:20}],19:[function(e,t){function n(e){var t=e&&e.forceBase64;t&&(this.supportsBinary=!1),i.call(this,e)}var i=e("../transport"),o=e("engine.io-parser"),r=e("parseqs"),a=e("component-inherit"),s=e("debug")("engine.io-client:websocket"),c=e("ws");t.exports=n,a(n,i),n.prototype.name="websocket",n.prototype.supportsBinary=!0,n.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=void 0,n={agent:this.agent};n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,this.ws=new c(e,t,n),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.binaryType="arraybuffer",this.addEventListeners()}},n.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(n.prototype.onData=function(e){var t=this;setTimeout(function(){i.prototype.onData.call(t,e)},0)}),n.prototype.write=function(e){function t(){n.writable=!0,n.emit("drain")}var n=this;this.writable=!1;for(var i=0,r=e.length;r>i;i++)o.encodePacket(e[i],this.supportsBinary,function(e){try{n.ws.send(e)}catch(t){s("websocket closed before onclose event")}});setTimeout(t,0)},n.prototype.onClose=function(){i.prototype.onClose.call(this)},n.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},n.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";return this.port&&("wss"==t&&443!=this.port||"ws"==t&&80!=this.port)&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=+new Date),this.supportsBinary||(e.b64=1),e=r.encode(e),e.length&&(e="?"+e),t+"://"+this.hostname+n+this.path+e},n.prototype.check=function(){return!(!c||"__initialize"in c&&this.name===n.prototype.name)}},{"../transport":14,"component-inherit":21,debug:22,"engine.io-parser":25,parseqs:35,ws:37}],20:[function(e,t){var n=e("has-cors");t.exports=function(e){var t=e.xdomain,i=e.xscheme,o=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||n))return new XMLHttpRequest}catch(r){}try{if("undefined"!=typeof XDomainRequest&&!i&&o)return new XDomainRequest}catch(r){}if(!t)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(r){}}},{"has-cors":40}],21:[function(e,t){t.exports=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],22:[function(e,t,n){function i(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function o(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),!t)return e;var i="color: "+this.color;e=[e[0],i,"color: inherit"].concat(Array.prototype.slice.call(e,1));var o=0,r=0;return e[0].replace(/%[a-z%]/g,function(e){"%"!==e&&(o++,"%c"===e&&(r=o))}),e.splice(r,0,i),e}function r(){return"object"==typeof console&&"function"==typeof console.log&&Function.prototype.apply.call(console.log,console,arguments)}function a(e){try{null==e?localStorage.removeItem("debug"):localStorage.debug=e}catch(t){}}function s(){var e;try{e=localStorage.debug}catch(t){}return e}n=t.exports=e("./debug"),n.log=r,n.formatArgs=o,n.save=a,n.load=s,n.useColors=i,n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(e){return JSON.stringify(e)},n.enable(s())},{"./debug":23}],23:[function(e,t,n){function i(){return n.colors[h++%n.colors.length]}function o(e){function t(){}function o(){var e=o,t=+new Date,r=t-(l||t);e.diff=r,e.prev=l,e.curr=t,l=t,null==e.useColors&&(e.useColors=n.useColors()),null==e.color&&e.useColors&&(e.color=i());var a=Array.prototype.slice.call(arguments);a[0]=n.coerce(a[0]),"string"!=typeof a[0]&&(a=["%o"].concat(a));var s=0;a[0]=a[0].replace(/%([a-z%])/g,function(t,i){if("%"===t)return t;s++;var o=n.formatters[i];if("function"==typeof o){var r=a[s];t=o.call(e,r),a.splice(s,1),s--}return t}),"function"==typeof n.formatArgs&&(a=n.formatArgs.apply(e,a));var c=o.log||n.log||console.log.bind(console);c.apply(e,a)}t.enabled=!1,o.enabled=!0;var r=n.enabled(e)?o:t;return r.namespace=e,r}function r(e){n.save(e);for(var t=(e||"").split(/[\s,]+/),i=t.length,o=0;i>o;o++)t[o]&&(e=t[o].replace(/\*/g,".*?"),"-"===e[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))}function a(){n.enable("")}function s(e){var t,i;for(t=0,i=n.skips.length;i>t;t++)if(n.skips[t].test(e))return!1;for(t=0,i=n.names.length;i>t;t++)if(n.names[t].test(e))return!0;return!1}function c(e){return e instanceof Error?e.stack||e.message:e}n=t.exports=o,n.coerce=c,n.disable=a,n.enable=r,n.enabled=s,n.humanize=e("ms"),n.names=[],n.skips=[],n.formatters={};var l,h=0},{ms:24}],24:[function(e,t){function n(e){var t=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),i=(t[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"y":return n*h;case"days":case"day":case"d":return n*l;case"hours":case"hour":case"h":return n*c;case"minutes":case"minute":case"m":return n*s;case"seconds":case"second":case"s":return n*a;case"ms":return n}}}function i(e){return e>=l?Math.round(e/l)+"d":e>=c?Math.round(e/c)+"h":e>=s?Math.round(e/s)+"m":e>=a?Math.round(e/a)+"s":e+"ms"}function o(e){return r(e,l,"day")||r(e,c,"hour")||r(e,s,"minute")||r(e,a,"second")||e+" ms"}function r(e,t,n){return t>e?void 0:1.5*t>e?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var a=1e3,s=60*a,c=60*s,l=24*c,h=365.25*l;t.exports=function(e,t){return t=t||{},"string"==typeof e?n(e):t["long"]?o(e):i(e)}},{}],25:[function(e,t,n){(function(t){function i(e,t){var i="b"+n.packets[e.type]+e.data.data;return t(i)}function o(e,t,i){if(!t)return n.encodeBase64Packet(e,i);var o=e.data,r=new Uint8Array(o),a=new Uint8Array(1+o.byteLength);a[0]=g[e.type];for(var s=0;s<r.length;s++)a[s+1]=r[s];return i(a.buffer)}function r(e,t,i){if(!t)return n.encodeBase64Packet(e,i);var o=new FileReader;return o.onload=function(){e.data=o.result,n.encodePacket(e,t,!0,i)},o.readAsArrayBuffer(e.data)}function a(e,t,i){if(!t)return n.encodeBase64Packet(e,i);if(b)return r(e,t,i);var o=new Uint8Array(1);o[0]=g[e.type];var a=new _([o.buffer,e.data]);return i(a)}function s(e,t,n){for(var i=new Array(e.length),o=d(e.length,n),r=function(e,n,o){t(n,function(t,n){i[e]=n,o(t,i)})},a=0;a<e.length;a++)r(a,e[a],o)}var c=e("./keys"),l=e("has-binary"),h=e("arraybuffer.slice"),u=e("base64-arraybuffer"),d=e("after"),p=e("utf8"),f=navigator.userAgent.match(/Android/i),m=/PhantomJS/i.test(navigator.userAgent),b=f||m;n.protocol=3;var g=n.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},v=c(g),y={type:"error",data:"parser error"},_=e("blob");n.encodePacket=function(e,n,r,s){"function"==typeof n&&(s=n,n=!1),"function"==typeof r&&(s=r,r=null);var c=void 0===e.data?void 0:e.data.buffer||e.data;if(t.ArrayBuffer&&c instanceof ArrayBuffer)return o(e,n,s);if(_&&c instanceof t.Blob)return a(e,n,s);if(c&&c.base64)return i(e,s);var l=g[e.type];return void 0!==e.data&&(l+=r?p.encode(String(e.data)):String(e.data)),s(""+l)},n.encodeBase64Packet=function(e,i){var o="b"+n.packets[e.type];if(_&&e.data instanceof _){var r=new FileReader;return r.onload=function(){var e=r.result.split(",")[1];i(o+e)},r.readAsDataURL(e.data)}var a;try{a=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(s){for(var c=new Uint8Array(e.data),l=new Array(c.length),h=0;h<c.length;h++)l[h]=c[h];a=String.fromCharCode.apply(null,l)}return o+=t.btoa(a),i(o)},n.decodePacket=function(e,t,i){if("string"==typeof e||void 0===e){if("b"==e.charAt(0))return n.decodeBase64Packet(e.substr(1),t);if(i)try{e=p.decode(e)}catch(o){return y}var r=e.charAt(0);return Number(r)==r&&v[r]?e.length>1?{type:v[r],data:e.substring(1)}:{type:v[r]}:y}var a=new Uint8Array(e),r=a[0],s=h(e,1);return _&&"blob"===t&&(s=new _([s])),{type:v[r],data:s}},n.decodeBase64Packet=function(e,n){var i=v[e.charAt(0)];if(!t.ArrayBuffer)return{type:i,data:{base64:!0,data:e.substr(1)}};var o=u.decode(e.substr(1));return"blob"===n&&_&&(o=new _([o])),{type:i,data:o}},n.encodePayload=function(e,t,i){function o(e){return e.length+":"+e}function r(e,i){n.encodePacket(e,a?t:!1,!0,function(e){i(null,o(e))})}"function"==typeof t&&(i=t,t=null);var a=l(e);return t&&a?_&&!b?n.encodePayloadAsBlob(e,i):n.encodePayloadAsArrayBuffer(e,i):e.length?void s(e,r,function(e,t){return i(t.join(""))}):i("0:")},n.decodePayload=function(e,t,i){if("string"!=typeof e)return n.decodePayloadAsBinary(e,t,i);"function"==typeof t&&(i=t,t=null);var o;if(""==e)return i(y,0,1);for(var r,a,s="",c=0,l=e.length;l>c;c++){var h=e.charAt(c);if(":"!=h)s+=h;else{if(""==s||s!=(r=Number(s)))return i(y,0,1);if(a=e.substr(c+1,r),s!=a.length)return i(y,0,1);if(a.length){if(o=n.decodePacket(a,t,!0),y.type==o.type&&y.data==o.data)return i(y,0,1);var u=i(o,c+r,l);if(!1===u)return}c+=r,s=""}}return""!=s?i(y,0,1):void 0},n.encodePayloadAsArrayBuffer=function(e,t){function i(e,t){n.encodePacket(e,!0,!0,function(e){return t(null,e)})}return e.length?void s(e,i,function(e,n){var i=n.reduce(function(e,t){var n;return n="string"==typeof t?t.length:t.byteLength,e+n.toString().length+n+2},0),o=new Uint8Array(i),r=0;return n.forEach(function(e){var t="string"==typeof e,n=e;if(t){for(var i=new Uint8Array(e.length),a=0;a<e.length;a++)i[a]=e.charCodeAt(a);n=i.buffer}o[r++]=t?0:1;for(var s=n.byteLength.toString(),a=0;a<s.length;a++)o[r++]=parseInt(s[a]);o[r++]=255;for(var i=new Uint8Array(n),a=0;a<i.length;a++)o[r++]=i[a]}),t(o.buffer)}):t(new ArrayBuffer(0))},n.encodePayloadAsBlob=function(e,t){function i(e,t){n.encodePacket(e,!0,!0,function(e){var n=new Uint8Array(1);if(n[0]=1,"string"==typeof e){for(var i=new Uint8Array(e.length),o=0;o<e.length;o++)i[o]=e.charCodeAt(o);e=i.buffer,n[0]=0}for(var r=e instanceof ArrayBuffer?e.byteLength:e.size,a=r.toString(),s=new Uint8Array(a.length+1),o=0;o<a.length;o++)s[o]=parseInt(a[o]);if(s[a.length]=255,_){var c=new _([n.buffer,s.buffer,e]);t(null,c)}})}s(e,i,function(e,n){return t(new _(n))})},n.decodePayloadAsBinary=function(e,t,i){"function"==typeof t&&(i=t,t=null);for(var o=e,r=[],a=!1;o.byteLength>0;){for(var s=new Uint8Array(o),c=0===s[0],l="",u=1;255!=s[u];u++){if(l.length>310){a=!0;break}l+=s[u]}if(a)return i(y,0,1);o=h(o,2+l.length),l=parseInt(l);var d=h(o,0,l);if(c)try{d=String.fromCharCode.apply(null,new Uint8Array(d))}catch(p){var f=new Uint8Array(d);d="";for(var u=0;u<f.length;u++)d+=String.fromCharCode(f[u])}r.push(d),o=h(o,l)}var m=r.length;r.forEach(function(e,o){i(n.decodePacket(e,t,!0),o,m)})}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./keys":26,after:27,"arraybuffer.slice":28,"base64-arraybuffer":29,blob:30,"has-binary":31,utf8:33}],26:[function(e,t){t.exports=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var i in e)n.call(e,i)&&t.push(i);return t}},{}],27:[function(e,t){function n(e,t,n){function o(e,i){if(o.count<=0)throw new Error("after called too many times");--o.count,e?(r=!0,t(e),t=n):0!==o.count||r||t(null,i)}var r=!1;return n=n||i,o.count=e,0===e?t():o}function i(){}t.exports=n},{}],28:[function(e,t){t.exports=function(e,t,n){var i=e.byteLength;if(t=t||0,n=n||i,e.slice)return e.slice(t,n);if(0>t&&(t+=i),0>n&&(n+=i),n>i&&(n=i),t>=i||t>=n||0===i)return new ArrayBuffer(0);for(var o=new Uint8Array(e),r=new Uint8Array(n-t),a=t,s=0;n>a;a++,s++)r[s]=o[a];return r.buffer}},{}],29:[function(e,t,n){!function(e){"use strict";n.encode=function(t){var n,i=new Uint8Array(t),o=i.length,r="";for(n=0;o>n;n+=3)r+=e[i[n]>>2],r+=e[(3&i[n])<<4|i[n+1]>>4],r+=e[(15&i[n+1])<<2|i[n+2]>>6],r+=e[63&i[n+2]];return o%3===2?r=r.substring(0,r.length-1)+"=":o%3===1&&(r=r.substring(0,r.length-2)+"=="),r},n.decode=function(t){var n,i,o,r,a,s=.75*t.length,c=t.length,l=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);var h=new ArrayBuffer(s),u=new Uint8Array(h);for(n=0;c>n;n+=4)i=e.indexOf(t[n]),o=e.indexOf(t[n+1]),r=e.indexOf(t[n+2]),a=e.indexOf(t[n+3]),u[l++]=i<<2|o>>4,u[l++]=(15&o)<<4|r>>2,u[l++]=(3&r)<<6|63&a;return h}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],30:[function(e,t){(function(e){function n(e,t){t=t||{};for(var n=new i,o=0;o<e.length;o++)n.append(e[o]);return t.type?n.getBlob(t.type):n.getBlob()}var i=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,o=function(){try{var e=new Blob(["hi"]);return 2==e.size}catch(t){return!1}}(),r=i&&i.prototype.append&&i.prototype.getBlob;t.exports=function(){return o?e.Blob:r?n:void 0}()}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],31:[function(e,t){(function(n){function i(e){function t(e){if(!e)return!1;if(n.Buffer&&n.Buffer.isBuffer(e)||n.ArrayBuffer&&e instanceof ArrayBuffer||n.Blob&&e instanceof Blob||n.File&&e instanceof File)return!0;if(o(e)){for(var i=0;i<e.length;i++)if(t(e[i]))return!0}else if(e&&"object"==typeof e){e.toJSON&&(e=e.toJSON());for(var r in e)if(e.hasOwnProperty(r)&&t(e[r]))return!0}return!1}return t(e)}var o=e("isarray");t.exports=i}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{isarray:32}],32:[function(e,t){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],33:[function(t,n,i){(function(t){!function(o){function r(e){for(var t,n,i=[],o=0,r=e.length;r>o;)t=e.charCodeAt(o++),t>=55296&&56319>=t&&r>o?(n=e.charCodeAt(o++),56320==(64512&n)?i.push(((1023&t)<<10)+(1023&n)+65536):(i.push(t),o--)):i.push(t);return i}function a(e){for(var t,n=e.length,i=-1,o="";++i<n;)t=e[i],t>65535&&(t-=65536,o+=y(t>>>10&1023|55296),t=56320|1023&t),o+=y(t);return o}function s(e,t){return y(e>>t&63|128)}function c(e){if(0==(4294967168&e))return y(e);var t="";return 0==(4294965248&e)?t=y(e>>6&31|192):0==(4294901760&e)?(t=y(e>>12&15|224),t+=s(e,6)):0==(4292870144&e)&&(t=y(e>>18&7|240),t+=s(e,12),t+=s(e,6)),t+=y(63&e|128)}function l(e){for(var t,n=r(e),i=n.length,o=-1,a="";++o<i;)t=n[o],a+=c(t);return a}function h(){if(v>=g)throw Error("Invalid byte index");var e=255&b[v];if(v++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function u(){var e,t,n,i,o;if(v>g)throw Error("Invalid byte index");if(v==g)return!1;if(e=255&b[v],v++,0==(128&e))return e;if(192==(224&e)){var t=h();if(o=(31&e)<<6|t,o>=128)return o;throw Error("Invalid continuation byte")}if(224==(240&e)){if(t=h(),n=h(),o=(15&e)<<12|t<<6|n,o>=2048)return o;throw Error("Invalid continuation byte")}if(240==(248&e)&&(t=h(),n=h(),i=h(),o=(15&e)<<18|t<<12|n<<6|i,o>=65536&&1114111>=o))return o;throw Error("Invalid UTF-8 detected")}function d(e){b=r(e),g=b.length,v=0;for(var t,n=[];(t=u())!==!1;)n.push(t);return a(n)}var p="object"==typeof i&&i,f="object"==typeof n&&n&&n.exports==p&&n,m="object"==typeof t&&t;(m.global===m||m.window===m)&&(o=m);var b,g,v,y=String.fromCharCode,_={version:"2.0.0",encode:l,decode:d};if("function"==typeof e&&"object"==typeof e.amd&&e.amd)e(function(){return _});else if(p&&!p.nodeType)if(f)f.exports=_;else{var w={},x=w.hasOwnProperty;for(var k in _)x.call(_,k)&&(p[k]=_[k])}else o.utf8=_}(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],34:[function(e,t){(function(e){var n=/^[\],:{}\s]*$/,i=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,o=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,r=/(?:^|:|,)(?:\s*\[)+/g,a=/^\s+/,s=/\s+$/;t.exports=function(t){return"string"==typeof t&&t?(t=t.replace(a,"").replace(s,""),e.JSON&&JSON.parse?JSON.parse(t):n.test(t.replace(i,"@").replace(o,"]").replace(r,""))?new Function("return "+t)():void 0):null}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],35:[function(e,t,n){n.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},n.decode=function(e){for(var t={},n=e.split("&"),i=0,o=n.length;o>i;i++){var r=n[i].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return t}},{}],36:[function(e,t){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(e){var t=e,o=e.indexOf("["),r=e.indexOf("]");-1!=o&&-1!=r&&(e=e.substring(0,o)+e.substring(o,r).replace(/:/g,";")+e.substring(r,e.length));for(var a=n.exec(e||""),s={},c=14;c--;)s[i[c]]=a[c]||"";return-1!=o&&-1!=r&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s}},{}],37:[function(e,t){function n(e,t){var n;return n=t?new o(e,t):new o(e);

}var i=function(){return this}(),o=i.WebSocket||i.MozWebSocket;t.exports=o?n:null,o&&(n.prototype=o.prototype)},{}],38:[function(e,t){(function(n){function i(e){function t(e){if(!e)return!1;if(n.Buffer&&n.Buffer.isBuffer(e)||n.ArrayBuffer&&e instanceof ArrayBuffer||n.Blob&&e instanceof Blob||n.File&&e instanceof File)return!0;if(o(e)){for(var i=0;i<e.length;i++)if(t(e[i]))return!0}else if(e&&"object"==typeof e){e.toJSON&&(e=e.toJSON());for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return!0}return!1}return t(e)}var o=e("isarray");t.exports=i}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{isarray:39}],39:[function(e,t){t.exports=e(32)},{}],40:[function(e,t){var n=e("global");try{t.exports="XMLHttpRequest"in n&&"withCredentials"in new n.XMLHttpRequest}catch(i){t.exports=!1}},{global:41}],41:[function(e,t){t.exports=function(){return this}()},{}],42:[function(e,t){var n=[].indexOf;t.exports=function(e,t){if(n)return e.indexOf(t);for(var i=0;i<e.length;++i)if(e[i]===t)return i;return-1}},{}],43:[function(e,t,n){var i=Object.prototype.hasOwnProperty;n.keys=Object.keys||function(e){var t=[];for(var n in e)i.call(e,n)&&t.push(n);return t},n.values=function(e){var t=[];for(var n in e)i.call(e,n)&&t.push(e[n]);return t},n.merge=function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);return e},n.length=function(e){return n.keys(e).length},n.isEmpty=function(e){return 0==n.length(e)}},{}],44:[function(e,t){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(e){for(var t=n.exec(e||""),o={},r=14;r--;)o[i[r]]=t[r]||"";return o}},{}],45:[function(e,t,n){(function(t){var i=e("isarray"),o=e("./is-buffer");n.deconstructPacket=function(e){function t(e){if(!e)return e;if(o(e)){var r={_placeholder:!0,num:n.length};return n.push(e),r}if(i(e)){for(var a=new Array(e.length),s=0;s<e.length;s++)a[s]=t(e[s]);return a}if("object"==typeof e&&!(e instanceof Date)){var a={};for(var c in e)a[c]=t(e[c]);return a}return e}var n=[],r=e.data,a=e;return a.data=t(r),a.attachments=n.length,{packet:a,buffers:n}},n.reconstructPacket=function(e,t){function n(e){if(e&&e._placeholder){var o=t[e.num];return o}if(i(e)){for(var r=0;r<e.length;r++)e[r]=n(e[r]);return e}if(e&&"object"==typeof e){for(var a in e)e[a]=n(e[a]);return e}return e}return e.data=n(e.data),e.attachments=void 0,e},n.removeBlobs=function(e,n){function r(e,c,l){if(!e)return e;if(t.Blob&&e instanceof Blob||t.File&&e instanceof File){a++;var h=new FileReader;h.onload=function(){l?l[c]=this.result:s=this.result,--a||n(s)},h.readAsArrayBuffer(e)}else if(i(e))for(var u=0;u<e.length;u++)r(e[u],u,e);else if(e&&"object"==typeof e&&!o(e))for(var d in e)r(e[d],d,e)}var a=0,s=e;r(s),a||n(s)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./is-buffer":47,isarray:48}],46:[function(e,t,n){function i(){}function o(e){var t="",i=!1;return t+=e.type,(n.BINARY_EVENT==e.type||n.BINARY_ACK==e.type)&&(t+=e.attachments,t+="-"),e.nsp&&"/"!=e.nsp&&(i=!0,t+=e.nsp),null!=e.id&&(i&&(t+=",",i=!1),t+=e.id),null!=e.data&&(i&&(t+=","),t+=u.stringify(e.data)),h("encoded %j as %s",e,t),t}function r(e,t){function n(e){var n=p.deconstructPacket(e),i=o(n.packet),r=n.buffers;r.unshift(i),t(r)}p.removeBlobs(e,n)}function a(){this.reconstructor=null}function s(e){var t={},i=0;if(t.type=Number(e.charAt(0)),null==n.types[t.type])return l();if(n.BINARY_EVENT==t.type||n.BINARY_ACK==t.type){for(var o="";"-"!=e.charAt(++i)&&(o+=e.charAt(i),i!=e.length););if(o!=Number(o)||"-"!=e.charAt(i))throw new Error("Illegal attachments");t.attachments=Number(o)}if("/"==e.charAt(i+1))for(t.nsp="";++i;){var r=e.charAt(i);if(","==r)break;if(t.nsp+=r,i==e.length)break}else t.nsp="/";var a=e.charAt(i+1);if(""!==a&&Number(a)==a){for(t.id="";++i;){var r=e.charAt(i);if(null==r||Number(r)!=r){--i;break}if(t.id+=e.charAt(i),i==e.length)break}t.id=Number(t.id)}if(e.charAt(++i))try{t.data=u.parse(e.substr(i))}catch(s){return l()}return h("decoded %s as %j",e,t),t}function c(e){this.reconPack=e,this.buffers=[]}function l(){return{type:n.ERROR,data:"parser error"}}var h=e("debug")("socket.io-parser"),u=e("json3"),d=(e("isarray"),e("component-emitter")),p=e("./binary"),f=e("./is-buffer");n.protocol=4,n.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"],n.CONNECT=0,n.DISCONNECT=1,n.EVENT=2,n.ACK=3,n.ERROR=4,n.BINARY_EVENT=5,n.BINARY_ACK=6,n.Encoder=i,n.Decoder=a,i.prototype.encode=function(e,t){if(h("encoding packet %j",e),n.BINARY_EVENT==e.type||n.BINARY_ACK==e.type)r(e,t);else{var i=o(e);t([i])}},d(a.prototype),a.prototype.add=function(e){var t;if("string"==typeof e)t=s(e),n.BINARY_EVENT==t.type||n.BINARY_ACK==t.type?(this.reconstructor=new c(t),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",t)):this.emit("decoded",t);else{if(!f(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,this.emit("decoded",t))}},a.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},c.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length==this.reconPack.attachments){var t=p.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},c.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{"./binary":45,"./is-buffer":47,"component-emitter":9,debug:10,isarray:48,json3:49}],47:[function(e,t){(function(e){function n(t){return e.Buffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer}t.exports=n}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],48:[function(e,t){t.exports=e(32)},{}],49:[function(t,n,i){!function(t){function n(e){if(n[e]!==a)return n[e];var t;if("bug-string-char-index"==e)t="a"!="a"[0];else if("json"==e)t=n("json-stringify")&&n("json-parse");else{var i,o='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var r=h.stringify,c="function"==typeof r&&u;if(c){(i=function(){return 1}).toJSON=i;try{c="0"===r(0)&&"0"===r(new Number)&&'""'==r(new String)&&r(s)===a&&r(a)===a&&r()===a&&"1"===r(i)&&"[1]"==r([i])&&"[null]"==r([a])&&"null"==r(null)&&"[null,null,null]"==r([a,s,null])&&r({a:[i,!0,!1,null,"\x00\b\n\f\r "]})==o&&"1"===r(null,i)&&"[\n 1,\n 2\n]"==r([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==r(new Date(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==r(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==r(new Date(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==r(new Date(-1))}catch(l){c=!1}}t=c}if("json-parse"==e){var d=h.parse;if("function"==typeof d)try{if(0===d("0")&&!d(!1)){i=d(o);var p=5==i.a.length&&1===i.a[0];if(p){try{p=!d('"  "')}catch(l){}if(p)try{p=1!==d("01")}catch(l){}if(p)try{p=1!==d("1.")}catch(l){}}}}catch(l){p=!1}t=p}}return n[e]=!!t}var o,r,a,s={}.toString,c="function"==typeof e&&e.amd,l="object"==typeof JSON&&JSON,h="object"==typeof i&&i&&!i.nodeType&&i;h&&l?(h.stringify=l.stringify,h.parse=l.parse):h=t.JSON=l||{};var u=new Date(-0xc782b5b800cec);try{u=-109252==u.getUTCFullYear()&&0===u.getUTCMonth()&&1===u.getUTCDate()&&10==u.getUTCHours()&&37==u.getUTCMinutes()&&6==u.getUTCSeconds()&&708==u.getUTCMilliseconds()}catch(d){}if(!n("json")){var p="[object Function]",f="[object Date]",m="[object Number]",b="[object String]",g="[object Array]",v="[object Boolean]",y=n("bug-string-char-index");if(!u)var _=Math.floor,w=[0,31,59,90,120,151,181,212,243,273,304,334],x=function(e,t){return w[t]+365*(e-1970)+_((e-1969+(t=+(t>1)))/4)-_((e-1901+t)/100)+_((e-1601+t)/400)};(o={}.hasOwnProperty)||(o=function(e){var t,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=s?o=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(t=n.constructor,o=function(e){var n=(this.constructor||t).prototype;return e in this&&!(e in n&&this[e]===n[e])}),n=null,o.call(this,e)});var k={"boolean":1,number:1,string:1,undefined:1},C=function(e,t){var n=typeof e[t];return"object"==n?!!e[t]:!k[n]};if(r=function(e,t){var n,i,a,c=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,i=new n;for(a in i)o.call(i,a)&&c++;return n=i=null,c?r=2==c?function(e,t){var n,i={},r=s.call(e)==p;for(n in e)r&&"prototype"==n||o.call(i,n)||!(i[n]=1)||!o.call(e,n)||t(n)}:function(e,t){var n,i,r=s.call(e)==p;for(n in e)r&&"prototype"==n||!o.call(e,n)||(i="constructor"===n)||t(n);(i||o.call(e,n="constructor"))&&t(n)}:(i=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],r=function(e,t){var n,r,a=s.call(e)==p,c=!a&&"function"!=typeof e.constructor&&C(e,"hasOwnProperty")?e.hasOwnProperty:o;for(n in e)a&&"prototype"==n||!c.call(e,n)||t(n);for(r=i.length;n=i[--r];c.call(e,n)&&t(n));}),r(e,t)},!n("json-stringify")){var S={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},T="000000",E=function(e,t){return(T+(t||0)).slice(-e)},N="\\u00",M=function(e){var t,n='"',i=0,o=e.length,r=o>10&&y;for(r&&(t=e.split(""));o>i;i++){var a=e.charCodeAt(i);switch(a){case 8:case 9:case 10:case 12:case 13:case 34:case 92:n+=S[a];break;default:if(32>a){n+=N+E(2,a.toString(16));break}n+=r?t[i]:y?e.charAt(i):e[i]}}return n+'"'},I=function(e,t,n,i,c,l,h){var u,d,p,y,w,k,C,S,T,N,A,O,B,D,R,L;try{u=t[e]}catch(P){}if("object"==typeof u&&u)if(d=s.call(u),d!=f||o.call(u,"toJSON"))"function"==typeof u.toJSON&&(d!=m&&d!=b&&d!=g||o.call(u,"toJSON"))&&(u=u.toJSON(e));else if(u>-1/0&&1/0>u){if(x){for(w=_(u/864e5),p=_(w/365.2425)+1970-1;x(p+1,0)<=w;p++);for(y=_((w-x(p,0))/30.42);x(p,y+1)<=w;y++);w=1+w-x(p,y),k=(u%864e5+864e5)%864e5,C=_(k/36e5)%24,S=_(k/6e4)%60,T=_(k/1e3)%60,N=k%1e3}else p=u.getUTCFullYear(),y=u.getUTCMonth(),w=u.getUTCDate(),C=u.getUTCHours(),S=u.getUTCMinutes(),T=u.getUTCSeconds(),N=u.getUTCMilliseconds();u=(0>=p||p>=1e4?(0>p?"-":"+")+E(6,0>p?-p:p):E(4,p))+"-"+E(2,y+1)+"-"+E(2,w)+"T"+E(2,C)+":"+E(2,S)+":"+E(2,T)+"."+E(3,N)+"Z"}else u=null;if(n&&(u=n.call(t,e,u)),null===u)return"null";if(d=s.call(u),d==v)return""+u;if(d==m)return u>-1/0&&1/0>u?""+u:"null";if(d==b)return M(""+u);if("object"==typeof u){for(D=h.length;D--;)if(h[D]===u)throw TypeError();if(h.push(u),A=[],R=l,l+=c,d==g){for(B=0,D=u.length;D>B;B++)O=I(B,u,n,i,c,l,h),A.push(O===a?"null":O);L=A.length?c?"[\n"+l+A.join(",\n"+l)+"\n"+R+"]":"["+A.join(",")+"]":"[]"}else r(i||u,function(e){var t=I(e,u,n,i,c,l,h);t!==a&&A.push(M(e)+":"+(c?" ":"")+t)}),L=A.length?c?"{\n"+l+A.join(",\n"+l)+"\n"+R+"}":"{"+A.join(",")+"}":"{}";return h.pop(),L}};h.stringify=function(e,t,n){var i,o,r,a;if("function"==typeof t||"object"==typeof t&&t)if((a=s.call(t))==p)o=t;else if(a==g){r={};for(var c,l=0,h=t.length;h>l;c=t[l++],a=s.call(c),(a==b||a==m)&&(r[c]=1));}if(n)if((a=s.call(n))==m){if((n-=n%1)>0)for(i="",n>10&&(n=10);i.length<n;i+=" ");}else a==b&&(i=n.length<=10?n:n.slice(0,10));return I("",(c={},c[""]=e,c),o,r,i,"",[])}}if(!n("json-parse")){var A,O,B=String.fromCharCode,D={92:"\\",34:'"',47:"/",98:"\b",116:"  ",110:"\n",102:"\f",114:"\r"},R=function(){throw A=O=null,SyntaxError()},L=function(){for(var e,t,n,i,o,r=O,a=r.length;a>A;)switch(o=r.charCodeAt(A)){case 9:case 10:case 13:case 32:A++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=y?r.charAt(A):r[A],A++,e;case 34:for(e="@",A++;a>A;)if(o=r.charCodeAt(A),32>o)R();else if(92==o)switch(o=r.charCodeAt(++A)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=D[o],A++;break;case 117:for(t=++A,n=A+4;n>A;A++)o=r.charCodeAt(A),o>=48&&57>=o||o>=97&&102>=o||o>=65&&70>=o||R();e+=B("0x"+r.slice(t,A));break;default:R()}else{if(34==o)break;for(o=r.charCodeAt(A),t=A;o>=32&&92!=o&&34!=o;)o=r.charCodeAt(++A);e+=r.slice(t,A)}if(34==r.charCodeAt(A))return A++,e;R();default:if(t=A,45==o&&(i=!0,o=r.charCodeAt(++A)),o>=48&&57>=o){for(48==o&&(o=r.charCodeAt(A+1),o>=48&&57>=o)&&R(),i=!1;a>A&&(o=r.charCodeAt(A),o>=48&&57>=o);A++);if(46==r.charCodeAt(A)){for(n=++A;a>n&&(o=r.charCodeAt(n),o>=48&&57>=o);n++);n==A&&R(),A=n}if(o=r.charCodeAt(A),101==o||69==o){for(o=r.charCodeAt(++A),(43==o||45==o)&&A++,n=A;a>n&&(o=r.charCodeAt(n),o>=48&&57>=o);n++);n==A&&R(),A=n}return+r.slice(t,A)}if(i&&R(),"true"==r.slice(A,A+4))return A+=4,!0;if("false"==r.slice(A,A+5))return A+=5,!1;if("null"==r.slice(A,A+4))return A+=4,null;R()}return"$"},P=function(e){var t,n;if("$"==e&&R(),"string"==typeof e){if("@"==(y?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];e=L(),"]"!=e;n||(n=!0))n&&(","==e?(e=L(),"]"==e&&R()):R()),","==e&&R(),t.push(P(e));return t}if("{"==e){for(t={};e=L(),"}"!=e;n||(n=!0))n&&(","==e?(e=L(),"}"==e&&R()):R()),(","==e||"string"!=typeof e||"@"!=(y?e.charAt(0):e[0])||":"!=L())&&R(),t[e.slice(1)]=P(L());return t}R()}return e},j=function(e,t,n){var i=H(e,t,n);i===a?delete e[t]:e[t]=i},H=function(e,t,n){var i,o=e[t];if("object"==typeof o&&o)if(s.call(o)==g)for(i=o.length;i--;)j(o,i,n);else r(o,function(e){j(o,e,n)});return n.call(e,t,o)};h.parse=function(e,t){var n,i;return A=0,O=""+e,n=P(L()),"$"!=L()&&R(),A=O=null,t&&s.call(t)==p?H((i={},i[""]=n,i),"",t):n}}}c&&e(function(){return h})}(this)},{}],50:[function(e,t){function n(e,t){var n=[];t=t||0;for(var i=t||0;i<e.length;i++)n[i-t]=e[i];return n}t.exports=n},{}]},{},[1])(1)});var pe=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],fe=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],me=function(){var e,t,n=".cbh-widget-content",i=".cbh-widget-",o="cbh-rotate-icon",r=[],a=!1,s=ut?{first:"phone",phone:{duration:15e3,next:"call"},call:{duration:3e3}}:{first:"phone",phone:{duration:4e3,next:"call"},call:{duration:1500,next:"rating"},rating:{duration:2e3,next:"logo"},logo:{duration:1e3}},c=function(){t=Kt(n).findChild("div");for(var e in s)s.hasOwnProperty(e)&&"object"==typeof s[e]&&(r[e]=t.findParent().findChild(i+e));l()},l=function(){a=!0;var n=function(i){t.removeClass(o),r[i].addClass(o),function(t){e=setTimeout(function(){if(a){r[t].removeClass(o);var e=s[t].next?s[t].next:s.first;n(e)}},s[t].duration)}(i)};n(s.first)},h=function(){clearTimeout(e),setTimeout(function(){a||l()},30)},u=function(){a=!1,clearTimeout(e),t.removeClass(o)};return{init:function(){return c()},reset:function(){return h()},stop:function(){return u()}}}(),be={accelerometer:{current:1e3,start:1e3,step:8,factor:1},edges:{a:1,b:1},threshold:98,exitThreshold:24,activityLastTime:null,activityTimer:null,catchLastTime:null,mouseLastPos:null,lastTimeSpeed:null,Z:4e3,start:function(){this.accelerometer.start=this.accelerometer.start*this.accelerometer.factor,this.accelerometer.step=this.accelerometer.step*this.accelerometer.factor,Object.keys(this.edges).forEach(function(e){var t="hunter_edge_"+e,n=_e.get(t);n?(this.edges[e]=n,n<this.threshold&&(this.accelerometer.current=this.accelerometer.start-n*this.accelerometer.step)):this.accelerometer.current=this.accelerometer.start}.bind(this)),this.save(),this.activityLastTime=Date.now(),this.activityTimer=setInterval(this.checkActivity.bind(this),500),Kt(window).on("mousemove",this.catchMovement.bind(this))},save:function(){Object.keys(this.edges).forEach(function(e){var t="hunter_edge_"+e;_e.set(t,this.edges[e],{expires:30})}.bind(this))},checkActivity:function(){var e=Date.now(),t=1,n=97,i=95,o=Object.keys(this.edges),r=on.getRandomInt(1,o.length),a=o[r-1];e-this.activityLastTime<=8e3&&(this.edges[a]<n-1?(this.edges[a]=this.edges[a]+t,this.edges[a]>n&&(this.edges[a]=n),this.accelerometer.current-=this.accelerometer.step):this.edges[a]=n,this.save());var s=o.reduce(function(e,t){return e+this.edges[t]}.bind(this),0);s>this.exitThreshold&&(Ke=!0),this.edges[a]>=i&&(this.accelerometer.current=20)},catchMovement:function(e){if(this.activityLastTime=Date.now(),lt&&Ke&&!Xe&&!tt&&!(nt>0||5>st)){if(!this.catchLastTime)return this.catchLastTime=Date.now(),this.mouseLastPos=e.screenY,void(this.lastTimeSpeed=0);var t=Date.now(),n=t-this.catchLastTime;if(!(5>n)){var i=e.screenY-this.mouseLastPos,o=Math.round(i/n*100),r=o-this.lastTimeSpeed,a=Math.round(r/n*100),s=0;0>a&&(s=Math.round(-1e3*a/this.Z),s>this.accelerometer.current/2&&H()),this.catchLastTime=t,this.mouseLastPos=e.screenY,this.lastTimeSpeed=o}}}},ge={lastSeenAt:{x:null,y:null,dx:null,dy:null},totalDistance:0,totalScrollDistance:0,lastSeenScrollAt:null,activityStartedAt:null,start:function(){Kt(document).on("mousemove",this.measureDistance.bind(this)),Kt(document).on("scroll",this.measureScroll.bind(this)),setInterval(this.clearDistance.bind(this),1500)},windowWidth:function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth||0},windowHeight:function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0},measureDistance:function(e){if(on.isNull(this.activityStartedAt)&&(this.activityStartedAt=st),vt){var t=(this.windowWidth(),this.windowHeight(),e.clientX),n=e.clientY;this.lastSeenAt.dx=t-this.lastSeenAt.x,this.lastSeenAt.dy=n-this.lastSeenAt.y,this.lastSeenAt.x&&(this.totalDistance+=Math.sqrt(Math.pow(this.lastSeenAt.y-n,2)+Math.pow(this.lastSeenAt.x-t,2))),this.lastSeenAt.x=t,this.lastSeenAt.y=n}},clearDistance:function(){vt&&(E(),(Math.round(this.totalDistance)>1e3||Math.round(this.totalScrollDistance)>200)&&T(),this.totalDistance=0,this.totalScrollDistance=0)},measureScroll:function(){if(vt){var e=window.pageYOffset;e>=yt?k():C(),this.lastSeenScrollAt&&(this.totalScrollDistance+=Math.abs(this.lastSeenScrollAt-e)),this.lastSeenScrollAt=e}}},ve={data:{},start:function(){var e=this.addEvent.bind(this);Kt(window).on("click",e),Kt(window).on("mouseover",e),Kt(window).on("mouseout",e),Kt(window).on("contextmenu",e),Kt(window).on("keypress",e),Kt("input").on("focus",e);var t=/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel";Kt(window.document).on(t,e),setInterval(this.send.bind(this),3e4)},addUserData:function(){var t=navigator.appName+";"+navigator.appVersion+";"+navigator.userAgent+";"+navigator.cookieEnabled,n=screen.availWidth+";"+screen.availHeight+";"+screen.colorDepth,i=new Date;this.data.browser=t,this.data.screen=n,this.data.date=i,this.data.href=e.location.href},addEvent:function(e){this.data[e.type]||(this.data[e.type]=[]),this.data[e.type].push(JSON.stringify({type:e.type,x:e.x,y:e.y})),(this.data.keypress||this.data.focus)&&(Xe=!0),("DOMMouseScroll"==e.type||"mousewheel"==e.type)&&(Ke=!0)},send:function(){on.sendData(null,this.stringify(this.data)),this.reset()},stringify:function(e){var t,n=[];for(t in e)if(e.hasOwnProperty(t)){var i=e[t];n.push("[object Array]"==Object.prototype.toString.call(i)?encodeURIComponent(t)+"="+encodeURIComponent(i.length):encodeURIComponent(t)+"="+encodeURIComponent(i))}return n.join("&")},reset:function(){this.data={}}},ye={show:function(){return this.addClass("cbh-show"),this.removeClass("cbh-hide"),this},hide:function(){return this.addClass("cbh-hide"),this.removeClass("cbh-show"),this},focus:function(){return this.elements[0]&&this.elements[0].focus(),this},prepend:function(e){if(!this.elements[0]||!e)return this;if("[SweetyElement]"===e.toString())e.elements.forEach(function(e){var t=this.elements[0].children[0]?this.elements[0].children[0]:null;this.elements[0].insertBefore(e,t)}.bind(this));else{var t=this.elements[0].children[0]?this.elements[0].children[0]:null;this.elements[0].insertBefore(e,t)}return this},width:function(){return this.elements[0]?this.elements[0].offsetWidth:null},height:function(){return this.elements[0]?this.elements[0].offsetHeight:null},getComputedStyle:function(){return window.getComputedStyle(this.elements[0],null)}},_e=function(){function e(e){var t,n,i,o="",r=0;for(t=e.split(/(%(?:D0|D1)%.{2})/),n=t.length;n>r;r++){try{i=decodeURIComponent(t[r])}catch(a){i=t[r]}o+=i}return o}var t=function(){var t=document.cookie.split(";"),n={};return t.forEach(function(t){if(t=t.split("="),2===t.length){var i=decodeURIComponent(t[0].trim()),o=e(t[1].trim());try{o=JSON.parse(o)}catch(r){}n[i]=o}}),n},n=function(e){var t=new Date;return t.setDate(t.getDate()+e),t.toUTCString()},i={expires:n(365),path:"/"};return{get:function(e){return t()[e]},set:function(e,t,o){e=encodeURIComponent(e),t=encodeURIComponent(JSON.stringify(t)),o=o||{},void 0!=o.expires?"number"==typeof o.expires?o.expires=n(o.expires):o.expires instanceof Date&&(o.expires=o.expires.toUTCString()):o.expires=i.expires,o.path=i.path;var r=[e+"="+t];for(var a in o){var s=a,c=o[a];c!==!0&&(s+="="+c),r.push(s)}document.cookie=r.join(";")},"delete":function(e){this.save(e,"",{expires:-1})}}}();h.prototype.add=function(e,t){if(!this._canPlay)return this;var n=new Audio;return n.volume=.1,n.preload="auto",n.src=this._path+t,this._sounds[e]=n,this},h.prototype.play=function(e){this._canPlay&&this._sounds[e]&&!this._muted&&this._sounds[e].play()},h.prototype.mute=function(){this._muted=!0},h.prototype.unmute=function(){this._muted=!1};var we,xe,ke,Ce,Se,Te=0,Ee=0,Ne=0,Me=60,Ie=!1,Ae=!0,Oe=!1,Be=!1,De=!1,Re=!1,Le=!0,Pe=!1,je=!1,He="cdn.callbackhunter.com",Ue="callbackhunter.com",ze="https://callbackhunter.com",We=1.3,qe=null,Fe=null,Ye=null,Ve=180,Xe=!1,Je=26,$e=0,Ke=!1,Ge=null,Qe="",Ze="",et=!0,tt=!1,nt=0,it=null,ot=0,rt=18,at=null,st=0,ct=!0,lt=!0,ht="",ut=!1,dt="",pt="",ft=null,mt="night",bt=function(){},gt=null,vt=!0,yt=0,_t=null,wt=navigator.userAgent.toLowerCase(),xt=wt.indexOf("opera")>-1,kt=!xt&&wt.indexOf("msie")>-1,Ct=!document.compatMode&&!kt||xt?(document.parentWindow||document.defaultView).innerWidth:"CSS1Compat"==document.compatMode?document.documentElement.clientWidth:document.body.clientWidth,St=!document.compatMode&&!kt||xt?(document.parentWindow||document.defaultView).innerHeight:"CSS1Compat"==document.compatMode?document.documentElement.clientHeight:document.body.clientHeight,Tt=90,Et=100,Nt="",Mt=!0,It={},At={},Ot=!1,Bt=!1,Dt=!1,Rt=!1,Lt=!1,Pt=new h({hollow:!0}),jt=5,Ht=null,Ut="f0f0f0",zt=1,Wt=2526,qt=2155,Ft=484,Yt=!1,Vt=null,Xt=function(){};Xt.prototype._=function(e){return"undefined"==typeof e?"":e},Xt.prototype.about_mobile=function(e){return e=e||{},'<div class="cbh-mobile-logo"></div><div class="cbh-normal-text cbh-typing cbh-mobile-about">Мы создали новый стандарт быстрой<br> связи клиента с компанией.<br><br>Через синюю кнопку связи вы ровно<br> за 8 секунд дозвонитесь в любую<br> компанию мира.<br><br>Освободите часть своего времени<br> и посвятите его близким.<br><br>Посетите наш сайт <a href="http://callbackhunter.com" target="_blank">callbackhunter.com</a></div>'},Xt.prototype.main=function(e){e=e||{};var t=this,n=Ce;return'<div id="cbh_widget_wrapper"><div class="cbh-widget cbh-fast" id="cbh_phone"><div class="cbh-widget-global-icon"><div class="cbh-widget-bg"><span class="cbh-bg-icon"></span></div><div class="cbh-widget-content"><div class="cbh-widget-phone cbh-rotate-icon"><span class="cbh-widget-phone-icon"></span></div><div class="cbh-widget-call"><span class="cbh-widget-call-icon"></span></div><div class="cbh-widget-rating"><span class="cbh-widget-rating-value">'+t._(e.rating)+'</span><span class="cbh-widget-rating-icon"></span></div><div class="cbh-widget-logo"><span class="cbh-widget-logo-icon"></span></div></div></div></div><div class="cbh" id="cbh_container"><div class="cbh-background"><div class="cbh-blured"></div><div class="cbh-faded"></div></div><div class="cbh-arrow"><div class="cbh-arrow-wrapper"><div class="cbh-arrow-part"></div><div class="cbh-arrow-part cbh-bottom"></div></div></div><div class="cbh-body"><div class="cbh-x" id="cbh-x"></div><div class="cbh-icons"><div class="cbh-icon cbh-icon-phone cbh-active cbh-icon-anim1"><div class="cbh-img"></div><div class="cbh-text">'+t._(n.cbh_now)+'</div></div><div class="cbh-icon cbh-icon-dialog cbh-icon-anim2"><div class="cbh-img"></div><div class="cbh-text">'+t._(n.cbh_tomorrow)+'</div></div><div class="cbh-icon cbh-icon-subscribe cbh-icon-anim3"><div class="cbh-img"></div><div class="cbh-text">'+t._(n.cbh_forever)+'</div></div></div><div class="cbh-wrapper"><div class="cbh-item cbh-show" style="height: 253px;" id="cbh_item_call"><div class="cbh-text"><div id="cbh_status" class="cbh-status cbh-big-text cbh-typing j-cbh-big-text-now">Мы перезвоним вам <br />за '+t._(e.countdown)+' сек. Засекайте!</div><input type="text" class="cbh-input" id="cbh_phone_input" value="'+t._(e.client_phone)+'" placeholder="Введите ваш номер" maxlength="18" /><div class="cbh-button" id="cbh_send" style="margin-bottom: 15px">Жду звонка!</div><div class="cbh-timer cbh-clear" id="cbh_timer"></div><div id="cbh_info" class="cbh-info"></div><div class="cbh-item-later" id=""><span class="cbh-item-later__link" href="">Выбрать удобное время звонка</span></div></div></div><div class="cbh-item" style="height: 253px;" id="cbh_item_call_deferred"><div class="cbh-text"><div class="cbh-big-text cbh-typing j-cbh-big-text-later" id="cbh_item_call_deferred_head"></div><div class="cbh-normal-text cbh-typing" id="cbh_item_call_deferred_text"></div><div class="cbh-deferred"><div class="cbh-deferred__day"><span class="cbh-deferred__day-val">сегодня</span><div class="cbh-timer-sel cbh-hide" id="cbh_timer_sel_day"><ul class="cbh-timer-sel__hold cbh-timer-sel__hold__day"></ul></div></div><span class="cbh-deferred__sep"> в </span><div class="cbh-deferred__hour"><span class="cbh-deferred__hour-val">21:00</span><div class="cbh-timer-sel cbh-hide" id="cbh_timer_sel_hour"><ul class="cbh-timer-sel__hold cbh-timer-sel__hold__hour"></ul></div></div></div><input type="text" class="cbh-input" id="cbh_phone_input_deferred" value="'+t._(e.client_phone)+'" placeholder="Введите ваш номер" maxlength="18" /><div class="cbh-button" id="cbh_send_deferred">Жду звонка!</div><div class="cbh-info" id=\'cbh_deferred_info\'></div></div></div><div class="cbh-item" id="cbh_item_call_rating" style="height: 200px;"><div class="cbh-text"><div class="cbh-big-text cbh-typing">— Сообщите нам,</div><div class="cbh-normal-text cbh-typing">насколько вам понравилось общение с менеджером?</div><ul class="cbh-call-rating"><li><a href="#" id="cbh_call_rating_1" data-value="1">1</a></li><li><a href="#" id="cbh_call_rating_2" data-value="2">2</a></li><li><a href="#" id="cbh_call_rating_3" data-value="3">3</a></li><li><a href="#" id="cbh_call_rating_4" data-value="4">4</a></li><li><a href="#" id="cbh_call_rating_5" data-value="5">5</a></li></ul></div></div><div class="cbh-item" id="cbh_item_dialog" style="height: 253px;"><div class="cbh-text" id="cbh_item_dialog_content" ></div></div><div class="cbh-item" id="cbh_chat" style="height: 60%;"><div class="cbh-text"><div class="cbh-big-text cbh-centered cbh-typing">Мгновенный чат</div><div class="cbh-normal-text cbh-centered cbh-typing">Общайтесь. Делитесь. Пишите.</div></div><div class="cbh-chat"><div class="cbh-messages"><div class="cbh-messages-wrapper"><div id="cbh_chat_messages" class="cbh-messages-scrollable"></div></div></div><div class="cbh-chat-input"><input type="text" class="cbh-input" id="cbh_chat_msg" placeholder="Напишите сообщение и нажмите Enter" /><div class="cbh-btn" id="cbh_chat_send">Отправить</div></div></div></div></div><div class="cbh-powered-by">'+t._(n.cbh_powered_by)+'</div></div><div class="cbh-branding"></div></div></div><div><div class="cbh-banner-bg"></div></div>'},Xt.prototype.mobile=function(e){e=e||{};var t=this;return'<div id="cbh_mobile_widget_wrapper"><div class="cbh-mobile-phone-wrapper" id="cbh_mobile_phone_wrapper"><div class="cbh-mobile-widget" id="cbh_phone"><div class="cbh-widget-global-icon"><div class="cbh-widget-bg"><span class="cbh-bg-icon"></span></div><div class="cbh-widget-content"><div class="cbh-widget-phone cbh-rotate-icon"><span class="cbh-widget-phone-icon"></span></div><div class="cbh-widget-call"><span class="cbh-widget-call-icon"></span></div></div></div></div></div><div class="cbh-mobile-body cbh-mobile-daily cbh-mobile-white" id="cbh_mobile_widget"><div class="cbh-mobile-arrow" id="cbh_mobile_close"></div><div class="cbh-wrapper"><div class="cbh-item" id="cbh_mobile_item_call"><div class="cbh-mobile-steps cbh-mobile-step-1"><div class="cbh-big-text cbh-typing" id="cbh_status">— Мы перезвоним вам<br>за '+t._(e.countdown)+' секунд. Засекайте!</div><input type="tel" placeholder="Мобильный телефон" id="cbh_phone_input" value="'+t._(e.client_phone)+'"><input type="submit" value="Жду звонка" id="cbh_send"><div class=\'cbh-link\'><a href="#" id="cbh_mobile_call_later">Выбрать удобное время для звонка</a></div><div class="cbh-mobile-timer" id="cbh_timer"></div></div></div><div class="cbh-item" id="cbh_mobile_item_call_status"><div class="cbh-mobile-steps cbh-mobile-step-1-2"><div class="cbh-big-text cbh-typing">— Я вам уже звоню,<br> готовьтесь взять трубку.</div><div class="cbh-mobile-timer">00:07:24</div></div></div><div class="cbh-item" id="cbh_item_dialog"><div class="cbh-mobile-steps" id="cbh_item_dialog_content"></div></div><div class="cbh-item"><div class="cbh-mobile-steps cbh-mobile-step-1-3"><div class="cbh-big-text cbh-typing">— Вызов уже идет. Почему<br> вы не берете трубку...</div><div class="cbh-mobile-timer">00:04:55</div></div></div><div class="cbh-item" id="cbh_mobile_item_edit_number"><div class="cbh-mobile-steps cbh-mobile-step-1-4"><div class="cbh-big-text cbh-typing">— Давайте перепроверим<br> номер вашего телефона.</div><input type="tel" placeholder="+7 (917) 777-28-18"><input type="submit" value="Жду звонка"><div class="cbh-mobile-timer">00:00:00</div></div></div><div class="cbh-item" id="cbh_mobile_item_aftercall"><div class="cbh-mobile-steps cbh-mobile-step-2"><div class="cbh-big-text cbh-typing small">— Скажите, вам удалось<br> связаться с менеджером?</div><input type="button" id="cbh_mobile_item_aftercall_yes" value="Да, поговорили"><input type="button" id="cbh_mobile_item_aftercall_no" value="Нет"><p class="cbh-mobile-skip"><a href="#" id="cbh_mobile_item_aftercall_skip">Пропустить</a></p></div></div><div class="cbh-item" id="cbh_item_call_rating"><div class="cbh-mobile-steps cbh-mobile-step-3"><div class="cbh-big-text cbh-typing">— Сообщите нам,</div><div class="cbh-normal-text cbh-typing">насколько вам понравилось общение с менеджером?</div><ul class="cbh-call-rating"><li><a href="#" id="cbh_call_rating_1" data-value="1">1</a></li><li><a href="#" id="cbh_call_rating_2" data-value="2">2</a></li><li><a href="#" id="cbh_call_rating_3" data-value="3">3</a></li><li><a href="#" id="cbh_call_rating_4" data-value="4">4</a></li><li><a href="#" id="cbh_call_rating_5" data-value="5">5</a></li></ul></div></div><div class="cbh-item" id="cbh_mobile_item_afterrating"><div class="cbh-mobile-steps cbh-mobile-step-4"><div class="cbh-big-text cbh-typing small">— Окей, учтем оценку.</div><div class="cbh-normal-text cbh-typing">Кстати, хотите, при звонках к вам<br> будут обращаться по имени?</div><input type="text" placeholder="Ваше имя и отчество"><input type="submit" value="Будем знакомы!"><p class="cbh-mobile-skip"><a href="#" id="cbh_mobile_item_afterrating_skip">Пропустить</a></p></div></div><div class="cbh-item" id="cbh_mobile_item_records"><div class="cbh-mobile-steps cbh-mobile-step-5"><div class="cbh-big-text cbh-typing small">— %name%,</div><div class="cbh-normal-text cbh-typing">еще могу высылать вам на email<br> записи всех ваших разговоров с<br> компанией?</div><input type="email" placeholder="mail@example.com"><input type="submit" value="Получать записи"><p class="cbh-mobile-skip"><a href="#" id="cbh_mobile_item_records_skip">Пропустить</a></p></div></div><div class="cbh-item" id="cbh_mobile_item_socials"><div class="cbh-mobile-steps cbh-mobile-step-6"><div class="cbh-big-text cbh-typing small">— %name%,</div><div class="cbh-normal-text cbh-typing">буду рад, если вы обсудите наш<br> сервис с друзьями в соцсетях :)</div><div class="cbh-mobile-socials cbh-mobile-tbl"><p><a href="#"><i class="fa fa-facebook-square"></i></a></p><p><a href="#"><i class="fa fa-vk"></i></a></p><p><a href="#"><i class="fa fa-twitter"></i></a></p></div></div></div><div class="cbh-item" id="cbh_mobile_item_fail"><div class="cbh-mobile-steps cbh-mobile-step-7"><div class="cbh-big-text cbh-typing small">— Упс... Это форс-мажор. </div><div class="cbh-normal-text cbh-typing">Я уже отправил SMS+email жалобу<br> гендиректору. Давайте я буду сам до-<br> званиваться менеджерам. Как только<br> они поднимут трубку, я подключу вас.<br> Окей?</div><input type="button" value="Окей" id="cbh_mobile_item_fail_reverse"><p class="cbh-mobile-skip" id="cbh_mobile_item_fail_skip"><a href="#">Нет, спасибо</a></p></div></div><div class="cbh-item" id="cbh_mobile_item_reverse"><div class="cbh-mobile-steps cbh-mobile-step-8"><div class="cbh-big-text cbh-typing small">— Договорились!</div><div class="cbh-normal-text cbh-typing">Когда менеджер будет на месте, я<br> с вами свяжусь. Успешного дня!</div><div class="cbh-mobile-socials cbh-mobile-tbl"><p><a href="#"><i class="fa fa-facebook-square"></i></a></p><p><a href="#"><i class="fa fa-vk"></i></a></p><p><a href="#"><i class="fa fa-twitter"></i></a></p></div></div></div><div class="cbh-item" id="cbh_mobile_item_toobad"><div class="cbh-mobile-steps cbh-mobile-step-9"><div class="cbh-big-text cbh-typing small">— Печально... </div><div class="cbh-normal-text cbh-typing">Я сделал все что мог. В любом<br> случае успешного дня :)</div><div class="cbh-mobile-socials cbh-mobile-tbl"><p><a href="#"><i class="fa fa-facebook-square"></i></a></p><p><a href="#"><i class="fa fa-vk"></i></a></p><p><a href="#"><i class="fa fa-twitter"></i></a></p></div></div></div><div class="cbh-item"><div class="cbh-mobile-steps cbh-mobile-step-1"><div class="cbh-big-text cbh-typing">— Закажите звонок. Мы вам перезвоним.</div><input type="tel" placeholder="Мобильный телефон"><input type="submit" value="Жду звонка"><span>Мы отправим SMS с вашим номером менеджерам<br> и начальнику отдела продаж. Они вам перезвонят.</span></div></div><div class="cbh-item"><div class="cbh-mobile-steps cbh-mobile-step-2"><div class="cbh-big-text cbh-typing">— Звонок заказан.</div><div class="cbh-normal-text cbh-typing">Кстати, хотите, при звонках к вам<br> будут обращаться по имени?</div><input type="text" placeholder="Ваше имя и отчество"><input type="submit" value="Будем знакомы!"><p class="cbh-mobile-skip"><a href="#">Пропустить</a></p></div></div><div class="cbh-item"><div class="cbh-mobile-steps cbh-mobile-step-3"><div class="cbh-big-text cbh-typing">— Ожидайте звонка!</div><div class="cbh-normal-text cbh-typing">%name%, обсудите наш сервис с друзьями в соцсетях :)</div><div class="cbh-mobile-socials cbh-mobile-tbl"><p><a href="#"><i class="fa fa-facebook-square"></i></a></p><p><a href="#"><i class="fa fa-vk"></i></a></p><p><a href="#"><i class="fa fa-twitter"></i></a></p></div></div></div><div class="cbh-item"><div class="cbh-mobile-logo"></div><div class="cbh-mobile-about"><p>Мы создали новый стандарт быстрой<br> связи клиента с компанией.</p><p>Через синюю кнопку связи вы ровно<br> за 8 секунд дозвонитесь в любую<br> компанию мира.</p><p>Освободите часть своего времени<br> и посвятите его близким.</p><p>Посетите наш сайт <a href="#">callbackhunter.com</a></p><p class="cbh-mobile-skip"><a href="#">Закрыть</a></p></div></div><div class="cbh-item"><div class="cbh-mobile-steps cbh-mobile-step-2"><div class="cbh-big-text cbh-typing">— Укажите номер вашего мобильного телефона</div><input type="tel" placeholder="Мобильный телефон"><input type="submit" value="Жду звонка"></div></div><div class="cbh-item"><div class="cbh-mobile-steps cbh-mobile-step-3"><div class="cbh-big-text cbh-typing">— Звонок заказан.</div><div class="cbh-normal-text cbh-typing">Кстати, хотите, при звонках к вам<br> будут обращаться по имени?</div><input type="text" placeholder="Ваше имя и отчество"><input type="submit" value="Будем знакомы!"><p class="cbh-mobile-skip"><a href="#">Пропустить</a></p></div></div><div class="cbh-item"><div class="cbh-mobile-steps cbh-mobile-step-4"><div class="cbh-big-text cbh-typing">— %name%,</div><div class="cbh-normal-text cbh-typing">еще могу высылать вам на email<br> записи всех ваших разговоров с<br> компанией?</div><input type="email" placeholder="mail@example.com"><input type="submit" value="Получать записи"><p class="cbh-mobile-skip"><a href="#">Пропустить</a></p></div></div><div class="cbh-item"><div class="cbh-mobile-steps cbh-mobile-step-5"><div class="cbh-big-text cbh-typing">— %name%,</div><div class="cbh-normal-text cbh-typing">буду рад, если вы обсудите наш<br> сервис с друзьями в соцсетях :)</div><div class="cbh-mobile-socials cbh-mobile-tbl"><p><a href="#"><i class="fa fa-facebook-square"></i></a></p><p><a href="#"><i class="fa fa-vk"></i></a></p><p><a href="#"><i class="fa fa-twitter"></i></a></p></div></div></div><div class="cbh-item" id="cbh_mobile_deferred"><div class="cbh-mobile-steps cbh-mobile-step-1"><div class="cbh-big-text cbh-typing" id="cbh_mobile_deferred_text"></div><div class="cbh-mobile-time" id="cbh_mobile_time_select"></div></div></div></div><div class="cbh-mobile-pwrd">Powered by <a href="http://callbackhunter.com/free?utm_source=widget" target="_blank" id="cbh_about_link">CallbackHunter</a></div></div></div><div class="cbh-banner-bg"></div>';

},Xt.prototype.socials=function(e){e=e||{};var t=this;return'<div class="cbh-just-block"><a href="http://callbackhunter.com/blog/?page_id=2292" class="cbh-button" style="text-decoration: none;">'+t._(e.loveHateText)+'</a><div class="cbh-normal-text cbh-centered" id="cbh_social_text">'+t._(e.text)+'</div><div class="cbh-social-block"><div class="cbh-social-icons cbh-vk"><a href="http://vkontakte.ru/share.php?url=http://callbackhunter.com" id="cbh_social_vk"></a><div class="cbh-social-count" id="cbh_social_vk_count">'+t._(e.VK_default_count)+'</div></div><div class="cbh-social-icons cbh-fb"><a href="http://www.facebook.com/sharer.php?u=http://callbackhunter.com" id="cbh_social_fb"></a><div class="cbh-social-count" id="cbh_social_fb_count">'+t._(e.Facebook_default_count)+'</div></div><div class="cbh-social-icons cbh-tw"><a href="http://twitter.com/share?text=CallbackHunter&url=http://callbackhunter.com" id="cbh_social_tw"></a><div class="cbh-social-count" id="cbh_social_tw_count">'+t._(e.Twitter_default_count)+"</div></div></div></div>"};var Jt=new Xt;It.en={longName:"english",items:{cbh_powered_by:'<a href="http://callbackhunter.com/free?utm_source=widget" class="cbh-powered-by-link" target="_blank">New communication standard by&nbsp;callbackhunter.com</a>',free_cbh_powered_by:'<a href="http://callbackhunter.com/free?utm_source=widget" class="cbh-powered-by-link" target="_blank">New communication standard by&nbsp;callbackhunter.com (free version)</a>',clbh_banner_work_to:'<a target="blank" id="clbh_banner_work_to_link" href="http://callbackhunter.com?utm_source=widget">New communication standard by technology CallbackHunter.com</a>',cbh_send_called:"I have a call",cbh_now:"Call",cbh_tomorrow:this.cbh_chat,cbh_chat:"Chat",cbh_dialog:"Dialog",cbh_forever:"E-mail",clbh_stat_wrong_number:'<span class="callback_ch_small">Enter the correct number</span>',clbh_banner_h1_aftercall:"We made it? <br> Tell about this experience to your friends!",clbh_banner_h1_aftercall_wrong_time:"Unfortunately, the working day has ended.<br>Try to call later.",clbh_banner_h1_aftercall_many_attempts:"You have already get the request for a specified time.",clbh_banner_h1_aftercall_other_error:"Technical error.",clbh_stat_aftercall:'<div class="clbh_stat1"><span id="clbh_no_time">No, I was not called back in time!</span><br/>In this case, the widget CallbackHunter will send email + SMS-complaint to the head of Sales.</div><div class="clbh_stat2" id="clbh_stat2">Complaint sent!<br/>Thank you for helping service <a href="http://callbackhunter.com" target="_blank">CallbackHunter </a> <br/> making customers happier.</div>',clbh_stat_show_stat:"Free operators on the line: {0} <br> During conversations with clients: {1} <br> Calls served today: {2}",clbh_banner_h1_enter_first:"Hi! <br> Have you visited us for the first time?",clbh_banner_content_enter_first:'<div><button class="clbh_banner-button" id="clbh_button_1">First time!</button><button class="clbh_banner-button clbh_large" id="clbh_button_2">I`ve visited you before</button></div>',clbh_banner_h1_second_left:"You are here for the 1st time, so let us call you back and tell you about the special offer you won't find on the site! Don't you think it's fun?",clbh_banner_content_second_left:'<div><button class="clbh_banner-button" id="clbh_button_1">First time!</button><button class="clbh_banner-button clbh_large" id="clbh_button_2">Thank you, I\'ll pass</button></div>',clbh_banner_h1_second_right:"You are our regular guest, we suggest to phone you to talk about the action not available for beginners. Agree it's fun?",clbh_banner_content_second_right:'<div><button class="clbh_banner-button" id="clbh_button_1">It\'s fun!</button><button class="clbh_banner-button clbh_large" id="clbh_button_2">Thank you, I\'ll just stay</button></div>',clbh_banner_h1_enter_last:"Cool, we will call you in {0} sec. Count the time!",clbh_banner_h1_enter_last_nominutes:"Cool, we will call you.",clbh_banner_h1_enter_last_night:"Great! Let us call you back after {0} h {1} min, when we will be in the office?",clbh_banner_h1_exit_first:"You have spent {0} {1} on our site. Did you find what you were looking for?",clbh_banner_content_exit_first:'<div><button class="clbh_banner-button" id="clbh_button_1">Yes!</button><button class="clbh_banner-button" id="clbh_button_2">No</button></div>',clbh_stat_exit_first:"We sincerely appreciate you and your stay. Your opinion is important to us to become better.",clbh_banner_h1_exit_last_1:"We are very pleased. Let us call you back in {0} seconds and discuss the details?",clbh_banner_h1_exit_last_1_nominutes:"We are very pleased. Let us call you back and discuss the details?",clbh_banner_h1_exit_last_1_night:"Great! Let us call you back after {0} h {1} min, when we will be in the office to discuss the details?",clbh_banner_h1_exit_last_2:"We are sorry. Let us save you time and call you back free of charge in {0} seconds?",clbh_banner_h1_exit_last_2_nominutes:"We are sorry. Let us save you time and call back you free of charge?",clbh_banner_h1_exit_last_2_night:"We are sorry. Let us call you back for free after {0} h {1} min, when we will be in the office to help you with search?",clbh_banner_h1_simple:"Would you like a callback in {0} seconds?",clbh_banner_h1_simple_nominutes:"Would you like a callback?",clbh_banner_h1_simple_night:"Let us call you back after {0} h {1} min, when we will be in the office?",clbh_banner_choose_office:"Select the division from which you will be called back: ",phone_form:'<div class="clbh_phone_line" id="clbh_phone_line"><input class="clbh_banner-textbox" type="text" placeholder="Enter your number" id="clbh_phone" value="" maxlength="18"><button class="clbh_banner-button" id="clbh_send">Call me!</button></div>',phone_mob_form:'<div class="clbh_mob_phone_line" id="clbh_mob_phone_line"><input class="clbh_mob_banner-textbox" type="text" placeholder="Enter your number" id="clbh_mob_phone" value="" maxlength="18"><button class="clbh_mob_banner-button" id="clbh_mob_send">Call me!</button></div>'}},It.ru={longName:"russian",items:{cbh_powered_by:'<a href="http://callbackhunter.com/free?utm_source=widget" class="cbh-powered-by-link" target="_blank">Cтандарт связи будущего от&nbsp;callbackhunter.com</a>',free_cbh_powered_by:'<a href="http://callbackhunter.com/free?utm_source=widget" class="cbh-powered-by-link" target="_blank">Бесплатная sms-версия стандарта связи от&nbsp;callbackhunter.com</a>',cbh_now:"Звонок",cbh_tomorrow:this.cbh_chat,cbh_chat:"Чат",cbh_dialog:"Диалог",cbh_forever:"Письмо",cbh_send_called:"Мне позвонили",clbh_stat_wrong_number:'<span class="callback_ch_small">Введите корректный номер</span>',clbh_banner_h1_aftercall:"Мы успели? <br> Расскажите об этом опыте друзьям!",clbh_banner_h1_aftercall_wrong_time:"К сожалению, сейчас нерабочее время.<br>Попробуйте позвонить позднее.",clbh_banner_h1_aftercall_many_attempts:"Вы уже оставили заявку на указанное время.",clbh_banner_h1_aftercall_other_error:"Техническая ошибка.",clbh_stat_aftercall:'<div class="clbh_stat1"><span id="clbh_no_time">Нет, не успели!</span><br/>В этом случае виджет CallbackHunter отправит<br/>email и SMS-жалобу начальнику отдела продаж</div><div class="clbh_stat2" id="clbh_stat2">Жалоба отправлена!<br/>Спасибо, что помогаете сервису <a href="http://callbackhunter.com" target="_blank">CallbackHunter</a><br/>делать клиентов счастливее.</div>',clbh_stat_show_stat:"Свободных операторов на линии: {0} <br> В процессе разговора с клиентами: {1} <br> Обслуженных вызовов за сегодня: {2}",clbh_banner_h1_enter_first:"Добрый день! <br> Вы у нас впервые?",clbh_banner_content_enter_first:'<div><button class="clbh_banner-button" id="clbh_button_1">Впервые!</button><button class="clbh_banner-button" id="clbh_button_2">Бывали и раньше!</button></div>',clbh_banner_h1_second_left:"Вы у нас 1-й раз, мы готовы по телефону рассказать о льготных условиях, недоступных на сайте. Согласитесь, это интересно?",clbh_banner_content_second_left:'<div><button class="clbh_banner-button" id="clbh_button_1">Интересно!</button><button class="clbh_banner-button clbh_large" id="clbh_button_2">Спасибо, я так посижу</button></div>',clbh_banner_h1_second_right:"Вы наш постоянный гость, мы готовы по телефону рассказать об акции, недоступной для новичков. Согласитесь, это интересно?",clbh_banner_content_second_right:'<div><button class="clbh_banner-button" id="clbh_button_1">Интересно!</button><button class="clbh_banner-button clbh_large" id="clbh_button_2">Спасибо, я так посижу</button></div>',clbh_banner_h1_enter_last:"Отлично, мы перезвоним вам за {0}. Засекайте!",clbh_banner_h1_enter_last_nominutes:"Отлично, мы перезвоним вам.",clbh_banner_h1_enter_last_night:"Отлично! Давайте мы перезвоним вам в <br>рабочее время через {0} ч. {1} мин?",clbh_banner_h1_exit_first:"Bы были у нас на сайте {0} {1} сек. Вы нашли то, что искали?",clbh_banner_content_exit_first:'<div><button class="clbh_banner-button" id="clbh_button_1">Да!</button><button class="clbh_banner-button" id="clbh_button_2">Нет</button></div>',clbh_stat_exit_first:"Мы искренне ценим вас. Нам важно ваше мнение, чтобы стать лучше.",clbh_banner_h1_exit_last_1:"Мы очень рады. Давайте мы перезвоним вам за {0} сек. и обсудим детали?",clbh_banner_h1_exit_last_1_nominutes:"Мы очень рады. Давайте мы перезвоним вам и обсудим детали?",clbh_banner_h1_exit_last_1_night:"Супер! Давайте мы перезвоним вам в рабочее <br>время через {0} ч. {1} мин. и обсудим детали?",clbh_banner_h1_exit_last_2:"Нам жаль. Давайте сэкономим ваше время<br /> и перезвоним вам бесплатно за {0}?",clbh_banner_h1_exit_last_2_nominutes:"Нам жаль. Давайте сэкономим ваше время<br /> и перезвоним вам бесплатно?",clbh_banner_h1_exit_last_2_night:"Нам жаль. Да и мы сейчас не в офисе. <br> Давайте мы перезвоним и поможем вам <br> с поиском через {0} ч. {1} мин?",clbh_banner_h1_simple:"Хотите, перезвоним вам за {0}?",clbh_banner_h1_simple_nominutes:"Хотите, мы вам перезвоним?",clbh_banner_h1_simple_night:"К сожалению, мы не в офисе. Давайте мы перезвоним вам в <br> рабочее время через {0} ч. {1} мин?",clbh_banner_choose_office:"Вы можете выбрать подразделение, из которого вам перезвонят: ",phone_form:'<div class="clbh_phone_line" id="clbh_phone_line"><input class="clbh_banner-textbox" type="text" placeholder="Введите ваш телефон" id="clbh_phone" value="" maxlength="18"><button class="clbh_banner-button" id="clbh_send">Жду звонка!</button></div>',phone_mob_form:'<div class="clbh_mob_phone_line" id="clbh_mob_phone_line"><input class="clbh_mob_banner-textbox" type="text" placeholder="Введите ваш телефон" id="clbh_mob_phone" value="" maxlength="18"><button class="clbh_mob_banner-button" id="clbh_mob_send">Жду звонка!</button></div>'}};var $t,Kt=l(ye),Gt=!1,Qt={init:function(){var e=this;this.routes="undefined"!=typeof Pe&&Pe?{callNow:".cbh-icon-anim1",intro:".cbh-icon-anim2",contactForm:".cbh-icon-anim3"}:{callNow:".cbh-icon-anim1",chat:".cbh-icon-anim2",contactForm:".cbh-icon-anim3"},Object.keys(this.routes).forEach(function(t){Kt(e.routes[t]).on("click",function(){Gt=!0,rn[t](),Gt=!1})})},activate:function(e){on.isMobile()||(Kt(".cbh-icon").removeClass("cbh-active"),Kt(this.routes[e]).addClass("cbh-active"))}},Zt={addEvents:function(){ut?(Kt("#cbh_about_link").on("click",rn.aboutMobile),Kt("#cbh_mobile_call_later").on("click",rn.callLaterMobileAction)):(Kt(e).on("resize",function(){on.setWrapperH()}).on("scroll",function(){var e=on.viewportSize(),t=on.getScrollTop();Kt("#cbh_canvas").css({"-webkit-transform":"translatey(-"+t+"px)","-moz-transform":"translatey(-"+t+"px)",transform:"translatey(-"+t+"px)",width:e.width})}),Qt.init(),Kt(".cbh-deferred__day").on("click",function(e){Kt("#cbh_timer_sel_day").toggleClass("cbh-hide"),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}),Kt(".cbh-deferred__hour").on("click",function(e){Kt("#cbh_timer_sel_hour").toggleClass("cbh-hide"),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}),Kt("#cbh_container").on("click",function(){Kt("#cbh_timer_sel_day").addClass("cbh-hide"),Kt("#cbh_timer_sel_hour").addClass("cbh-hide")}),Kt(".cbh-timer-sel__hold__day").on("click",function(e){var t=Kt(e.target||e.srcElement),n=Kt(".cbh-deferred__hour-val");return on.fillDeferredSelectors(t.html()),Kt(".cbh-deferred__day-val").html(t.html()).attr("data-day",t.attr("data-day")),on.freeMode()&&(Kt("#cbh_send_deferred_day_container").html(on.capitalizeFirstLetter(t.html())),Kt("#cbh_send_deferred_hour_container").html(" в "+n.html()),"в ближайшее время"===t.html()?Kt("#cbh_send_deferred_hour_container").hide():Kt("#cbh_send_deferred_hour_container").show()),!1}),Kt(".cbh-timer-sel__hold__hour").on("click",function(e){var t=Kt(e.target||e.srcElement);return Kt(".cbh-deferred__hour-val").html(t.html()),on.freeMode()&&Kt("#cbh_send_deferred_hour_container").html(" в "+t.html()),!1}),on.fillDeferredSelectors(),Kt(".cbh-item-later__link").on("click",rn.callLaterAction),Kt(e).on("keydown",function(e){if(e.ctrlKey){var t=e.keyCode?e.keyCode:e.which?e.which:null;(52===t||54===t||112===t)&&("worktime"===mt?rn.chat():(j(),rn.okText()))}})),Kt("#cbh_phone_input").on("focus",function(){M("#cbh_phone_input")}).on("keypress",function(){M("#cbh_phone_input")}).on("keyup",function(e){return M("#cbh_phone_input"),13===e.which||13===e.keyCode?(X(),!1):!0}).on(["click","keypress","focus"],function(){sn.connect()}),Kt("#cbh_phone_input_deferred").on("focus",function(){M("#cbh_phone_input_deferred")}).on("keypress",function(){M("#cbh_phone_input_deferred")}).on("keyup",function(e){return M("#cbh_phone_input_deferred"),13===e.which||13===e.keyCode?(Y(),!1):!0}),Kt("#cbh_send").on("click",function(){X()})}},en={settings:{speed:[100,100],thinkSlow:3,mistakeSlow:8,mistakeChance:.01},getSpeed:function(){return this.settings.speed},setSpeed:function(e,t){this.settings.speed=[e,t]},timer:null,effect:function(e,t){var n=en;if(clearTimeout(en.timer),n.options=e||{},Ie||ut&&Ae)return void("function"==typeof t&&t());Array.prototype.slice.call(document.getElementsByClassName("cbh-cursor")).forEach(function(e){e.parentNode.removeChild(e)});var i=document.getElementsByClassName("cbh-wrapper")[0].getElementsByClassName("cbh-show")[0];if("undefined"!=typeof i){n.options.doNotReset||Array.prototype.slice.call(i.getElementsByClassName("cbh-typed")).forEach(function(e){e.className=e.className.replace("cbh-typed","cbh-typing")}),n.remaining=0,n.typed=!1,n.think=!1,n.mistake=!1;var o=Array.prototype.slice.call(i.getElementsByClassName("cbh-typing"));if("undefined"!=typeof o)if(o.forEach(n.typeIt),n.remaining>0){var r=n.settings,a=1e3/(r.speed[0]+r.speed[0]*Math.round(Math.random()*(r.speed[1]/r.speed[0]-1)));n.mistake?a=r.mistakeSlow*a:n.think&&(a=r.thinkSlow*a),n.timer=setTimeout(function(){n.effect({doNotReset:!0,mistake:n.mistake,noCursor:n.options.noCursor},t)},a)}else n.options.noCursor||"undefined"!=typeof o[o.length-1]&&(o[o.length-1].innerHTML+='<span class="cbh-cursor">_</span>'),"function"==typeof t&&t()}},typeIt:function(e){var t,n,i,o,r,a,s,c=en,l=Array.prototype.slice.call(e.getElementsByClassName("cbh-typing-tmp"));if(l.length>0){if(c.typed)return void c.remaining++;if(t=l[0],n=l[1],i=l[2],o=l[3],c.options.height&&(o.style.height=c.options.height+"px"),n.innerHTML="_",r=i.innerHTML,0==r.length)return;if(c.typed=!0,c.options.mistake)return c.think=!0,t.innerHTML=t.innerHTML.substr(0,t.innerHTML.length-1),void c.remaining++;if(Math.random()<c.settings.mistakeChance){c.mistake=!0;var h="йцукенгшщзхъфывапролджэячсмитьбюё".split("");return t.innerHTML+=h[Math.round(Math.random()*(h.length-1))],void c.remaining++}var u=0;a=r.substr(u,1),s=a,"<"==a&&!function p(){u++,a=r.substr(u,1),s+=a,">"!=a&&u<r.length&&p()}()," "==a&&(c.think=!0),t.innerHTML+=s,i.innerHTML=i.innerHTML.substr(u+1),i.innerHTML.length>0?c.remaining++:(e.innerHTML=o.innerHTML,e.className=e.className.replace("cbh-typing","cbh-typed"),e.style.height="",e.style.display="")}else{t=document.createElement("span"),n=document.createElement("span"),i=document.createElement("span"),o=document.createElement("span"),t.className=n.className=i.className=o.className="cbh-typing-tmp";var d=e.innerHTML;e.innerHTML="",i.innerHTML=d,o.innerHTML=d,i.style.cssText="display:none!important;",o.style.cssText="top: -10000px; position: absolute;",e.appendChild(t),e.appendChild(n),e.appendChild(i),e.appendChild(o),e.style.height=o.offsetHeight+"px",e.style.display="block",o.style.cssText="display:none!important;",c.typeIt(e)}}},tn={db_prefix:"cbh_db",browserTest:function(){try{return window.JSON&&window.JSON.parse&&window.JSON.stringify&&window.sessionStorage}catch(e){return!1}},saveStrVal:function(t,n,i){var o=i?"localStorage":"sessionStorage";if(!this.browserTest())return!1;try{e[o][this.db_prefix+"."+t]=n}catch(r){return!1}return!0},getStrVal:function(t,n){var i=n?"localStorage":"sessionStorage";if(!this.browserTest())return!1;try{return e[i][this.db_prefix+"."+t]}catch(o){return!1}},saveJSON:function(e,t){if(!this.browserTest())return!1;try{sessionStorage[this.db_prefix+"."+e]=window.JSON.stringify(t)}catch(n){return!1}return!0},getJSON:function(e){if(!this.browserTest())return!1;try{var t=sessionStorage[this.db_prefix+"."+e];return window.JSON.parse(t)}catch(n){return!1}},getIntVal:function(e){if(!this.browserTest())return!1;try{var t=parseInt(sessionStorage[this.db_prefix+"."+e],10);return isNaN(t)?0:t}catch(n){return!1}},setIntVal:function(e,t){if(!this.browserTest())return!1;t=parseInt(t),t=isNaN(t)?0:t;try{sessionStorage[this.db_prefix+"."+e]=t}catch(n){return!1}return!0}},nn={getTwitterCount:function(e,t){var n="https://cdn.api.twitter.com/1/urls/count.json?url="+encodeURIComponent(e)+"&callback={cb}";on.requestJSONP(n,function(e){try{t(e.count)}catch(n){}})},getFacebookCount:function(e,t){var n="https://graph.facebook.com/fql?q=SELECT+total_count+FROM+link_stat+WHERE+url%3D%22"+encodeURIComponent(e)+"%22&callback={cb}";on.requestJSONP(n,function(e){try{t(e.data[0].total_count)}catch(n){}})},getVKCount:function(e,t){var n="https://vk.com/share.php?act=count&index={index}&url="+encodeURIComponent(e);window.VK=window.VK||{},window.VK.Share=window.VK.Share||{},window.VK.Share.__count=window.VK.Share.__count||window.VK.Share.count||function(){},window.ClbhObject.__SLCallbacks=window.ClbhObject.__SLCallbacks||{},window.VK.Share.count=function(e,t){window.ClbhObject.__SLCallbacks[e]?window.ClbhObject.__SLCallbacks[e](t):window.VK.Share.__count(e,t)};var i=500+Math.floor(1e3*Math.random());window.ClbhObject.__SLCallbacks[i]=function(e){t(e),delete window.ClbhObject.__SLCallbacks[i]};var o=document.getElementsByTagName("head")[0],r=document.createElement("script");r.type="text/javascript",r.src=n.replace("{index}",i),r.async=!0,o.appendChild(r)},popupTwitterShare:function(e,t){on.popupWindow("https://twitter.com/intent/tweet?url="+encodeURIComponent(e)+"&text="+encodeURIComponent(t),600,450)},popupFacebookShare:function(e){on.popupWindow("https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(e),600,500)},popupVKShare:function(e,t){on.popupWindow("https://vk.com/share.php?url="+encodeURIComponent(e)+"&title="+encodeURIComponent(t),550,330)}},on={sheet:function(){var e=document.createElement("style");return e.appendChild(document.createTextNode("")),document.head.appendChild(e),e.sheet}(),addCSSRule:function(e,t,n){"insertRule"in on.sheet?on.sheet.insertRule(e+"{"+t+"}",n):"addRule"in on.sheet&&on.sheet.addRule(e,t,n)},addCSSRules:function(e){for(var t in e)e.hasOwnProperty(t)&&on.addCSSRule(t,e[t])},loadFonts:function(){var e=t.createElement("link");e.setAttribute("rel","stylesheet"),e.setAttribute("type","text/css"),e.setAttribute("href",("https:"===t.location.protocol?"https:":"http:")+"//fonts.googleapis.com/css?family=Roboto:100,300&subset=latin,cyrillic-ext"),t.getElementsByTagName("head")[0].appendChild(e)},makeQueryString:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")},sendData:function(t,n){var i={hcode:hunter_code,sid:_e.get("hunter_sid"),url:e.location.href,version:2,referer:Qe,entrance_page:Ze},o=[this.makeQueryString(i)];t&&o.push(this.makeQueryString(t)),n&&o.push(n),(new Image).src="//"+Ue+"/hunter/?"+o.join("&")},fillDeferredSelectorsMobile:function(e){if("string"==typeof e){for(var t,n,i,o=Kt(e).html(""),r=parseInt(Ge.time_connection),a=new Date,s=new Date(+a+1e3*r),c=on.workTime.getTimeUser(),l=on.workTime.getTimeUserDates(),h=s.getDay(),u=c[h].length>1?1:0,d=0;c[a.getDay()][d]<60*a.getHours();)d++;c[a.getDay()].splice(0,d);for(var d=0;4>d;d++){if(i="",u>=c[h].length){do h=(h+1)%7;while(0===c[h].length);u=c[h].length>1?1:0}t=h-a.getDay();var p=new Date(+a+1e3*r+24*(t-1)*60*60*1e3);p.setHours(Math.floor(c[h][u]/60)),p.setMinutes(0),n=Kt("<span class='cbh-mobile-time-select' data-ts='"+ +p+"'>"),i+=on.formatMinToHour(c[h][u]),0!==t&&(i+=1===t?"<div>завтра</div>":"<div>"+l[on.findInArray(l,function(e){return e.n===h})].s+"</div>"),n.html("<div>"+i+"</div>"),u+=2,o.append(n)}}},fillDeferredSelectors:function(e){var t=Kt(".cbh-timer-sel__hold__day");if(t.exists()){t.empty();var n=on.workTime.getTimeUserWords(),i=on.workTime.getTimeUserTimestamps(),o=on.workTime.getTimeUser(),r=(new Date).getHours(),a=(new Date).getDay(),s=!1;for(var c in o[a])o[a].hasOwnProperty(c)&&(60*r>=o[a][c]||(s=!0));var l,h="в ближайшее время";on.freeMode()&&t.append(Kt("<li><span data-day='-1'>"+h+"</span></li>"));var u=[];for(var d in n)n.hasOwnProperty(d)&&("сегодня"!==n[d].s||s)&&(u.push({t:i[d].d,s:n[d].s}),l&&e!==n[d].s||(l=n[d].n,Kt(".cbh-deferred__day-val").html(n[d].s).attr("data-day",i[d].d)));u=u.sort(function(e,t){return e.t>t.t});for(var d in u)u.hasOwnProperty(d)&&t.append(Kt("<li><span data-day='"+u[d].t+"'>"+u[d].s+"</span></li>"));var p="";if(t=Kt(".cbh-timer-sel__hold__hour"),t.exists()){if(e===h)return Kt(".cbh-deferred__sep").css({display:"none!important;"}),Kt(".cbh-deferred__hour").css({display:"none!important;"}),void Kt(".cbh-deferred__day").css({width:"210px!important;"});Kt(".cbh-deferred__sep").css({display:!1}),Kt(".cbh-deferred__hour").css({display:!1}),Kt(".cbh-deferred__day").css({width:!1}),t.empty();for(var c in o[l])if(o[l].hasOwnProperty(c)&&!(a==l&&60*r>=o[l][c])){var f=on.formatMinToHour(o[l][c]);t.append(Kt("<li><span>"+f+"</span></li>")),p||(p=f)}Kt(".cbh-deferred__hour-val").html(p)}}},showDialogItem:function(e){clearTimeout(this.animationReset),this.hideDialogItems();var t=Kt(e);t.show(),this.animationReset=setTimeout(function(){t.addStyle("opacity","0.1!important"),this.animationReset=setTimeout(function(){t.removeStyle("opacity")},10)},10)},hideDialogItems:function(){Kt(".cbh-item").removeClass("cbh-show"),Kt(".cbh-form").removeClass("cbh-show")},hideWidget:function(){Dt=!1,Fe=st,ut?(w("send","event","Callbackhunter_CLOSE_MOBILE","clicked"),_("Callbackhunter_CLOSE_MOBILE"),Kt("#cbh_mobile_widget").hide(),Kt(".cbh-banner-bg").hide(),se()):(w("send","event","Callbackhunter_CLOSE","clicked"),_("Callbackhunter_CLOSE"),Kt(".cbh").hide(),Kt(".cbh-banner-bg").css("display","none"),Kt(".cbh-widget").show()),z()},requestJSONP:function(e,t){var n=document.getElementsByTagName("head")[0],i=document.createElement("script");i.type="text/javascript";var o="cb"+Math.floor(1e6*Math.random());window[o]=function(e){t(e),delete window[o]},i.src=e.replace("{cb}",o),i.async=!0,n.appendChild(i)},popupWindow:function(e,t,n){var i=0,o=0;screen.width>t&&(i=Math.floor((screen.width-t)/2)),screen.height>n&&(o=Math.floor((screen.height-n)/2));var r=window.open(e,"cbh_"+Math.floor(100*Math.random()),"left="+i+",top= "+o+",width="+t+",height="+n+",personalbar=0,toolbar=0,scrollbars=1,resizable=1");r&&r.focus()},isVisible:function(e){"string"==typeof e&&(e=Kt(e).elements[0]);var t=e.currentStyle?e.currentStyle:window.getComputedStyle(e);return t.display&&t.visibility?"none"!=t.display&&"hidden"!=t.visibility&&(e.offsetHeight>0||e.offsetWidth>0):e.offsetHeight>0||e.offsetWidth>0},getScrollTop:function(){if("undefined"!=typeof pageYOffset)return pageYOffset;var e=document.body,t=document.documentElement;return t=t.clientHeight?t:e,t.scrollTop},findInArray:function(e,t){if(!on.isArray(e)||!on.isFunction(t))return!1;for(var n in e)if(t(e[n])===!0)return n;return-1},isMobile:function(){return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i.test(navigator.userAgent||navigator.vendor||window.opera)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test((navigator.userAgent||navigator.vendor||window.opera).substr(0,4))},declOfNum:function(e,t){var n=[2,0,1,1,1,2];return t[e%100>4&&20>e%100?2:n[5>e%10?e%10:5]]},formatMinToHour:function(e){var t=Math.floor(e/60);10>t&&(t="0"+t);var n=60*(e%60);return 10>n&&(n="0"+n),t+":"+n},millisecondsToTime:function(e){var t=e%1e3,n=Math.floor(e/1e3%60),i=Math.floor(e/6e4%60);return[i,n,t]},getRandomInt:function(e,t){return Math.floor(Math.random()*(t-e+1))+e},rand:function(e,t){return t=t?t:"",e?this.rand(--e,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".charAt(Math.floor(60*Math.random()))+t):t},viewportSize:function(){var e=!document.compatMode&&!kt||xt?(document.parentWindow||document.defaultView).innerWidth:"CSS1Compat"==document.compatMode?document.documentElement.clientWidth:document.body.clientWidth,t=!document.compatMode&&!kt||xt?(document.parentWindow||document.defaultView).innerHeight:"CSS1Compat"==document.compatMode?document.documentElement.clientHeight:document.body.clientHeight;return{width:e,height:t}},setWrapperH:function(){var e=on.viewportSize();Te&&Ee&&console.log("Viewport:"+e.width+" / "+e.height),Kt(".cbh").css("height",e.height+"px!important"),Kt("#cbh_container").css("height",e.height+"px"),Kt("#cbh_widget_wrapper").css("height",e.height+"px")},freeMode:function(){return Lt===!0},discountEnabled:function(){return Re===!0},blurEnabled:function(){return!Oe&&enable_blur===!0},capitalizeFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},secondsToString:function(e,t,n,i,o){if(e=parseInt(e),"string"!=typeof i&&(i=" "),-1==Array.apply(null,{length:4}).map(Number.call,Number).indexOf(t)&&(t="1"),-1==Array.apply(null,{length:4}).map(Number.call,Number).indexOf(n)&&(n="1"),"undefined"==typeof o&&(o=[["день","дня","дней"],["час","часа","часов"],["минута","минуты","минут"],["секунда","секунды","секунд"]]),3>n){for(var r=[Math.floor(e/86400),Math.floor(e%86400/3600),Math.floor(e%86400%3600/60),e%86400%3600%60],a=1;3>a;a++)a>n&&(r[a+1]+=r[1]*(0===a?24:60),r[a]=0);0===t&&0===r[0]&&r[1]>0&&(r[0]=1,r[1]=0);var s=[];for(var a in r)if(r.hasOwnProperty(a)&&0!=r[a]&&(s.push(r[a]+" "+this.declOfNum(r[a],o[a])),a>t))break;return s.join(i)}return e+" "+this.declOfNum(e,o[3])},phoneNumberOk:function(e){return"string"!=typeof e||""===e||e.length<=10?!1:/(.)\1{6,}/i.test(e)?!1:!0},isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},isFunction:function(e){var t={};return e&&"[object Function]"===t.toString.call(e)},isNull:function(e){return null===e&&"object"==typeof e},checkUtmAccess:function(){var e,t=decodeURIComponent(window.location.search.substring(1)),n=decodeURIComponent(document.referrer),i=decodeURIComponent(tn.getStrVal("entrance_page",!0))||"";if(null!==Ge&&(e=Ge),e&&null!=e.block_by_utm&&1==e.block_by_utm&&null==e.utm_allowed)return!0;if(null!=e.allow_by_utm&&1==e.allow_by_utm&&null!=e.utm_negate)for(var o=e.utm_negate,r=0;r<o.length;r++)if(t.indexOf(o[r])>-1||i.indexOf(o[r])>-1||n.indexOf(o[r])>-1)return!1;if(null!=e.block_by_utm&&1==e.block_by_utm&&null!=e.utm_allowed){for(var a=e.utm_allowed,r=0;r<a.length;r++)if(t.indexOf(a[r])>-1||i.indexOf(a[r])>-1||n.indexOf(a[r])>-1)return!0}else if(null==e.block_by_utm||null!=e.block_by_utm&&0==e.block_by_utm)return!0;return!1},workTime:function(){var e=[0,1,2,3,4,5,6],t=9,n=18,i=0,o={0:[],1:[],2:[],3:[],4:[],5:[],6:[]},r={0:[],1:[],2:[],3:[],4:[],5:[],6:[]},a=[],s=["янв","фев","мар","апр","мая","июн","июл","авг","сен","окт","ноя","дек"],c=[],l=[],h=-(new Date).getTimezoneOffset(),u=function(e){return parseInt(t[e])},d=function(e){var t=u(e),i=parseInt(n[e]);return t===i&&0===t?i=24:i+=1,i},p=function(p,f,m,b){t=f,n=m,e=p.split(","),b=b.replace(/^UTC/,"");var g=1;""===b?i=0:("+"===b.slice(0,1)&&(g=-1),b=b.substr(1).split(":"),i=g*(60*parseInt(b[0],10)+parseInt(b[1],10)));for(var v=0;v<e.length;v++)for(var y=parseInt(e[v],10),_=u(y),w=d(y),x=_;w>x;x++){var k=60*x+i;if(k>=0&&1440>k)o[y].push(k);else if(k>=1440){var C=(y+1)%7;"undefined"!=typeof e[C]&&o[C].push(k-1440)}else if(0>k){var C=(y-1)%7;"undefined"!=typeof e[C]&&o[C].push(1440-k)}}if(h){for(var v in o)if(o.hasOwnProperty(v)&&o[v].length)for(var y=parseInt(v,10),S=0;S<o[y].length;S++){var k=o[y][S]+h;if(k>=0&&1440>k)r[v].push(k);else if(k>=1440){var C=6>=y+1?y+1:0;r[C].push(k-1440)}else if(0>k){var C=6>=y-1?y-1:0;r[C].push(1440-k)}}}else r=o;for(var T=(new Date).getDay(),E=0,v=T;T+14>v&&4>E;v++){var N=v-T,M=v%7;if("undefined"!=typeof r[M]&&r[M].length){var I="",A=new Date(+new Date+1e3*N*24*60*60),O=A.getDate()+" "+s[A.getMonth()];switch(N){case 0:I="сегодня";break;case 1:I="завтра";break;case 2:I="послезавтра";break;default:I=O}a.push({n:M,s:I}),c.push({n:M,s:O}),l.push({n:M,d:+A}),E++}}},f=function(e){return e.toJSON=0,JSON.parse(JSON.stringify(e))};return{init:p,getTimeUserWords:function(){return f(a)},getTimeUserDates:function(){return f(c)},getTimeUserTimestamps:function(){return f(l)},getTimeUser:function(){return f(r)},getTimeStopToday:function(){return d((new Date).getDay())}}}()},rn={name:_e.get("hunter_client_name")||null,email:_e.get("hunter_client_email")||null,client_phone:_e.get("hunter_client_phone")||null,gameResults:{},stopInput:!1,createDialog:function(e,t){on.hideDialogItems();var n=ut?"#cbh_mobile_widget":"#cbh_item_dialog";ut&&(e.height?Kt(n).addStyle("height",e.height+"!important"):ut&&Kt(n).removeStyle("height")),e.doNotSave&&delete rn.currentAction,setTimeout(function(){var n=Kt("#cbh_item_dialog_content");n.empty(),rn.stopInput=!1;var i="",o=function(e){return e.replace("%name%",r).replace("%callbackhunter%",s).replace("%countdown%",Je).replace("%countdown_text%",Je+" "+on.declOfNum(Je,["секунда","секунды","секунд"]))},r='<a href="#" class="cbh-dialog-name" id="cbh_dialog_name">'+rn.name+"</a>",s='<span id="cbh_dialog_balloon_container"><a class="cbh-dialog-name">CallbackHunter</a><div class="cbh-dialogs-balloon" id="cbh_dialog_balloon"></div></span>';

if(e.head&&(i+='<div class="cbh-big-text cbh-typing '+e.headClass+'">'+o(e.head)+"</div>"),e.text&&(i+='<div class="cbh-normal-text cbh-typing">'+o(e.text)+"</div>"),e.centeredHead&&(i+='<div class="cbh-big-text cbh-typing cbh-centered">'+o(e.centeredHead)+"</div>"),e.centeredText&&(i+='<div class="cbh-normal-text cbh-typing cbh-centered">'+o(e.centeredText)+"</div>"),n.html(i),e.form){var c=Kt("<div>").addClass("cbh-form");e.formClass&&c.addClass(e.formClass),n.append(c),e.form.forEach(function(e,t){var n=Kt("<div>");c.append(n);var i=Kt("<div>").attr("data-index",t).addClass("cbh-form-elem");if("button"===e.type){var r=Kt("<div>").addClass("cbh-button").html(o(e.text)).on("click",function(){e.doNotSave||(rn.currentAction=e.action,delete rn.currentOptions),e.action()});e.id&&r.attr("id",e.id),i.append(r)}else if("timer"===e.type&&e.id&&e.countdownObj instanceof a){var s=Kt("<div>").addClass(ut?"cbh-mobile-timer":"cbh-timer").attr("id",e.id);i.append(s)}if("link"===e.type){var l=Kt("<div>").addClass("cbh-link"),h=Kt("<a>").attr("href","#").html(e.text).on("click",function(t){return t.preventDefault(),e.doNotSave||(rn.currentAction=e.action,delete rn.currentOptions),e.action(),!1});l.append(h),i.append(l)}else if("text"===e.type||"tel"===e.type||"textarea"===e.type){var u;u="textarea"===e.type?Kt("<textarea>"):Kt("<input>").attr("type",e.type),u.attr({name:e.name,id:"cbh_item_dialog_input_"+t,placeholder:e.text}).addClass(["cbh-input","cbh-form-input"]),u.val(e.value?e.value:""),i.append(u)}else if("checkbox"===e.type){var u=Kt("<input>").attr("type",e.type);u.attr({name:e.name,id:"cbh_item_dialog_input_"+t}).addClass(["cbh-radio","cbh-form-input"]),u.val(e.value?e.value:"1"),u.prop("checked",e.checked?!0:!1);var d=Kt("<label>"+e.text+"</label>").attr({"class":"cbh-label","for":"cbh_item_dialog_input_"+t});i.append(u).append(d)}else if("radio"===e.type||"checklist"===e.type)e.options.forEach(function(t,n){var o=Kt("<input>");"checklist"===e.type?o.attr("type","checkbox"):o.attr("type","radio"),o.attr({id:"cbh_item_dialog_radio_"+e.name+"_"+n,name:e.name,value:t.value}).addClass(["cbh-radio","cbh-form-input"]),i.append(o),i.append(document.createTextNode(" "));var r=Kt("<label>").addClass("cbh-label").html(t.text).attr("for",o.attr("id"));if(i.append(r),t.addTextField){var a=Kt("<input>").attr({type:"text",name:e.name+"_"+t.value+"_text"}).addClass(["cbh-input","cbh-form-input"]).on("click",function(){o.prop("checked",!0)});r.append(a)}i.append(Kt("<br>"))});else if("select"===e.type){var p=Kt("<div>").addClass("cbh-dialog-select").on("click",function(){m.toggleClass("cbh-hide")}),f=Kt("<span>").addClass("cbh-form-input").html("Выберите вариант").attr({value:"",name:e.name});Kt(document).on("click",function(e){e.target!=p.elements[0]&&e.target!=f.elements[0]&&m.addClass("cbh-hide")}),p.append(f);var m=Kt("<div>").addClass(["cbh-dialogs-select-list","cbh-hide"]).attr("id","cbh_item_dialog_select_"+t);p.append(m);var b=Kt("<ul>").addClass("cbh-dialogs-select-list__hold");m.append(b),e.options.forEach(function(e){var t=Kt("<li>").html('<a href="#">'+(e.text||e.value)+"</a>").val(e.value);e.selected&&f.html(e.text||e.value).val(e.value),t.on("click",function(){return f.html(e.text||e.value).val(e.value),!1}),b.append(t)}),i.append(p)}else if("submit"===e.type){var r=Kt("<div>").addClass("cbh-button").html(e.text||"Отправить").on("click",function(){if(!rn.stopInput){var t={},n={};Kt(".cbh-form-input").forEach(function(e){var i=Kt(e).findParent(".cbh-form-elem");if(Kt(e).removeClass("cbh-form-input-error"),i.exists()){var o=Kt("#cbh_form_error_"+i.attr("data-index"));o.empty(),n[e.name]=function(t){return Kt(e).addClass("cbh-form-input-error"),t&&o.html(t),rn.stopInput=!1,e}}"INPUT"==e.tagName&&("text"==e.type||"tel"==e.type)||"TEXTAREA"==e.tagName?t[e.name]=e.value.trim():"INPUT"==e.tagName&&"radio"==e.type?e.checked&&(t[e.name]=e.value.trim()):"INPUT"==e.tagName&&"checkbox"==e.type?e.checked&&(t[e.name]||(t[e.name]=[]),t[e.name].push(e.value.trim())):"SPAN"==e.tagName&&(t[e.getAttribute("name")]=e.getAttribute("value").trim())}),e.action&&(e.doNotSave||(rn.currentAction=e.action,rn.currentOptions=t),e.action(t,n))}});e.id&&r.attr("id",e.id),i.append(r)}else if("info"===e.type){var g=Kt("<div>").addClass("cbh-info").html(e.text||"");i.append(g)}else if("custom"===e.type){var v=Kt("<div>").addClass("cbh-custom");e.custom(v),i.append(v)}else if("share"===e.type){var y=Kt("<div>"),_=Jt.socials({VK_default_count:Wt,Twitter_default_count:qt,Facebook_default_count:Ft,text:e.text,loveHateText:"Оставить отзыв!"});y.html(_);var w="http://callbackhunter.com";nn.getTwitterCount(w,function(e){Kt("#cbh_social_tw_count").html(e)}),nn.getVKCount(w,function(e){Kt("#cbh_social_vk_count").html(e)}),nn.getFacebookCount(w,function(e){Kt("#cbh_social_fb_count").html(e)}),i.append(y)}n.append(i),s&&"timer"===e.type&&e.id&&e.countdownObj instanceof a&&e.countdownObj.addContainer(s);var x=Kt("<div>").addClass("cbh-form-error-message").setAttr("id","cbh_form_error_"+t);n.append(x)})}if(e.info){var l=Kt("<div>").addClass("cbh-info").html(e.info);n.append(l)}ut||(rn.repositionDialog(),Kt(window).off("resize",rn.repositionDialog).on("resize",rn.repositionDialog)),on.showDialogItem("#cbh_item_dialog"),e.showFormImmediately&&Kt(".cbh-form").show(),en.effect(null,function(){setTimeout(function(){Kt(".cbh-form").show()},200),"function"==typeof t&&t(),Kt("#cbh_dialog_name").on("click",rn.tellYourNameAgain);var e=Kt("#cbh_dialog_balloon");if(!ut){var n=Kt(".cbh-powered-by-link").attr("href")||(Ue?"http://"+Ue:!1)||"http://callbackhunter.com";e.html(e.html()+'<div class="cbh-dialogs-balloon-box">Через синюю кнопку связи CallbackHunter вы за 26 секунд дозвонитесь в любую компанию мира.<br><br>Хватит ждать на линии.<br>Освободите свое время.<br>Посвятите его близким.<br><br><a href="'+n+'" target="_blank">Перейти на сайт</a></div>'),Kt("#cbh_dialog_balloon_container").on("mouseover",function(){e.show()}),Kt("#cbh_dialog_balloon_container").on("mouseleave",function(){e.hide()})}if(ut&&Kt("#cbh_dialog_balloon_container").on("click",function(){rn.aboutMobile(rn.currentAction)}),Kt("#cbh_social_tw").exists()){var i="http://callbackhunter.com",o="CallbackHunter";Kt("#cbh_social_tw").on("click",function(e){e.preventDefault(),nn.popupTwitterShare(i,o)}),Kt("#cbh_social_vk").on("click",function(e){e.preventDefault(),nn.popupVKShare(i,o)}),Kt("#cbh_social_fb").on("click",function(e){e.preventDefault(),nn.popupFacebookShare(i)})}})},250)},repositionDialog:function(){var e=Kt("#cbh_item_dialog");e.addStyle("height","auto !important").addStyle("bottom","auto !important");var t=e.getComputedStyle().height;e.addStyle("bottom","0 !important").addStyle("height",t+" !important")},callNow:function(){Qt.activate("callNow");var e;e=on.freeMode()?"— Оставьте номер, и мы вам перезвоним":"Мы перезвоним вам <br />за "+Je+" сек. Засекайте!",sn.autoRefreshStatus=!1,sn.render(e),ut?R():v()},intro:function(){if(Qt.activate("intro"),rn.currentAction)return rn.currentAction(rn.currentOptions);var e="",t="";if("worktime"===mt){e=on.freeMode()?"закажем обратный звонок или напишем письмо?":"закажем обратный звонок за %countdown_text% или напишем письмо?",t=rn.name?"— %name%, привет,":"— Привет,";var n={head:t,text:e,form:[{type:"button",text:"Заказать звонок",action:rn.callNow},{type:"button",text:"Написать письмо",action:rn.contactForm}]};Gt&&n.form.push({type:"button",text:"Хочу поболтать",action:rn.okText}),rn.createDialog(n)}else{t=rn.name?"— %name%, сейчас":"— Упс, сейчас";var n={head:t,text:"в офисе ни души. Закажем на завтра обратный звонок или напишем письмо?",form:[{type:"button",text:"Закажем звонок",action:rn.callLaterAction},{type:"button",text:"Напишем письмо",action:rn.contactForm}]};Gt&&n.form.push({type:"button",text:"Хочу поболтать",action:rn.okText}),rn.createDialog(n)}},chooseText:function(){var e;e=Pe?"Вам удобнее общаться текстом или по почте?":"Вам удобнее общаться в общем чате или по почте?",rn.createDialog({head:"— ОК!",text:e,form:[{type:"button",text:Pe?"Текстом":"В общем чате",action:Pe?rn.okText:rn.chat},{type:"button",text:"По почте",action:rn.contactForm}]})},choosePhoneOrText:function(){var e;e=Pe?"Вам удобнее общаться по телефону, текстом или по почте?":"Вам удобнее общаться по телефону, в общем чате или по почте?",rn.createDialog({head:"— Я поддерживаю.",text:e,form:[{type:"button",text:"По телефону",action:rn.doYouWantCallback},{type:"button",text:Pe?"Текстом":"В общем чате",action:Pe?rn.okText:rn.chat},{type:"button",text:"По почте",action:rn.contactForm}]})},letsText:function(){rn.createDialog({head:"— OK!",text:"Давайте не спеша пообщаемся текстом.",form:[{type:"button",text:"Да, давайте",action:rn.okText},{type:"button",text:"Лучше созвонимся",action:rn.doYouWantCallback}]})},doYouWantCallback:function(){var e;e=on.freeMode()?"я отправлю менеджеру задачу и он вам перезвонит?":"worktime"===mt?"мы перезвоним вам бесплатно за %countdown_text%?":"мы перезвоним вам бесплатно строго в выбранное вами время?",rn.createDialog({head:"— Хотите,",text:e,form:[{type:"button",text:"Да, давайте!",action:"worktime"===mt?rn.callNow:rn.callLaterAction,doNotSave:!0},{type:"button",text:"Лучше текстом",action:rn.okText}]})},okText:function(){return rn.name?void rn.createDialog({head:"— %name%,",text:"пообщаемся о наших услугах или сначала поднимем настроение?",form:[{type:"button",text:"Об услугах",action:rn.doYouWantCallback2},{type:"button",text:"Поднимем настроение",action:rn.gameStart}]}):rn.tellYourName()},sayHello:function(){rn.createDialog({mode:"sayHello",head:rn.name?"— %name%, привет!":"— Привет!",text:"worktime"===mt?"Если что — могу соединить с менеджером За %countdown% секунд.":"Если что — могу соединить с менеджером в рабочее время.",form:[{type:"button",text:"worktime"===mt?"Да, созвонимся!":"Заказать звонок",action:"worktime"===mt?rn.callNow:rn.callLaterAction,doNotSave:!0,id:"sayHelloButton"},{type:"link",text:"Нет, спасибо",action:function(){on.hideWidget()}}]},function(){setTimeout(function(){on.isVisible("#sayHelloButton")&&on.hideWidget()},4e3)})},tellYourName:function(){rn.createDialog({head:"— Ok.",text:"Я %callbackhunter% — новый стандарт связи клиента с компанией. А как вас зовут?",form:[{type:"text",text:"Ваше имя и отчество",name:"name",value:rn.name||""},{type:"checkbox",text:'Я принимаю <a target="_blank" href="http://callbackhunter.com/img/offerta_ru.pdf">соглашение</a>',name:"oferta",checked:!0},{type:"submit",text:"Будем знакомы!",action:function(e,t){rn.saveName(e,t,rn.pleasedToMeet)},doNotSave:!0},{type:"link",text:"Пропустить >>",action:rn.pleasedToMeet}]})},tellYourNameAgain:function(){rn.createDialog(rn.name?{head:"— "+rn.name,text:"если вы не "+rn.name+", а представились шутливым именем, тогда укажите настоящее имя :)<br>Итак, я %callbackhunter%, а вы?",form:[{type:"text",text:"Ваше имя и отчество",name:"name",value:rn.name||""},{type:"checkbox",text:'Я принимаю <a target="_blank" href="http://callbackhunter.com/img/offerta_ru.pdf">соглашение</a>',name:"oferta",checked:!0},{type:"submit",text:"Будем знакомы!",action:function(e,t){rn.saveName(e,t,rn.intro)},doNotSave:!0}]}:{head:"— Познакомимся?",text:"Итак, я %callbackhunter%, а вы?",form:[{type:"text",text:"Ваше имя и отчество",name:"name",value:rn.name||""},{type:"checkbox",text:'Я принимаю <a target="_blank" href="http://callbackhunter.com/img/offerta_ru.pdf">соглашение</a>',name:"oferta",checked:!0},{type:"submit",text:"Будем знакомы!",action:function(e,t){rn.saveName(e,t,rn.intro)},doNotSave:!0},{type:"link",text:"Пропустить >>",action:rn.intro}]})},saveName:function(e,t,n){return e.oferta?e&&e.name?(rn.name=e.name,_e.set("hunter_client_name",e.name),on.sendData({dialogs_name:rn.name}),void n()):t.name("Пожалуйста, введите имя!"):t.oferta("Вы должны принять соглашение!")},validateEmail:function(e,t,n){return e&&e.email?0===e.email.length||-1===e.email.indexOf("@")||-1===e.email.indexOf(".")?t.email("Пожалуйста, введите настоящий email!"):void n():t.email("Пожалуйста, введите email!")},sendQuestion:function(e,t,n){return rn.stopInput=!0,e.question?void rn.validateEmail(e,t,function(){rn.saveEmail(e.email),on.sendData({question:JSON.stringify(e)}),w("send","event","Callbackhunter_EMAIL","clicked"),_("Callbackhunter_EMAIL"),n()}):t.question("Пожалуйста, введите вопрос!")},saveEmail:function(e){rn.email=e,_e.set("hunter_client_email",e)},pleasedToMeet:function(){var e,t;rn.name?(e="— Очень приятно.",t="%name%, пообщаемся о наших услугах или сначала поднимем настроение?"):(e="— ОК, ",t="познакомимся позже :) Пообщаемся о наших услугах или сначала поднимем настроение?"),rn.createDialog({head:e,text:t,form:[{type:"button",text:"Об услугах",action:rn.doYouWantCallback2},{type:"button",text:"Поднимем настроение",action:rn.gameStart}]})},chooseCallParentsOrGame:function(){var e;e=rn.name?"Можете позвонить родителям бесплатно (1 раз в сутки). Или мы можем сыграть в игру.<br><br>С чего начнем, %name%?":"Можете позвонить родителям бесплатно (1 раз в сутки). Или мы можем сыграть в игру.<br><br>С чего начнем?",rn.createDialog({head:"— Есть два варианта.",text:e,form:[{type:"button",text:"Позвоним родителям",action:rn.callParents},{type:"button",text:"Начнем игру!",action:rn.gameStart}]})},doYouWantCallback2:function(){var e;on.freeMode()?(e=rn.name?"%name%, по телефону обсуждать конкретику удобнее. Мы можем перезвонить вам бесплатно.":"по телефону обсуждать конкретику удобнее. Мы можем перезвонить вам бесплатно.",rn.createDialog({head:"— Согласитесь, ",text:e,form:[{type:"button",text:"Да, созвонимся!",action:rn.callNow,doNotSave:!0},{type:"button",text:"Не могу говорить",action:rn.letsCallLater}]})):(e=rn.name?"%name%, я":"Я",e+="worktime"===mt?" могу перезвонить вам за %countdown_text%. Ведь по телефону обсуждать конкретику удобнее.":" могу перезвонить вам в удобное время. Ведь по телефону обсуждать конкретику удобнее.",rn.createDialog({head:"— Сэкономим время? ",text:e,form:[{type:"button",text:"Да, созвонимся!",action:rn.callNow,doNotSave:!0},{type:"button",text:"Не могу говорить",action:rn.letsCallLater}]}))},callLaterMobileAction:function(){on.hideDialogItems(),Kt("#cbh_mobile_deferred").show();var e;e=on.freeMode()?"— Выберите удобное время и мы вам перезвоним:":"— Выберите удобное время и мы 100% вам перезвоним:",Kt("#cbh_mobile_deferred_text").html(e),on.fillDeferredSelectorsMobile("#cbh_mobile_time_select");var t=Kt(".cbh-mobile-time-select");t.on("click",function(e){var t=new Date,n=new Date(+Kt(e.currentTarget).attr("data-ts")),i=n-t,o=Math.floor(i/36e5),r=Math.floor((i-60*o*60*1e3)/6e4);rn.askPhoneNumberNight(o,r)})},askPhoneNumberNight:function(e,t){rn.createDialog({head:"— Введите номер вашего<br> телефона:",info:"Мы отправим SMS с вашим номером менеджерам<br> и начальнику отдела продаж. Они вам перезвонят.",form:[{type:"tel",text:"Мобильный телефон",name:"cbh_mobile_night_mode_phone",value:rn.client_phone||""},{type:"submit",text:"Жду звонка",action:function(n,i){n.hour=e,n.minutes=t,V(n,i)},doNotSave:!0}]})},showOfficeChoice:function(e){var t=Ge.show_office_list,n=[];for(var i in t)t.hasOwnProperty(i)&&n.push({value:t[i].id,text:t[i].name,selected:0==i});var o={head:"Ок, только с каким отделом соединить?",headClass:"cbh-status",form:[{type:"select",name:"office",options:n},{type:"submit",text:"Жду звонка!",action:function(t){e?Y(t):X(t)}}]};e||o.form.push({type:"timer",id:"cbh_timer_office",countdownObj:we}),rn.createDialog(o)},callLaterAction:function(){Qt.activate("callNow");var e=0,t=0;on.freeMode()&&(e=Kt(".cbh-deferred__day-val").html(),t=Kt(".cbh-deferred__hour-val").html(),Kt("#cbh_deferred_info").html('<span id="cbh_send_deferred_day_container">'+on.capitalizeFirstLetter(e)+'</span> <span id="cbh_send_deferred_hour_container"> в '+t+"</span> мы отправим sms с вашим номером менеджеру и начальнику отдела продаж. Они вам перезвонят. Без спама.")),Kt("#cbh_item_call_deferred_head").html("Выберите удобное время звонка").removeClass("cbh-typed").addClass("cbh-typing"),en.effect(),Kt("#cbh_item_call_deferred_text").html(""),on.showDialogItem("#cbh_item_call_deferred"),Kt("#cbh_send_deferred").off("click").on("click",function(){Y()})},letsCallLater:function(){rn.createDialog({height:ut?"390px":"250px",doNotSave:!0,head:rn.name?"— %name%,":"— Вас понял,",text:"тогда вы можете выбрать удобное время для звонка.",form:[{type:"button",text:"Выбрать время",action:ut?rn.callLaterMobileAction:rn.callLaterAction,doNotSave:!0},{type:"button",text:"Лучше по E-mail",action:rn.contactForm,doNotSave:!0}]})},deferredCallRegistered:function(){on.hideDialogItems(),rn.createDialog({head:"— Спасибо, ",text:"мы вам перезвоним",form:[{type:"submit",text:"ОК!",action:rn.intro,doNotSave:!0}]})},letsCallLaterByName:function(){var e,t;on.freeMode()&&(e=Kt(".cbh-deferred__day-val").html(),t=Kt(".cbh-deferred__hour-val").html());var n="";e&&t&&(n="в ближайшее время"===e?"на ближайшее время. ":"на "+e+", "+t+". "),rn.createDialog({head:"— Звонок заказан ",text:n+"Кстати, хотите при звонках к вам будут обращаться по имени?",form:[{type:"text",text:"Ваше имя и отчество",name:"name",value:rn.name||""},{type:"checkbox",text:'Я принимаю <a target="_blank" href="http://callbackhunter.com/img/offerta_ru.pdf">соглашение</a>',name:"oferta",checked:!0},{type:"submit",id:"acceptName",text:"Хочу по имени!",action:function(e,t){rn.saveName(e,t,rn.doYouWantRecordsOnEmail)},doNotSave:!0},{type:"link",text:"Не хочу >>",action:rn.doYouWantRecordsOnEmail}]})},contactForm:function(){Qt.activate("contactForm");var e;e=on.freeMode()?rn.name?"чтобы вы получили ответ в<br/> течение 45 минут после начала <br/>рабочего дня. %name%, пишите!":"чтобы вы получили ответ в<br/> течение 45 минут после начала <br/>рабочего дня. Пишите!":rn.name?"чтобы вы получили ответ в<br/> течение 45 минут. %name%, пишите!":"чтобы вы получили ответ в<br/> течение 45 минут. Пишите!",rn.createDialog({head:"— Сделаю всё,",formClass:"cbh-letter",text:e,form:[{text:"Напишите вопрос",name:"question",type:"textarea"},{type:"text",text:"Ваш E-mail (для ответа)",name:"email",value:rn.email},{type:"text",text:"Ваш телефон (по желанию)",name:"phone",value:rn.client_phone},{type:"submit",action:function(e,t){rn.sendQuestion(e,t,rn.hopeIEarnedYourSmile)}}],showFormImmediately:!0})},emailSent:function(){rn.createDialog({head:"Ок. Вопрос отправил.",text:"Жизнь порой слишком серьезна. Может сыграем в игру?",form:[{type:"button",text:"Нет, спасибо",action:rn.hopeIEarnedYourSmile},{type:"button",text:"Начать игру",action:rn.gameStart}]})},maybePlayGame:function(){rn.createDialog({head:rn.name?"— %name%, не хочу,":"— Не хочу, ",text:"чтобы вы скучали. Может сыграем в игру?",form:[{type:"button",text:"Нет, спасибо",action:rn.hopeIEarnedYourSmile},{type:"button",text:"Начать игру",action:rn.gameStart}]})},callInNeed:function(){rn.createDialog({height:"250px",head:"— OK.",text:"Когда появятся вопросы, обязательно нажимайте <br/>синюю кнопку связи, хорошо?",form:[{type:"button",text:"Хорошо, а где кнопка?",action:function(){on.hideWidget()},doNotSave:!0},{type:"button",text:"Хорошо",action:rn.farewell}]})},farewell:function(){rn.createDialog({head:"— До встречи.",text:"Теперь мы знакомы, в следующий раз будет еще интереснее.",doNotSave:!0},function(){setTimeout(function(){on.hideWidget()},3e3)})},callParents:function(){rn.createDialog({head:"— Звоним родителям!",text:"Укажите свой мобильный телефон и мобильный телефон мамы или папы",form:[{type:"text",text:"Ваш телефон",name:"myPhone"},{type:"text",text:"Телефон родителей",name:"parentsPhone"},{type:"submit",text:"Соединить!",action:function(e){""!=e.myPhone&&""!=e.parentsPhone&&(te(e),rn.shareCallParents())}}]})},shareCallParents:function(){rn.createDialog({head:"Поддерживать связь с близкими — бесценно.",form:[{type:"share",text:"Расскажите друзьям:"}]})},gameStart:function(){var e;e=on.discountEnabled()?"Я задам<br>6 вопросов. С каждым ответом<br>ваша скидка растет. Начнем?":"Я задам 6 вопросов. Ваши<br/>ответы + мои комментарии<br/>позволят нам стать ближе. <br/>Начнем?",rn.createDialog({head:"— Правила простые.",text:e,form:[{type:"button",text:"Поехали!",action:rn.gameFirstQuestion},{type:"button",text:"Нет, спасибо",action:rn.callInNeed}]})},gameFirstQuestion:function(){rn.createDialog({head:"Оцените",text:"по 10-балльной шкале вашу заинтересованность в наших услугах.",form:[{type:"select",name:"score",options:[{value:1},{value:2},{value:3},{value:4},{value:5},{value:6},{value:7},{value:8},{value:9},{value:10,selected:!0}]},{type:"submit",text:"Далее",action:rn.gameSecondQuestion}]})},gameSecondQuestion:function(e){var t,n,i=parseInt(e.score,10);if(i>=1&&3>=i)t="— Уууу,",n="так может мы вам вообще не нужны :)";else if(i>=4&&7>=i)t="— Нормально, ",n="будем повышать заинтересованность :)";else{if(!(i>=8&&10>=i))return;t="— Супер,",n="мы вас тоже любим :)"}on.discountEnabled()&&(n+=" Скидка 4%."),rn.gameResults.score=i,rn.createDialog({height:ut?"450px":"300px",head:t,text:n+" Что для вас самое важное при выборе компании?",form:[{type:"checklist",name:"important",options:[{text:"Быстрая связь с компанией",value:"communication"},{text:"Классный сервис",value:"service"},{text:"Цена ниже, чем у других",value:"pricing"},{text:"Другое (напишите)",value:"other",addTextField:!0}]},{type:"submit",text:"Далее",action:rn.gameThirdQuestion}]})},gameThirdQuestion:function(e){var t;e.important&&0!==e.important.length&&(-1===e.important.indexOf("other")||""!==e.important_other_text)&&(rn.gameResults.important=e.important,-1!==e.important.indexOf("other")&&(rn.gameResults.important_other_text=e.important_other_text),t=on.discountEnabled()?"Скидка 6%. Какие у вас есть увлечения/хобби?":"Какие у вас есть увлечения/хобби?",rn.createDialog({height:ut?"470px":"370px",head:"— Понял, стараемся.",text:t,form:[{type:"checklist",name:"hobbies",options:[{text:"Путешествия",value:"travel"},{text:"Рыбалка",value:"fishing"},{text:"Танцы",value:"dancing"},{text:"Спорт",value:"sports"},{text:"Бизнес",value:"business"},{text:"Музыка",value:"music"},{text:"Кино",value:"movies"},{text:"Другое (напишите)",value:"other",addTextField:!0}]},{type:"submit",text:"Далее",action:rn.gameFourthQuestion}]}))},gameFourthQuestion:function(e){if(e.hobbies&&0!==e.hobbies.length&&(-1===e.hobbies.indexOf("other")||""!==e.hobbies_other_text)){rn.gameResults.hobbies=e.hobbies,-1!==e.hobbies.indexOf("other")&&(rn.gameResults.hobbies_other_text=e.hobbies_other_text);var t,n;switch(e.hobbies[0]){case"travel":t="— Кстати,",n="был на дайвинге на Мальдивах. Волшебно. Рекомендую.";break;case"fishing":t=rn.name?"— %name%, ":"— Рыбак рыбака",n=rn.name?"рыбак рыбака видит издалека. Я в теме.":"видит издалека. Я в теме.";break;case"dancing":t="— Завидую",n="тем, кто танцует и не стесняется.";break;case"sports":t="— Уважаю.",n="Спорт — это сила.";break;case"business":t="— Кстати,",n='вот <a href="http://goo.gl/tlrqYm" target="_blank">интересный канал</a> о бизнесе и счастье.';break;case"music":t="— Без музыки ",n="жизнь была бы ошибкой. Фридрих Ницше.";break;case"movies":t="— Мне очень",n="понравился «Интерстеллар». Рекомендую.";break;case"other":t="— Здорово,",n="у вас уникальное хобби.";break;default:return}on.discountEnabled()&&(n+=" Скидка 8%."),rn.createDialog({height:ut?"330px":"270px",head:t,text:n+" Опишите двумя словами впечатления от этого сервиса:",form:[{type:"text",text:"Ваши впечатления",name:"experience"},{type:"submit",text:"Далее",action:rn.gameFifthQuestion}]})}},gameFifthQuestion:function(e){e.experience&&(rn.gameResults.experience=e.experience,rn.createDialog({height:"450px",head:"— Чем вообще занимаетесь?",text:"Это позволит нам разговаривать на одном языке.",form:[{type:"radio",name:"occupation",options:[{text:"Маркетолог",value:"marketing"},{text:"Владелец бизнеса",value:"business_owner"},{text:"ТОП-менеджер",value:"top_manager"},{text:"Менеджер по продажам",value:"sales_manager"},{text:"Руководитель отдела продаж",value:"head_of_sales_division"},{text:"Офис-менеджер",value:"office_manager"},{text:"Бухгалтер",value:"accountant"},{text:"Юрист",value:"lawyer"},{text:"Логист",value:"logistician"},{text:"Иное",value:"other"}]},{type:"submit",text:"Далее",action:rn.gameFinish}]}))},gameFinish:function(e){if(e.occupation&&0!==e.occupation.length){var t,n;switch(e.occupation){case"marketing":t="– По вирусному маркетингу",n='рекомендую книгу "Заразительный" Йоны Бергер.';break;case"business_owner":t="– Круто,",n="кстати расскажите нам свою историю успеха.";break;case"top_manager":t="– Поздравляю,",n="миллионы людей мечтают о вашей должности.";break;case"sales_manager":t="– Искренне убежден,",n="что путь продавца - самый быстрый к успеху.";break;case"head_of_sales_division":t="– Желаю",n="выполнения квартального плана продаж.";break;case"office_manager":t="– Ваша работа",n="часто незаметна, но компания живет благодаря вам.";break;case"accountant":t="– Правильный",n="бухгалтер может из 2+2 сделать столько, сколько надо :)";break;case"lawyer":t="– Грамотные",n="юристы, это ключевое в делах.";break;case"logistician":t="– Логист — ",n="это звучит круто.";break;case"other":t="– У вас,",n="видимо, уникальная профессия.";break;default:return}rn.gameResults.occupation=e.occupation,rn.gameResults.discount="10%",on.sendData({dialogs_results:JSON.stringify(rn.gameResults)}),_e.set("hunter_game_finished","1"),n+=on.discountEnabled()?" Ваша скидка 10%. Но главное то, что мы подружились. Настроение улучшилось :) Подтвердим скидку по телефону?":" Но главное то, что мы подружились. Настроение улучшилось :) Хотите мы вам перезвоним?",rn.createDialog({height:"450px",head:t,text:n,form:[{type:"button",text:"Да, давайте!",action:rn.callNow},{type:"button",text:"Да, но позже",action:rn.letsCallLater},{type:ut?"link":"button",text:"Нет, спасибо",action:rn.callInNeed}]})}},exitWeTreasure:function(){var e,t="",n="",i="",o="";on.freeMode()?(t=rn.name?"—  %name%, подождите уходить,":"— Подождите уходить,",n="для вас есть персональное предложение! Давайте мы перезвоним и обсудим цену для вас?",i="ОК, созвонимся!",o="Написать письмо"):"worktime"===mt?(t=rn.name?"—  %name%, подождите уходить,":"— Подождите уходить,",n="для вас есть персональное предложение! Давайте через <br/>%countdown_text% обсудим цену для вас?",i="ОК, созвонимся!",o="Написать письмо"):(t=rn.name?"—  %name%, подождите уходить,":"— Подождите уходить,",n="для вас есть персональное предложение! Уточните, когда вам перезвонить.",i="Выбрать время звонка",o="Написать письмо"),e={head:t,text:n,form:[{type:"button",text:i,action:function(){_e.set("hunter_exit_visited",1),"worktime"!==mt||on.freeMode()?"worktime"!==mt?y():rn.callLaterAction():rn.callNow()},doNotSave:!0},{type:"link",text:o,action:function(){_e.set("hunter_exit_visited",1),rn.contactForm()}}]},rn.createDialog(e)},pleaseRateCall:function(){on.showDialogItem("#cbh_item_call_rating");for(var e,t=function(t){if(!e){var n;for(n=1;5>=n;n++)Kt("#cbh_call_rating_"+n).removeClass("cbh-marked");for(n=1;n<=parseInt(t.target.getAttribute("data-value"),10);n++)Kt("#cbh_call_rating_"+n).addClass("cbh-marked")}},n=function(){if(!e)for(var t=1;5>=t;t++)Kt("#cbh_call_rating_"+t).removeClass("cbh-marked")},i=function(n){if(e)return!1;e=!0,t(n);var i=parseInt(n.target.getAttribute("data-value"),10);return on.sendData({rating:i,call_rand_id:pt}),rn.name?rn.doYouWantRecordsOnEmail(!0):rn.whatWouldYouLikeToBeCalled({head:"— ОК, учтем оценку.",text:"Хотите, в следующий раз мы будем обращаться к вам по имени? Я %callbackhunter%, а как вас зовут?"}),!1},o=1;5>=o;o++)Kt("#cbh_call_rating_"+o).on("mouseover",t).on("mouseleave",n).on("click",i);en.effect()},didCallSucceed:function(){var e,t;rn.name?(e="— %name%,",t="скажите, вам удалось начать разговор с менеджером?"):(e="— Скажите,",t="вам удалось начать разговор с менеджером?"),rn.createDialog({showFormImmediately:!0,head:e,text:t,form:[{type:"button",text:"Да",action:rn.pleaseRateCall},{type:"button",text:"Нет",action:rn.forceMajeure}]})},subscribeAndShare:function(){rn.createDialog({centeredHead:"Узнавайте первыми",centeredText:"О наших новостях, акциях и<br>эксклюзивных предложениях.",form:[{type:"text",name:"email",text:"Ваш email"},{type:"submit",text:"Подписаться!",action:function(e,t){return e.email?0===e.email.length||-1===e.email.indexOf("@")||-1===e.email.indexOf(".")?t.email("Пожалуйста, введите настоящий email!"):void rn.subscribed():t.email("Пожалуйста, введите email!")},doNotSave:!0},{type:"share",text:"Обсудите сервис с друзьями"}]})},subscribed:function(){rn.createDialog({centeredHead:"Вы подписались!",centeredText:"Ждите интересных новостей!",form:[{type:"button",text:"Хорошо",action:on.hideWidget,doNotSave:!0}]})},enterWelcome:function(){return rn.currentAction=null,delete rn.currentOptions,rn.intro()},letMeGetUsedTo:function(){rn.createDialog({height:ut?"390px":"250px",head:"— ОК,",text:"когда появятся вопросы,<br>обязательно нажимайте кнопку<br>связи. Хорошо?",form:[{type:"button",text:"Хорошо!",action:rn.farewell,doNotSave:!0},{type:"button",text:"Покажите кнопку",action:on.hideWidget,doNotSave:!0}]})},whatWouldYouLikeToBeCalled:function(e){var t,n;rn.name?rn.doYouWantRecordsOnEmail():(t=e.head?e.head:"— ОК, учтем оценку.",n=e.text?e.text:"Хотите, в следующий раз мы будем обращаться к вам по имени? Я %callbackhunter%, а как вас зовут?",rn.createDialog({height:ut?"390px":"250px",head:t,text:n,showFormImmediately:!0,form:[{type:"text",text:"Ваше имя и отчество",name:"name",value:rn.name||""},{type:"checkbox",text:'Я принимаю <a target="_blank" href="http://callbackhunter.com/img/offerta_ru.pdf">соглашение</a>',name:"oferta",checked:!0},{type:"submit",text:"Будем знакомы!",action:function(e,t){rn.saveName(e,t,rn.doYouWantRecordsOnEmail)},doNotSave:!0},{type:"link",text:"Пропустить >>",action:rn.doYouWantRecordsOnEmail}]}))},doYouWantRecordsOnEmail:function(e){var t,n;on.freeMode()?rn.name?(t="— %name%,",n="worktime"===mt?"заявку отправил менеджеру. Также CallbackHunter может выслать вам на email запись будущего разговора.":"заявку принял. CallbackHunter может выслать вам на email запись будущего разговора."):"worktime"===mt?(t="— Заявку отправил.",n="CallbackHunter может выслать вам на email запись будущего разговора."):(t="— Заявку принял.",n="CallbackHunter может выслать вам на email запись будущего разговора."):rn.name?(t="— %name%,",n=e?"учтем оценку. Еще могу выслать вам на email запись этого разговора через CallbackHunter.":"Еще могу выслать вам на email запись этого разговора через CallbackHunter."):e?(t="— Учтем оценку!",n="Еще могу выслать вам на email запись этого разговора через CallbackHunter."):(t="— Еще могу",n="выслать вам на email запись этого разговора через CallbackHunter.");var i='<span id="cbh_dialog_balloon_container"><a class="cbh-dialog-name">CallbackHunter</a><div class="cbh-dialogs-balloon" id="cbh_dialog_balloon"></div></span>';n=n.replace("CallbackHunter",i),rn.createDialog({head:t,text:n,form:[{type:"text",text:"Ваш email",name:"email",value:rn.email},{type:"submit",text:"Получить аудиозапись!",action:rn.saveEmailRecordsPreference},{type:"link",text:"Нет, спасибо",action:rn.hopeIEarnedYourSmile}]})},saveEmailRecordsPreference:function(e,t){rn.validateEmail(e,t,function(){rn.saveEmail(e.email),on.sendData({email:e.email}),rn.hopeIEarnedYourSmile()})},hopeIEarnedYourSmile:function(){var e,t;rn.name?(e="— %name%, мы мечтаем, ",t="чтобы компании делали своих клиентов счастливыми. Поддержите нашу мечту — оставьте отзыв."):(e="— Мы мечтаем, ",t="чтобы компании делали своих клиентов счастливыми. Поддержите нашу мечту — оставьте отзыв."),rn.createDialog({head:e,text:t,form:[{type:"share",text:"Расскажите о нас друзьям:"}]})},forceMajeure:function(){var e,t;rn.name?(e="— %name%,",t="я уже отправил SMS-жалобу директору. Буду сам звонить менеджерам. Как только они поднимут трубку, я подключу вас. ОК?"):(e="— Я уже отправил",t="SMS-жалобу директору. Буду сам звонить менеджерам. Как только они поднимут трубку, я подключу вас. ОК?"),rn.createDialog({head:e,text:t,form:[{type:"button",
text:"ОК, нормально!",action:function(){F(),rn.hopeIEarnedYourSmile()},doNotSave:!0},{type:"link",text:"Нет, спасибо",action:rn.hopeIEarnedYourSmile,doNotSave:!0}]})},aboutMobile:function(e){rn.createDialog({form:[{type:"custom",custom:function(e){e.html(Jt.about_mobile())}},{type:"link",text:"Закрыть",action:on.isFunction(e)?e:R}]})},chat:function(){v(),Qt.activate("chat"),on.showDialogItem("#cbh_chat"),en.effect(),cn.connect()}},an={connect:function(e){an.io=io.connect(ze),an.io.on("connect",function(){an.io.emit("init",{sid:_e.get("hunter_sid"),code:hunter_code})}),an.io.on("initFinish",function(){e()})}},sn={progressTimeout:null,statusTimeout:null,autoRefreshStatus:!0,connect:function(){return an.io?void(sn.io||(sn.io=an.io,sn.io.on("connect",sn.subscribe),sn.subscribe(),sn.io.on("callStatus",function(e){sn.changeStatus(e.event)}))):an.connect(sn.connect)},subscribe:function(){sn.io.emit("callStatus")},changeStatus:function(e){if(clearTimeout(sn.statusTimeout),sn.autoRefreshStatus){var t="";switch(e){case"callingToManager":t=rn.name?rn.name+", подключаю свободного менеджера...":"Подключаю свободного менеджера...";break;case"managerInvalid":t="Менеджер не берет трубку :(";break;case"callingToClient":t=rn.name?rn.name+", ваш разговор будет записан и может быть отправлен вам по email":"Ваш разговор будет записан и может быть отправлен вам по email",sn.statusTimeout=setTimeout(function(){sn.changeStatus("callingToClient2")},3500);break;case"callingToClient2":t=rn.name?rn.name+", я вам уже звоню, возьмите трубку...":"Я вам уже звоню, возьмите трубку...",sn.statusTimeout=setTimeout(function(){sn.changeStatus("callingToClient3")},3e3);break;case"callingToClient3":t="Вызов уже идет, странно, почему вы не берете трубку?";break;case"callingToClient4":t=rn.name?rn.name+", давайте перепроверим номер?":"Давайте перепроверим номер?";break;case"client":t="Ура, мы на связи!";break;case"clientInvalid":t=rn.name?rn.name+", давайте перепроверим номер?":"Давайте перепроверим номер?"}if(""!=t){t='<span class="cbh-typing">'+t+"</span>",sn.render(t);var n=en.getSpeed();en.setSpeed(30,30),en.effect({doNotReset:!0,noCursor:!0},function(){clearTimeout(sn.progressTimeout),sn.progressTimeout=setTimeout(sn.progressDots,1e3),en.setSpeed(n[0],n[1])})}}},render:function(e){Kt(".cbh-status").html(e)},progressDots:function(){Kt(".cbh-status").forEach(function(e){var t=e.getElementsByTagName("span")[0];e&&t&&(/\.\.\.$/.test(t.innerHTML)?t.innerHTML=t.innerHTML.replace(/\.\.\.$/,"."):/\.\.$/.test(t.innerHTML)?t.innerHTML=t.innerHTML.replace(/\.\.$/,"..."):/\.$/.test(t.innerHTML)&&(t.innerHTML=t.innerHTML.replace(/\.$/,"..")))}),sn.progressTimeout=setTimeout(sn.progressDots,1e3)}},cn={timeout:2,inited:!1,loading:!1,currentBacklog:0,perBatch:10,maxBacklog:50,oldestMessage:null,connect:function(){return an.io?void(cn.io||(cn.io=an.io,cn.color="",cn.canPost=!0,cn.io.on("connect",cn.enterChat),cn.io.on("disconnect",cn.handleDisconnect),cn.io.on("chatData",cn.handleJoinData),cn.io.on("chatLogs",cn.handleLogs),cn.io.on("chatMessage",cn.handleIncomingMessage),cn.enterChat(),Kt("#cbh_chat_send").on("click",cn.sendMessage),Kt("#cbh_chat_msg").on("keyup",cn.sendMessageKeyboard),je&&Pt.add("chatMessage","chat_message.mp3"))):an.connect(cn.connect)},enterChat:function(){cn.io.emit("chatJoin")},requestLogs:function(e,t){cn.io.emit("chatRequestLogs",{length:e,beforeDate:t})},handleLogs:function(e){cn.currentBacklog+=e.length,e[0]&&(cn.oldestMessage=e[0].date),e.reverse().forEach(cn.prependMessage);var t=Kt(".cbh-messages");if(cn.inited?t.prop("scrollTop",10):(cn.inited=!0,t.prop("scrollTop",1e3)),e.length==cn.perBatch&&cn.currentBacklog<cn.maxBacklog){cn.loading=!1;var n=function(){0!=t.prop("scrollTop")||cn.loading||(cn.loading=!0,t.off("scroll",n),cn.requestLogs(cn.perBatch,cn.oldestMessage))};t.on("scroll",n)}},handleDisconnect:function(){Kt("#cbh_chat_msg").css("border-bottom","none!important;")},handleJoinData:function(e){cn.color=e.color,Kt("#cbh_chat_msg").css("border-bottom","3px solid "+cn.color+"!important;"),cn.inited||cn.requestLogs(cn.perBatch)},handleIncomingMessage:function(e){var t=cn.color==e.color?"left":"right";cn.addMessage(e.message,e.color,t),Pt.play("chatMessage")},prependMessage:function(e){var t=cn.color==e.color?"left":"right",n=Kt('<div class="cbh-message cbh-'+t+'"><span style="color: #000; background-color: '+e.color+' !important;">'+de(e.message)+"</span></div>");Kt("#cbh_chat_messages").prepend(n)},sendMessageKeyboard:function(e){return 13==e.which||13==e.keyCode?(cn.sendMessage(),!1):!0},sendMessage:function(){if(!cn.canPost)return!1;cn.canPost=!1;var e=Kt("#cbh_chat_msg");if(e.exists()){var t=e.val();return t.length?(e.val(""),setTimeout(function(){cn.canPost=!0},1e3*cn.timeout),cn.io.emit("chatMessage",t),t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),cn.addMessage(t,cn.color,"left"),!1):(cn.canPost=!0,!1)}},addMessage:function(e,t,n){var i=Kt(".cbh-messages"),o=i.prop("scrollTop")+i.prop("clientHeight")==i.prop("scrollHeight"),r=Kt('<div class="cbh-message cbh-'+n+'"><span style="color: #000; background-color: '+t+' !important;">'+de(e)+"</span></div>");Kt("#cbh_chat_messages").append(r),(o||"left"==n)&&i.prop("scrollTop",i.prop("scrollHeight"))}};return{showSimpleDialog:function(){v()},showWidgetExit:function(){H()},showWidgetEnter:function(){P()},showNamedDialog:function(e){g(e)}}}(this,this.document);